import{a as hm}from"https://app.framerstatic.com/chunk-62YCT4IV.mjs";import{a as Mm,b as Rm}from"https://app.framerstatic.com/chunk-VFUNIPZE.mjs";import{a as Tm,c as Em,d as jm}from"https://app.framerstatic.com/chunk-MDLKPB4L.mjs";import{a as Ma}from"https://app.framerstatic.com/chunk-HY5YDPZ2.mjs";import{a as Nm,b as Vm,c as Yn,d as Bm,e as Um,f as zm,h as _m,i as Hm,j as qm,l as Wm,m as $m,n as Gm,o as Zm,p as Qm,r as Km,s as Xm,t as Jm,v as eu,w as ou,x as ru}from"https://app.framerstatic.com/chunk-N4ORCZ3X.mjs";import{a as Ym}from"https://app.framerstatic.com/chunk-DMFPBBZX.mjs";import{a as tu}from"https://app.framerstatic.com/chunk-CGJ6M7HA.mjs";import{a as Am,b as $n,c as Lm}from"https://app.framerstatic.com/chunk-LCV62GCE.mjs";import{b as Dm}from"https://app.framerstatic.com/chunk-ZX74CT7S.mjs";import{a as Gn,b as Fm}from"https://app.framerstatic.com/chunk-3ZPJ6E3M.mjs";import{b as Om}from"https://app.framerstatic.com/chunk-NR63DOMD.mjs";import"https://app.framerstatic.com/chunk-ZP3A23AD.mjs";import{$ as xm,A as Wp,B as Uo,C as $p,D as Yp,E as Qp,F as Jp,G as em,H as om,I as nm,J as sm,K as cm,L as lm,M as dm,N as pm,O as mm,P as um,Q as Hn,R as rr,S as gm,T as La,U as bm,V as Da,W as vm,X as ym,Y as Wn,Z as Mt,_ as wm,a as Kr,aa as Cm,b as oc,ba as km,c as sp,ca as Pm,d as u,da as Sm,e as lp,ea as Im,f as pp,g as mp,h as up,i as fp,j as yp,k as pt,l as Bo,m as Mp,n as Ta,o as Rp,p as Ap,q as Dp,r as zn,s as Np,t as Vp,u as Up,v as Aa,w as Op,x as zp,y as _p,z as qp}from"https://app.framerstatic.com/chunk-LY7ED5NB.mjs";import"https://app.framerstatic.com/chunk-OKHFY733.mjs";import{d as op,e as ap}from"https://app.framerstatic.com/chunk-GYU4GC66.mjs";import"https://app.framerstatic.com/chunk-XFC6OVIX.mjs";import"https://app.framerstatic.com/chunk-H5BCW3PJ.mjs";import{Ea as hp,Eb as Ip,Fa as Ye,Ha as Ze,Kb as Tp,Oa as bp,Qa as vp,Qc as qn,Rc as fm,Tb as On,Va as Bn,a as kr,ab as pe,bb as Un,bc as Hp,cb as wp,db as xp,fb as Cp,fc as Zp,gc as Kp,kb as er,ob as or,oc as Xp,pc as _n,qb as kp,rb as Pp,sc as tm,ta as oe,tc as rm,vb as Sp,w as Pr,wa as dt,wc as im,xc as am,za as Ve}from"https://app.framerstatic.com/chunk-ZOM3E5K3.mjs";import"https://app.framerstatic.com/chunk-2QSYC7CP.mjs";import{a as Fo,b as Jt,c as go}from"https://app.framerstatic.com/chunk-2OZLYMBZ.mjs";import{n as cp,r as Ge}from"https://app.framerstatic.com/chunk-MMOHTQLV.mjs";import"https://app.framerstatic.com/chunk-XFC6OVIX.mjs";import"https://app.framerstatic.com/chunk-XMZBEIDF.mjs";import{a}from"https://app.framerstatic.com/chunk-44QIRKTU.mjs";import"https://app.framerstatic.com/chunk-T2PZ4JSJ.mjs";import"https://app.framerstatic.com/chunk-R7V553AN.mjs";import"https://app.framerstatic.com/chunk-ZX3BN2KX.mjs";import"https://app.framerstatic.com/chunk-GFLUN7RK.mjs";import{Ea as Nd,Ha as Ud,Ia as Od,Qa as zd,e as Ed,h as jd}from"https://app.framerstatic.com/chunk-C4U3BOGW.mjs";import{t as Vd,v as Fd,y as Bd}from"https://app.framerstatic.com/chunk-Z2U7734V.mjs";import"https://app.framerstatic.com/chunk-IHOAENGB.mjs";import{$b as Nn,Fd as Zd,Gd as Qd,Hd as Kd,Tb as Ad,a as Ks,ac as lt,b as Xs,bc as Ld,c as Js,cb as Cd,d as ec,ea as An,h as ud,i as fd,jc as _d,qd as Wd,sd as $d,td as Gd,wd as Yd}from"https://app.framerstatic.com/chunk-FLYVAGED.mjs";import{$a as Md,Aa as Pd,Ea as Sd,Pa as Id,aa as wd,t as bd}from"https://app.framerstatic.com/chunk-TNBCV5FE.mjs";import{l as Jd,n as ep}from"https://app.framerstatic.com/chunk-TU4OOYON.mjs";import"https://app.framerstatic.com/chunk-5UKB3L42.mjs";import"https://app.framerstatic.com/chunk-6TTJU3MI.mjs";import{K as kd,ja as Dd}from"https://app.framerstatic.com/chunk-2DZNLUID.mjs";import"https://app.framerstatic.com/chunk-O4BUMGKN.mjs";import{K as cd,Qd as Tn,Wb as pd,Wd as hd,f as sd,jc as md,jg as I,kg as Po,lg as Vo,mg as Ia,ng as Td,wb as he,za as ld}from"https://app.framerstatic.com/chunk-L5XAWWLG.mjs";import"https://app.framerstatic.com/chunk-LEKHLBX3.mjs";import{e as gd}from"https://app.framerstatic.com/chunk-ESOMYHDM.mjs";import"https://app.framerstatic.com/chunk-R2C6SYZL.mjs";import"https://app.framerstatic.com/chunk-JRBFLTNY.mjs";import"https://app.framerstatic.com/chunk-IGWUP4A7.mjs";import"https://app.framerstatic.com/chunk-N57XNHE3.mjs";import"https://app.framerstatic.com/chunk-YYHGCGUD.mjs";import{e as Rn}from"https://app.framerstatic.com/chunk-SHCFPZQA.mjs";import"https://app.framerstatic.com/chunk-P6LO7Y3T.mjs";import"https://app.framerstatic.com/chunk-JB3A7NVR.mjs";import"https://app.framerstatic.com/chunk-HTH46QE2.mjs";import"https://app.framerstatic.com/chunk-BQK5PZHM.mjs";import{k as Fp,l as Bp,o as Gp}from"https://app.framerstatic.com/chunk-OCOQHSNA.mjs";import"https://app.framerstatic.com/chunk-KCIVRHZH.mjs";import"https://app.framerstatic.com/chunk-MUVEOWVO.mjs";import{a as Lp}from"https://app.framerstatic.com/chunk-YSMEIWYJ.mjs";import{a as Ep}from"https://app.framerstatic.com/chunk-RAX6F6AK.mjs";import{a as Vn,c as dp,g as Ra,l as jp}from"https://app.framerstatic.com/chunk-5FPRUV2K.mjs";import"https://app.framerstatic.com/chunk-V67MTYNI.mjs";import{a as xd}from"https://app.framerstatic.com/chunk-EGSW2DQN.mjs";import{b as Hd,c as qd}from"https://app.framerstatic.com/chunk-SFSSTC2L.mjs";import{b as Xd}from"https://app.framerstatic.com/chunk-LTJ23HQX.mjs";import{c as yd}from"https://app.framerstatic.com/chunk-AE26TLAW.mjs";import{a as Dn}from"https://app.framerstatic.com/chunk-WAFDZ45U.mjs";import"https://app.framerstatic.com/chunk-EBV4YDLA.mjs";import"https://app.framerstatic.com/chunk-ZT5WVDZZ.mjs";import"https://app.framerstatic.com/chunk-YE25YANI.mjs";import{b as A}from"https://app.framerstatic.com/chunk-53ZJSVZM.mjs";import"https://app.framerstatic.com/chunk-TQASEEGK.mjs";import{a as ro}from"https://app.framerstatic.com/chunk-ZWF2DABG.mjs";import{a as tr}from"https://app.framerstatic.com/chunk-FBOEAMLY.mjs";import{b as gp}from"https://app.framerstatic.com/chunk-C64P4BVP.mjs";import{c as Fn}from"https://app.framerstatic.com/chunk-FQUBPV2J.mjs";import{a as En,c as jn}from"https://app.framerstatic.com/chunk-D7MEQ7Y3.mjs";import{d as Kt}from"https://app.framerstatic.com/chunk-ZUZL7452.mjs";import{C as Qt,D as In,G as td,H as Mn,I as uo,J as rd,K as nd,L as id,O as oo,P as to,V as ad,aa as Sa,b as Ql,c as Cn,d as kn,e as Yt,f as Pn,g as It,h as Sn,i as Cr,k as Pa,l as Kl,m as Xl,o as Jl,p as ed,u as od,x as Zt}from"https://app.framerstatic.com/chunk-KM5HLAFK.mjs";import"https://app.framerstatic.com/chunk-JHCJJ6RP.mjs";import"https://app.framerstatic.com/chunk-XFC6OVIX.mjs";import"https://app.framerstatic.com/chunk-65AISUCM.mjs";import"https://app.framerstatic.com/chunk-RTJVYMZ7.mjs";import"https://app.framerstatic.com/chunk-SZ7C6NIF.mjs";import{a as Qs}from"https://app.framerstatic.com/chunk-TPLJ226D.mjs";import{a as Xt}from"https://app.framerstatic.com/chunk-4TRPA3GC.mjs";import{a as ct}from"https://app.framerstatic.com/chunk-7GSEC7H4.mjs";import"https://app.framerstatic.com/chunk-D56BGIDP.mjs";import"https://app.framerstatic.com/chunk-ITPH43YU.mjs";import"https://app.framerstatic.com/chunk-LRDLYUYQ.mjs";import"https://app.framerstatic.com/chunk-Q2ODOEJW.mjs";import"https://app.framerstatic.com/chunk-MPBQXYPZ.mjs";import"https://app.framerstatic.com/chunk-4BIZXEWZ.mjs";import{r as Rd}from"https://app.framerstatic.com/chunk-WEEMJIYA.mjs";import"https://app.framerstatic.com/chunk-J7PXUI5V.mjs";import"https://app.framerstatic.com/chunk-A2NI6DTS.mjs";import{a as Ln}from"https://app.framerstatic.com/chunk-PABHF7FN.mjs";import{C as ol,E as tl,Fa as nl,Ga as ll,Gg as bl,Na as wa,P as rl,Ub as dl,Vb as pl,Xb as ml,Zb as ul,a as pn,id as fl,ig as Ct,o as el,ze as hl}from"https://app.framerstatic.com/chunk-74PBQVLX.mjs";import{e as Jc,v as No}from"https://app.framerstatic.com/chunk-XKBE3MLP.mjs";import"https://app.framerstatic.com/chunk-UJZ2TDVM.mjs";import{b as gl,f as $}from"https://app.framerstatic.com/chunk-ZKDWXD3R.mjs";import"https://app.framerstatic.com/chunk-V4TANWPK.mjs";import"https://app.framerstatic.com/chunk-5EVFYJSQ.mjs";import"https://app.framerstatic.com/chunk-U64XJ5GG.mjs";import"https://app.framerstatic.com/chunk-2L7FC5IH.mjs";import"https://app.framerstatic.com/chunk-RUPDYNV7.mjs";import"https://app.framerstatic.com/chunk-TVYYAEV6.mjs";import{$a as vn,Aa as Pl,Af as Gl,Be as $t,Ce as wr,De as G,Fa as bn,Ge as zl,Hd as jl,J as yl,Ka as Sl,Ke as _l,M as wl,Me as it,Nc as Al,Nd as Nl,Nf as at,Pa as xa,Q as xl,R as Cl,Re as xr,T as kl,Tc as Ll,Te as Hl,Tf as Yl,Ud as Vl,W as yr,We as ql,Wf as Ca,Xa as Il,Xe as Pt,Yd as Fl,cb as Ml,dd as Dl,ef as wn,eg as ka,f as vl,fg as Zl,g as fn,h as gn,jb as ko,je as Bl,jf as Wl,kg as st,lb as Rl,lg as xn,mf as $l,qe as Ul,qf as Gt,re as N,se as Ol,te as Ee,u as hn,ud as El,xc as Tl,xe as ue,xf as St,ye as yn,ze as kt}from"https://app.framerstatic.com/chunk-SL6IGPWH.mjs";import"https://app.framerstatic.com/chunk-FMALV26A.mjs";import{a as So}from"https://app.framerstatic.com/chunk-25W4MKKO.mjs";import"https://app.framerstatic.com/chunk-446SUSTG.mjs";import"https://app.framerstatic.com/chunk-4LM3BF74.mjs";import{h as vd}from"https://app.framerstatic.com/chunk-HHZD2RYV.mjs";import"https://app.framerstatic.com/chunk-RLD2AJHB.mjs";import{b as fo}from"https://app.framerstatic.com/chunk-7S2RRDYD.mjs";import{a as rp}from"https://app.framerstatic.com/chunk-JB6HLEIL.mjs";import{a as K}from"https://app.framerstatic.com/chunk-QFU6OGL3.mjs";import"https://app.framerstatic.com/chunk-7FRK6ZG4.mjs";import{a as tp,b as np,c as ip}from"https://app.framerstatic.com/chunk-CTKJD4ES.mjs";import"https://app.framerstatic.com/chunk-IFUXZGQQ.mjs";import{F as O,Ud as al,nd as il,rh as va,ri as ya,xd as mn,yd as un}from"https://app.framerstatic.com/chunk-IYQFN35I.mjs";import{$o as cn,Ad as Jr,Bd as en,Bh as Ac,Br as Gc,Ch as rt,Dd as We,Dh as qt,Dn as Bc,Eh as an,En as Uc,Fd as Cc,Fs as Qc,Ik as nt,Jd as on,Kk as vr,Lk as sn,Md as kc,Nd as tn,Nk as Fc,Qc as tt,Rk as ga,S as sc,Tc as vc,U as cc,Uc as te,Uh as Lc,Va as mc,Vb as fc,Wh as mo,Xc as yc,Yc as wc,Yd as Pc,Zb as gc,aj as jc,ap as ln,bj as Nc,bp as dn,cj as Vc,cp as zc,dp as _c,ep as Hc,gc as hc,hi as Dc,ia as dc,ic as W,jc as H,jt as Kc,l as De,lt as Xc,os as Yc,rb as uc,re as rn,ri as Ec,sd as xc,ts as Zc,tt as ha,ua as _t,wo as Oc,wr as qc,yr as Wc,ze as Sc,zr as $c}from"https://app.framerstatic.com/chunk-DGJIQWYV.mjs";import"https://app.framerstatic.com/chunk-VXJAAVJQ.mjs";import"https://app.framerstatic.com/chunk-5DSVU7DA.mjs";import"https://app.framerstatic.com/chunk-KD4H3DLZ.mjs";import"https://app.framerstatic.com/chunk-4DUBS6C5.mjs";import{c as sl,d as cl,j as Wt}from"https://app.framerstatic.com/chunk-XX4R3RQ6.mjs";import{r as bc}from"https://app.framerstatic.com/chunk-UPWEMTSH.mjs";import"https://app.framerstatic.com/chunk-XFC6OVIX.mjs";import{a as ba}from"https://app.framerstatic.com/chunk-4I3XDWXC.mjs";import"https://app.framerstatic.com/chunk-POQKH4YA.mjs";import{a as ua,b as rc}from"https://app.framerstatic.com/chunk-4AQCMAAQ.mjs";import{a as dd}from"https://app.framerstatic.com/chunk-NKH4EOLD.mjs";import{g as de,i as me}from"https://app.framerstatic.com/chunk-XVSEP5PH.mjs";import"https://app.framerstatic.com/chunk-AUNF3KWQ.mjs";import{F as Rc,G as Tc,H as $e,L as fa,a as nc,i as ic,l as ac,t as pc,u as nn,w as Ic,z as Mc}from"https://app.framerstatic.com/chunk-2U5FJJFT.mjs";import{a as Ht,b as U,d as ke,e as ot,f as Co,g as Je,i as eo,l as br}from"https://app.framerstatic.com/chunk-ZQUNXESX.mjs";import{Vc as po,a as B,b as S,sc as Xr,wd as lc}from"https://app.framerstatic.com/chunk-M7LXWNTO.mjs";import{i as tc}from"https://app.framerstatic.com/chunk-PFHOMMMY.mjs";import{a as ma,b as jo,g as Zs}from"https://app.framerstatic.com/chunk-72P4HPJP.mjs";import{f as Qr}from"https://app.framerstatic.com/chunk-WIUFUKXG.mjs";import{A as da,B as zt,C as Eo,F as pa,J as Zo,X as Ys,Y as xo,e as Zr,k as q,l as Ws,n as $s,q as la,t as et,x as Do,y as ge}from"https://app.framerstatic.com/chunk-GQILM44Y.mjs";import{a as L,b as ne}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{a as Gs}from"https://app.framerstatic.com/chunk-LQILWJHN.mjs";import{e as b,j as qe,k as Yo,l as Gr,m as Yr}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var{onewayMethodTemplate:gw,voidMethodTemplate:Pb,valueMethodTemplate:Ea,streamMethodTemplate:hw}=Zs,ja;(o=>o.service={id:"__UnsplashClient__",fingerprint:"8ee51675b2fe29e5550eb11b6d0b54c1",methods:{listPhotos:{},searchPhotos:{},getRandomPhoto:{},downloadPhoto:{}},newOutgoingWrapper:t=>({listPhotos:Ea.bind(-1,"listPhotos",!0,t),searchPhotos:Ea.bind(-1,"searchPhotos",!0,t),getRandomPhoto:Ea.bind(-1,"getRandomPhoto",!0,t),downloadPhoto:Pb.bind(-1,"downloadPhoto",!0,t)})})(ja||={});var Na;(n=>{n.service=ja.service;function o(r){let i=ma.shared();return{expect:()=>i.expectWithoutDiscovery(n.service,r),discover:s=>i.discover(n.service,r,s),register:s=>i.register({channel:r,service:n.service,implementation:s})}}n.on=o;async function t(r){ma.shared().unregister(r)}n.unregister=t})(Na||={});Rn("init");tc({name:"web",security:{}});var iu=b(mc()),Ue=b(B());var Zn="bottomFooter_bu6twdm",nr="leftAndRightPanelPadding_l10kfgzc",Qn="sortable_s1x6gspv",Kn="sortableWithoutFooter_s1j5muy7",Xn="sortableMinHeight_srs44bt";var Rt="scroll_sfde1p6";var xe=b(S());function Ib(e,o,t){L(!te(o.value));let n=o.value;if(L(qt(n)),ge(n))return"Mixed";if(t)return`${n.length} ${(0,iu.default)("Image",n.length)}`;if(n.length===0)return"0 Items";let r=[];function i(s){if(U(s)){r.push(s);return}if(ke(s)){r.push(s.toString());return}if(Ht(s)&&r.push(s?"Yes":"No"),ge(s)){r.push("Mixed");return}}for(let s of n)switch(s.type){case"boolean":case"string":case"number":i(s.value);break;case"color":if(!U(s.value)){i(s.value);break}i(yp(s.value).title);break;case"enum":{let d=e.control;if(L(d.type==="enum"),!U(s.value)||!d.optionTitles){i(s.value);break}let l=d.options.indexOf(s.value),p=d.optionTitles[l];i(p);break}}return r.length?r.join(", "):`${n.length} Item${n.length===1?"":"s"}`}var Mb=Ue.default.memo(function({index:o,onContextMenu:t,onChange:n,onImageUpload:r,ControlPropRow:i,...s}){return(0,xe.jsx)(i,{...s,onContextMenu:c=>t(c,o),onChange:(c,m,g)=>n(m,g,o),onImageUpload:c=>r(c,o)})});function Rb({isGallery:e,arrayTitle:o,nodeIds:t,control:n,controlPath:r,controlProp:i,controlKey:s,hiddenControlsByNodeId:d,scopeType:l,canAddItems:p,addItem:c,onChange:m,onChangeItem:g,onImageUpload:v,removeAll:f,removeItemAtIndex:y,moveItem:h,ControlPropRow:w}){let P=$t(),k=wp(),C=Je(i.value)?i.value:[],x=(0,Ue.useMemo)(()=>n.control.title?n.control:{...n.control,title:`${o} Item`},[o,n]),D=(0,Ue.useCallback)(R=>{m(s,R,t)},[m,s,t]);return e?(0,xe.jsx)(Pt,{direction:"vertical",className:Rt,children:(0,xe.jsx)(N,{padding:me.panelPadding,gap:0,children:(0,xe.jsx)(Zp,{compact:!0,control:n,value:C,onChange:D})})}):(0,xe.jsx)(Pt,{direction:"vertical",className:Rt,children:(0,xe.jsxs)(N,{padding:0,paddingTop:me.inputSpacing,gap:0,children:[(0,xe.jsx)(wn,{items:C,removeItem:y,moveItem:h,keyForItem:Ln,className:K(nr,Qn,C.length>0&&Xn,!p&&Kn),children:({item:R,index:M})=>{let T=Z=>{a.stores.contextMenuStore.show([{label:"Remove",enabled:!P,click:()=>y(M)},{label:"Remove All",enabled:!P,click:f}],{location:{x:Z.clientX,y:Z.clientY}})};return(0,xe.jsx)(Yl,{sites:!0,children:(0,xe.jsx)(Un.Provider,{value:k,children:(0,xe.jsx)(Mb,{sortable:!0,index:M,nodeIds:t,popoutId:R.id,scopeType:l,controlProp:R,onChange:g,onImageUpload:v,controlKey:s,controlPath:r+`[${M}]`,control:x,onContextMenu:T,hiddenControlsByNodeId:Wn(n.control.type)?d:void 0,ControlPropRow:w})})})}}),p&&(0,xe.jsx)("div",{className:Zn,children:(0,xe.jsx)(oe,{title:void 0,withReorderControl:!0,reorderControlHidden:!0,className:nr,children:(0,xe.jsx)(ue,{onClick:c,enabled:!P,children:"Add\u2026"})})})]})})}function Tb(e){return e?Pd(e,a.tree)==="canvasComponent":!1}function au({nodeIds:e,control:o,controlKey:t,controlPath:n,controlProp:r,onChange:i,onContextMenu:s,ControlPropRow:d,hiddenControlsByNodeId:l,traitTypeKeys:p,scopeType:c,controlSourceIdentifier:m,supportsVariables:g}){let v=Tb(m),f=hd(o),y=g===!0&&f&&v,h=ke(o.maxCount)?o.maxCount:1/0,P=(Co(r.value)?r.value.length:0)<h,k=o.title||W(t),C=(0,Ue.useCallback)((j,Y,ie)=>{i(t,z=>(L(Je(z.value)),{type:"array",value:xo.update(z.value,ie,X=>{let ae=j(X);return L(X.type===ae.type),{...j(X),id:X.id??mo()}})}),Y)},[i,t]),x=ge(r.value),D=(0,Ue.useCallback)(()=>{let j=Zc(o.control,void 0);switch(j.id=mo(),i(t,Y=>x?{type:"array",value:[j]}:(L(Je(Y.value)),{type:"array",value:xo.push(Y.value,j)}),e),o.control.type){case"object":case"transition":case"color":case"image":Ge.navigation.presentPopoutOnRegistration(j.id);break}},[i,t,o,e,x]),R=(0,Ue.useCallback)((j,Y)=>{i(t,ie=>(L(Je(ie.value)),{type:"array",value:xo.move(ie.value,j,Y)}),e)},[i,t,e]),M=(0,Ue.useCallback)(j=>{i(t,Y=>(L(Je(Y.value)),{type:"array",value:xo.remove(Y.value,j)}),e)},[i,t,e]),T=(0,Ue.useCallback)(()=>{i(t,()=>({type:"array",value:[]}),e)},[i,t,e]),Z=(0,Ue.useCallback)(()=>{i(t,()=>({}),e)},[i,t,e]),J=(0,Ue.useCallback)(async(j,Y)=>{let ie=e,z=await j;z&&i(t,X=>(L(X.type==="array"),Je(X.value)?{type:"array",value:xo.update(X.value,Y,ae=>ae.type==="image"?{..._n(ae,z),id:ae.id}:{id:mo(),type:"image",value:z})}:X),ie)},[i,t,e]),V=(0,Ue.useCallback)(j=>{i(t,()=>({type:"array",value:j}),e)},[t,e,i]),re=(0,Ue.useCallback)(j=>{let Y=Qc({engine:a,componentLoader:De,sourceArrayReference:j,targetArrayControl:o});Y&&V(Y)},[V,o]),_=te(r.value)?Ab(r.value):null;return(0,xe.jsx)(oe,{title:k,supportsVariables:y,variableType:"array",traitTypeKeys:p,onCreateVariable:void 0,onSelectVariable:re,onRemoveDynamicValue:Z,dynamicValue:_,onContextMenu:s,children:H(_)?(0,xe.jsx)(pe,{expectedType:"array",reference:_,onRemove:Z,hasError:!y}):(0,xe.jsx)(Ye,{displayDivider:!0,popout:(0,xe.jsx)(Rb,{isGallery:f,arrayTitle:k,nodeIds:e,addItem:D,control:o,onChange:i,moveItem:R,scopeType:c,removeAll:T,controlKey:t,onChangeItem:C,controlPath:n,controlProp:r,canAddItems:P,onImageUpload:J,removeItemAtIndex:M,ControlPropRow:d,hiddenControlsByNodeId:l}),navigationTitle:k,title:Ib(o,r,f),preview:(0,xe.jsx)(Ze,{children:f?(0,xe.jsx)(Nl,{background:"transparent"}):(0,xe.jsx)(hn,{})})})})}function Ab(e){if(L(!fc(e.startValue),"Arrays don't support fetched data"),H(e.startValue))return e.startValue;ne(e.startValue)}var Jn=b(B());var Sr=b(S()),Fa=["borderradius","number"];function su({controlKey:e,control:o,controlProp:t,onChange:n,onContextMenu:r,traitTypes:i,traitTypeKeys:s,supportsVariables:d=!1,supportsComputedValues:l=!1}){let p=(0,Jn.useId)(),c=(0,Jn.useCallback)(f=>n({type:"borderradius",value:f},e),[e,n]),m=go(f=>{let y=o.title||W(e),h=U(t.value)?t.value:"0px",w=he({engine:a,scopeId:f,type:"borderradius",name:y,initialValue:h});w&&c(w)},[o.title,e,t.value,c]),g=()=>{let{value:f}=t;if(te(f))if(H(f)){let y=Ve(a,f);c(dn(y)&&U(y)?y:"0px")}else tt(f)?c("0px"):void 0},v=f=>{c(f),Ge.navigation.presentPopout(p)};return(0,Sr.jsx)(oe,{title:o.title??W(e),traitTypes:i,traitTypeKeys:s,onContextMenu:r,supportsVariables:d,variableType:Fa,variableCreationType:"borderradius",dynamicValue:te(t.value)?t.value:null,onCreateVariable:m,onSelectVariable:c,onRemoveDynamicValue:g,onResetToDefault:()=>{L(dn(o.defaultValue)),n({type:"borderradius",value:o.defaultValue},e)},resetToDefaultEnabled:dn(o.defaultValue)&&t.value!==o.defaultValue,supportsComputedValues:l,computedValuePopoutId:p,onSelectComputedValue:v,children:te(t.value)?(0,Sr.jsx)(Bo,{title:o.title||W(e),value:t.value,outputControl:o,expectedType:Fa,popoutId:p,onRemove:g,onChangeDynamicValue:c,supportsComputedValues:l}):H(t.value)?(0,Sr.jsx)(pe,{expectedType:Fa,reference:t.value,onRemove:g,hasError:!d}):(0,Sr.jsx)(zn,{onChange:c,variant:"borderRadius",value:te(t.value)?Do:t.value})})}var Ba=b(B());var mt=b(S());async function Lb(e){let o=a.tree.get(e);if(!Cc(o)||!o.homeNodeId)return;let t=a.tree.get(o.homeNodeId);t&&(await Md(t,a,De,{waitForAll:!0,persist:!1}),await a.codeGenerationStore.updateComponent(o.id))}function cu({controlProp:e,nodeIds:o,control:t,controlKey:n,onChange:r}){let i=(0,Ba.useCallback)(y=>{U(y)?(Lb(y).catch(q),r({type:"slot",value:[{id:"prototype-slot",reference:y}]},n)):r({type:"slot",value:[]},n)},[r,n]),s=(0,Ba.useCallback)(()=>{i(Lc)},[i]);if(!an(e.value)||o.length!==1)return null;let d=a.tree.getNode(o[0]);if(!d)return null;let l=t.title||W(n),c=e.value[0]?.reference,m=Db(a.tree,a.stores.scopeStore,d),f=!m.map(y=>y.id).find(y=>y===c);return(0,mt.jsx)(oe,{title:l,children:(0,mt.jsx)("div",{style:er,children:(0,mt.jsxs)(xn,{children:[(0,mt.jsx)(st,{title:f?"Select\u2026":"None",selected:f,enabled:!f,onSelect:s}),(0,mt.jsx)(st,{type:"divider"}),m.map(y=>{let h=a.tree.get(y.homeNodeId);if(!h)return;let w=h.name||No(h),P=y.name||No(y),k=`${w} (${P})`;return(0,mt.jsx)(st,{identifier:y.id,title:k,selected:y.id===c,onSelect:i},y.id)})]})})})}function Db(e,o,t){return o.getCanvasPageNodes().filter(n=>{let r=e.get(n.homeNodeId);return!(!r||!An.isValidSlotTarget(e,r)||r.id===t.id||ol(e,t,r,De))}).reverse()}var ei=b(S());function lu({controlKey:e,control:o,controlProp:t,onChange:n,onContextMenu:r,supportsVariables:i=!0,title:s=o.title??W(e)}){let d=o.dataIdentifier;function l(m){n({type:"collectionreference",value:m},e)}function p(m){let g=U(t.value)?t.value:void 0,v=he({engine:a,scopeId:m,type:"collectionreference",name:s,dataIdentifier:d,initialValue:g});v&&l(v)}function c(m){if(H(m)){let g=Ve(a,m);zc(g)?l(g):l(void 0)}else l(void 0)}return(0,ei.jsx)(oe,{title:s,supportsVariables:i,variableType:"collectionreference",onCreateVariable:p,onSelectVariable:l,onRemoveDynamicValue:c,dynamicValue:te(t.value)?t.value:null,onContextMenu:r,collectionReferenceDataIdentifier:d,children:H(t.value)?(0,ei.jsx)(pe,{expectedType:"collectionreference",reference:t.value,onRemove:c,hasError:!i}):(0,ei.jsx)(Kp,{wrapperClassName:dt,dataIdentifier:d,value:t.value,onChange:l})})}var oi=b(B());var ti=b(S()),du=({popoutId:e,control:{title:o,type:t,defaultValue:n},controlProp:{value:r},controlKey:i,traitTypes:s,traitTypeKeys:d,onChange:l,onContextMenu:p,supportsVariables:c})=>{let m=!!c,g=qc(n)?n:Gc,v=r!==g,f=(0,oi.useCallback)(w=>{l({type:t,value:w},i)},[l,t,i]),y=(0,oi.useCallback)(()=>{let w=he({type:"cursor",engine:a,showModal:!0,name:"Cursor",initialValue:nc(r)?r:g,scopeId:a.stores.scopeStore.activeId});Ge.navigation.presentPopout(e),w&&f(w)},[g,f,e,r]),h=(0,oi.useCallback)(()=>{l({type:t,value:g},i)},[i,g,l,t]);return(0,ti.jsx)(oe,{title:o||W(i),traitTypes:s,traitTypeKeys:d,onContextMenu:p,resetToDefaultEnabled:v,onResetToDefault:h,variableType:"cursor",supportsVariables:m,dynamicValue:te(r)?r:null,onSelectVariable:f,onCreateVariable:y,onRemoveDynamicValue:h,children:H(r)?(0,ti.jsx)(pe,{onRemove:h,expectedType:"cursor",hasError:!m,reference:r}):(0,ti.jsx)(em,{popoutId:e,title:o||"Cursor",cursor:r,onChange:f})})};var Oo=b(B());var ut=b(S()),mu=Oo.default.memo(function({nodeIds:e,control:o,controlKey:t,controlProp:n,supportsVariables:r,onChange:i,onContextMenu:s,traitTypeKeys:d,scopeType:l}){let p=n.value,c=(0,Oo.useRef)(null),m=(0,Oo.useCallback)(V=>{i(t,()=>({type:"customcursor",value:V}),e)},[i,t,e]),g=(0,Oo.useCallback)(()=>m(void 0),[m]),v=(0,Oo.useCallback)(()=>{if(l!=="SmartComponent")return;let V=he({type:"customcursor",engine:a,showModal:!0,name:"Cursor",initialValue:void 0,scopeId:a.stores.scopeStore.activeId});V&&m(V)},[m,l]),f=(0,Oo.useCallback)(V=>{c.current?.displayVariableAssignmentOptions?.(V)},[]),y=(0,Oo.useCallback)(V=>{i(t,re=>(L(re.type==="customcursor"),H(re.value)?re:{type:"customcursor",value:V(re.value)}),e)},[t,e,i]),h=H(p)?p:null,{customCursorSmartComponentId:w,customCursorVariant:P,customCursorFollow:k,customCursorOffsetX:C,customCursorOffsetY:x,customCursorPlacement:D,customCursorAlignment:R,customCursorTransitionEnabled:M,customCursorTransition:T}=Wc(p)?p:$c;if(ge(p))return null;let Z=o.title||W(t),J=!H(p)&&!ot(p);return(0,ut.jsx)(oe,{title:Z,onContextMenu:s,variableType:"customcursor",onCreateVariable:v,onRemoveDynamicValue:g,dynamicValue:h,onSelectVariable:m,traitTypeKeys:d,supportsVariables:!!r,panelRowApiRef:c,children:H(p)?(0,ut.jsx)(pe,{onRemove:g,expectedType:"customcursor",reference:p}):l==="SmartComponent"&&r?(0,ut.jsx)(or,{type:"customCursor",onClick:f}):(0,ut.jsx)(Ye,{displayDivider:!0,popout:(0,ut.jsx)(wm,{scopeType:l,customCursorType:"component",onChange:y,customCursorSmartComponentId:w,customCursorVariant:new Set([P]),customCursorFollow:k??!1,customCursorOffsetX:C,customCursorOffsetY:x,customCursorPlacement:new Set([D??Bc]),customCursorAlignment:R??Uc,customCursorTransitionEnabled:M??!1,customCursorTransition:T,scopeId:""}),navigationTitle:Z,title:w?xm(w):"Add\u2026",titleColor:J?de.inputLabel:void 0,onDelete:J?void 0:g,preview:(0,ut.jsx)(Ze,{color:J?de.swatchBackgroundPlaceholderForBorder:de.tint,children:(0,ut.jsx)(jl,{})})})})});var bu=b(B());var yu=b(S()),uu="toggle",fu="single",gu=["v1","v2","v3","v4"];function vu({controlProp:e,nodeIds:o,controlKey:t,control:n,onChange:r,onContextMenu:i,traitTypeKeys:s,sortable:d}){let l=(0,bu.useCallback)(m=>{let g=Ht(e.isFused)?e.isFused:!1,v=m[uu];Ht(v)&&(g=v);let f=ke(e.single)?e.single:0,y=m[fu];ke(y)&&(f=y);let h=[0,0,0,0];e.fused.forEach((w,P)=>{ke(w)&&(h[P]=w)}),gu.forEach((w,P)=>{let k=m[w];ke(k)&&(h[P]=k)}),r({type:n.type,isFused:g,value:{single:f,fused:h}},t)},[n,t,e,r]),p=-1;Ht(e.isFused)&&(p=e.isFused?1:0);let c=jb(t,n.valueLabels);return(0,yu.jsx)(Np,{title:n.title||W(t),mainValue:e.single,segmentedControlIndex:p,fusedValues:e.fused,nodeIds:o,splitInFourKey:uu,mainProperty:fu,fusedProperties:gu,iconType:c?"radius":"border",fusedLabels:n.valueLabels,mainTraitFilter:hu,fusedTraitFilter:hu,toggleTitles:n.toggleTitles,minValue:n.min,onChange:l,onContextMenu:i,traitTypeKeys:s,sortable:d})}function hu(){return!0}var Eb=["tl","tr","br","bl"];function jb(e,o){return e.toLowerCase().includes("radius")?!0:hc(o,Eb)}var ri=b(B());var Mr=b(S()),Ua=["gap","number"];function wu({controlKey:e,control:o,controlProp:t,onChange:n,nodeIds:r,onContextMenu:i,traitTypes:s,traitTypeKeys:d,supportsVariables:l=!1,supportsComputedValues:p=!1}){let c=(0,ri.useId)(),m=(0,ri.useCallback)(h=>{n(e,()=>({type:"gap",value:h}),r)},[e,n,r]),g=go(h=>{let w=o.title||W(e),P=U(t.value)?t.value:"0px",k=he({engine:a,scopeId:h,type:"gap",name:w,initialValue:P});k&&m(k)},[o.title,e,t.value,m]),v=()=>{let{value:h}=t;if(te(h))if(H(h)){let w=Ve(a,h);m(cn(w)&&U(w)?w:"0px")}else tt(h)?m("0px"):void 0},f=h=>{m(h),Ge.navigation.presentPopout(c)},y=h=>{n(e,w=>{let P=U(w.value)?w.value:"0px",k=h(P);return{type:"gap",value:k}},r)};return(0,Mr.jsx)(oe,{title:o.title??W(e),traitTypes:s,traitTypeKeys:d,onContextMenu:i,supportsVariables:l,variableType:Ua,variableCreationType:"gap",dynamicValue:te(t.value)?t.value:null,onCreateVariable:g,onSelectVariable:m,onRemoveDynamicValue:v,onResetToDefault:()=>{L(cn(o.defaultValue)),m(o.defaultValue)},resetToDefaultEnabled:cn(o.defaultValue)&&t.value!==o.defaultValue,supportsComputedValues:p,computedValuePopoutId:c,onSelectComputedValue:f,children:te(t.value)?(0,Mr.jsx)(Bo,{title:o.title||W(e),value:t.value,outputControl:o,expectedType:Ua,popoutId:c,onRemove:v,onChangeDynamicValue:m,supportsComputedValues:p}):H(t.value)&&l?(0,Mr.jsx)(pe,{expectedType:Ua,reference:t.value,onRemove:v}):(0,Mr.jsx)(om,{idForFocus:"gap-input",activeGapAxis:"both",columnGap:t.columnGap,rowGap:t.rowGap,onChange:y})})}var ni=b(B());var no=b(S()),Oa="link";function za(e){return`computed-link-${e}`}var xu=ni.default.memo(function({control:o,controlKey:t,controlProp:n,onChange:r,onContextMenu:i,sortable:s,traitTypeKeys:d,supportsVariables:l=!1,supportsComputedValues:p=!1,supportsFetchDataValues:c=!1,nodeIds:m=[]}){let g=(0,ni.useMemo)(()=>Mp(t||mo()),[t]),{value:v}=n,f=te(v)||nt(v)?v:Do,y=_=>{r(t,j=>({...j,value:_}),m),fp(f,_)},h=_=>{let{defaultValue:j}=o;return U(j)?j:_},w=()=>{let _=h();eo(_)&&y(_)},P=()=>{y(void 0)},k=a.wrapHandler(_=>{let j=o.title||W(t),Y=U(f)?f:h("");a.beginUndoGroup();let ie=he({engine:a,scopeId:_,type:Oa,name:j,initialValue:Y});ie&&y(ie),a.endUndoGroup()}),C=a.wrapHandler(()=>{te(f)&&y(void 0)}),x=a.wrapHandler(()=>{let _=gc({type:"link",value:nt(v)?v:void 0}),j=vc("link",_,[]);return D(j),j}),D=a.wrapHandler(_=>{y(_),Ge.navigation.presentPopout(za(t))}),R=s?void 0:o.title||W(t),M=h(),T=a.stores.scopeStore.scopeType!=="CanvasPage"&&a.stores.scopeStore.scopeType!=="DesignPage",Z=!H(f)&&!nt(f),J=qn(a,f),V=Nb(f),re=U(M)&&nt(v)&&!Fc(v,sn({url:M}));return(0,no.jsx)(oe,{title:R,onContextMenu:i,onResetToDefault:w,resetToDefaultEnabled:re,variableType:Oa,onCreateVariable:k,onRemoveDynamicValue:C,dynamicValue:te(v)?v:null,onSelectVariable:y,traitTypeKeys:d,withReorderControl:s,reorderColumnCount:2,supportsVariables:l,supportsComputedValues:p,computedValuePopoutId:za(t),onSelectComputedValue:D,supportsFetchDataValues:c,onSelectFetchDataValue:x,children:te(f)?(0,no.jsx)(Bo,{title:o.title||W(t),value:f,outputControl:o,expectedType:"link",popoutId:za(t),onRemove:C,onChangeDynamicValue:y,nodeIds:m,supportsComputedValues:p,supportsFetchDataValues:c,controlReferenceInfo:void 0}):H(f)&&l?(0,no.jsx)(pe,{expectedType:Oa,reference:f,onRemove:C}):(0,no.jsx)(no.Fragment,{children:(0,no.jsx)(Ye,{id:g,popout:(0,no.jsx)(fm,{link:ge(f)?void 0:f,onChange:y,supportsVariables:l,supportsPageLinks:T,supportsSlugVariables:l}),navigationTitle:"Link",displayDivider:!0,title:ge(f)?"Add\u2026":J,preview:(0,no.jsx)(Ze,{background:Z?de.swatchBackgroundPlaceholderForLink:void 0,children:V??(0,no.jsx)(Al,{})}),onDelete:nt(f)?P:void 0,titleColor:Z?de.inputLabel:void 0})})})});function Nb(e){if(!vr(e))return;let{webPageId:o,pathVariables:t}=e;if(!t)return;let n=a.tree.getNodeWithTrait(o,We);if(!n)return;let r=De.dataForIdentifier(n.dataIdentifier);if(!r)return;let i=r.annotations?.framerSlug;if(!i)return;let s=t[i];if(!H(s))return;let d=ha(Kc,i);if(s.id===d)return(0,no.jsx)(Cl,{});let l=ha(Xc,i);if(s.id===l)return(0,no.jsx)(xl,{})}var Tr=b(B());var Rr=b(S());function Cu({controlKey:e,control:o,controlProp:t,onChange:n,traitTypes:r,traitTypeKeys:i,supportsVariables:s=!1}){let{value:d}=t,{defaultValue:l}=o,p=$t(),c=(0,Tr.useCallback)(y=>{n({type:"linkrelvalues",value:y},e)},[e,n]),m=(0,Tr.useMemo)(()=>!_t(l,d,!0),[d,l]),g=(0,Tr.useCallback)(()=>{c(l)},[c,l]),v=go(()=>{if(H(d))if(H(d)){let y=Ve(a,d);c(ga(y)?y:void 0)}},[c,d]),f=go(y=>{let h=he({engine:a,scopeId:y,name:"Rel",type:"linkrelvalues",initialValue:ga(d)?d:void 0});h&&c(h)},[c,d]);return(0,Rr.jsx)(oe,{title:o.title||W(e),resetToDefaultEnabled:m,onResetToDefault:g,traitTypes:r,traitTypeKeys:i,supportsVariables:s,onCreateVariable:f,onRemoveDynamicValue:v,dynamicValue:te(t.value)?t.value:null,onSelectVariable:c,variableType:"linkrelvalues",children:(0,Rr.jsx)(N,{className:dt,children:H(d)?(0,Rr.jsx)(pe,{expectedType:"linkrelvalues",reference:d,onRemove:v,hasError:!s}):(0,Rr.jsx)(kp,{readOnly:p,value:rt(d)?void 0:d,onChange:c,supportsAdd:!0})})})}var ii=b(S());function ku({controlKey:e,control:o,controlProp:t,onChange:n,onContextMenu:r,supportsVariables:i=!0,title:s=o.title??W(e)}){let d=o.dataIdentifier;function l(g){n({type:"multicollectionreference",value:g},e)}function p(g){let v=Co(t.value)&&t.value.every(U)?t.value:void 0,f=he({engine:a,scopeId:g,type:"multicollectionreference",name:s,dataIdentifier:d,initialValue:v});f&&l(f)}function c(g){if(H(g)){let v=Ve(a,g);_c(v)?l(v):l(void 0)}else l(void 0)}let m=Vb(t.value);return(0,ii.jsx)(oe,{title:s,supportsVariables:i,variableType:"multicollectionreference",onCreateVariable:p,onSelectVariable:l,onRemoveDynamicValue:c,dynamicValue:te(t.value)?t.value:null,onContextMenu:r,collectionReferenceDataIdentifier:d,children:H(t.value)?(0,ii.jsx)(pe,{expectedType:"multicollectionreference",reference:t.value,onRemove:c,hasError:!i}):(0,ii.jsx)(rm,{wrapperClassName:dt,dataIdentifier:d,value:m,onClickItem:gm,onChange:l})})}function Vb(e){return H(e)?[]:rt(e)?[]:eo(e)?[]:ge(e)?[]:e}function Pu(e,o){if(!Vc(o))return o;let t=jc(o),n=t?cd(t,e):null;return n?n.light??null:Nc(o)}var _a=b(B());var je=b(S());function Fb(e){if(!e)return(0,je.jsx)(bn,{});switch(e){case"effect":return(0,je.jsx)(Sl,{});case"color":return(0,je.jsx)(Bl,{});case"interaction":return(0,je.jsx)(Rl,{});case"boolean":return(0,je.jsx)(El,{});case"object":return(0,je.jsx)(bn,{});default:return(0,je.jsx)(bn,{})}}function Bb({controlProp:e,controlKey:o,nodeIds:t,hiddenControlsByNodeId:n,control:r}){L(qt(e.value));let i,s;if(ot(e.value))for(let p in e.value){let c=e.value[p];switch(L(c),c.type){case"responsiveimage":case"image":if(i||Mt(`${o}.${p}`,t,n))continue;i=U(c.value)?c.value:"transparent";break;case"color":if(s||Mt(`${o}.${p}`,t,n))continue;if(U(c.value)){let m=Pu(a.tree,c.value);s=U(m)?m:"transparent"}else s="transparent";break}}let d=Cp(i&&i!=="transparent"?i:void 0);if(d&&(i=d),U(i))return(0,je.jsx)(hp,{background:i});let l;if(U(s)){let p=dc(s);p.a<.3?l=de.inputText:p.l>.8&&(l="#000")}return(0,je.jsx)(Ze,{background:s,color:l,children:Fb(r.icon)})}function Ub({controlProp:e,controlKey:o,control:t,nodeIds:n,hiddenControlsByNodeId:r}){if(L(qt(e.value)),t.buttonTitle)return t.buttonTitle;if(!e.value||ge(e.value))return"";let i=[];function s(l){U(l)&&i.push(l),ke(l)&&i.push(`${l}`),ge(l)&&i.push("Mixed")}for(let l in e.value){let p=e.value[l];L(p);let c=t.controls[l];switch(L(c),p.type){case"enum":{if(Mt(`${o}.${l}`,n,r))break;if(L(c.type==="enum"),!c.optionTitles||ge(p.value)){s(p.value);break}if(!U(p.value))break;let m=c.options.indexOf(p.value),g=c.optionTitles[m];s(g);break}case"string":if(Mt(`${o}.${l}`,n,r))break;s(p.value);break;case"number":if(Mt(`${o}.${l}`,n,r))break;s(p.value);break}}let d=i.join(", ");return d.length===0?"Object":d}var Ob=_a.default.memo(function({controlProp:o,controlPath:t,nodeIds:n,controlKey:r,control:i,scopeType:s,onChange:d,ControlPropRow:l,hiddenControlsByNodeId:p}){L(o.value);let c=(g,v,f)=>{d(r,y=>{L(y.value);let h=y.value[g];L(h);let w=v(h);return{type:"object",value:{...y.value,[g]:w}}},f)},m=async(g,v)=>{let f=n,y=await g;y&&c(v,h=>(L(h.type==="image"),_n(h,y)),f)};return(0,je.jsx)(Pt,{direction:"vertical",className:Rt,children:(0,je.jsx)(N,{paddingLeft:me.panelPadding,paddingRight:me.panelPadding,paddingBottom:me.inputSpacing,paddingTop:me.inputSpacing,gap:0,children:Object.entries(o.value).map(([g,v])=>{let f=`${t}.${g}`;if(Mt(f,n,p))return null;let y=i.controls[g];L(y);let h=Wn(y.type)?p:void 0;return(0,je.jsx)(l,{nodeIds:n,scopeType:s,onImageUpload:m,controlKey:g,controlPath:f,control:y,onChange:c,controlProp:v,hiddenControlsByNodeId:h},g)})})})});function Su(e){let{nodeIds:o,controlKey:t,controlPath:n,control:r,controlProp:i,onChange:s,ControlPropRow:d,onContextMenu:l,sortable:p,popoutId:c,hiddenControlsByNodeId:m,scopeType:g,traitTypeKeys:v,traitTypes:f}=e;L(qt(i.value),"Reduced objects should always be found");let y=_a.default.useMemo(()=>c??mo(),[c]),h=()=>{s(t,x=>{if(ot(x.value))return x;let D=Yc(r,void 0,{});return L(ot(D)),{...x,value:D}},o),Ge.navigation.presentPopout(y)},w=()=>{s(t,x=>({...x,value:null}),o)},P=r.title||W(t),k=Bb(e),C=Ub(e);return(0,je.jsx)(oe,{title:p?void 0:P,onContextMenu:l,traitTypes:f,traitTypeKeys:v,withReorderControl:p,children:ge(i.value)||i.value===null?(0,je.jsx)(or,{type:r.icon==="effect"?"effect":"object",onClick:h}):(0,je.jsx)(Ye,{displayDivider:!0,preview:k,id:y,title:C,navigationTitle:P,doubleColumn:!p,onDelete:r.optional?w:void 0,popout:(0,je.jsx)(Ob,{nodeIds:o,controlKey:t,controlPath:n,control:r,controlProp:i,onChange:s,ControlPropRow:d,onContextMenu:l,sortable:p,hiddenControlsByNodeId:m,scopeType:g})})})}var ai=b(B());var Ar=b(S()),Ha=["padding","number"];function Iu({controlKey:e,control:o,controlProp:t,onChange:n,onContextMenu:r,traitTypes:i,traitTypeKeys:s,supportsVariables:d=!1,supportsComputedValues:l=!1}){let p=(0,ai.useId)(),c=(0,ai.useCallback)(f=>n({type:"padding",value:f},e),[e,n]),m=go(f=>{let y=o.title||W(e),h=U(t.value)?t.value:"0px",w=he({engine:a,scopeId:f,type:"padding",name:y,initialValue:h});w&&c(w)},[o.title,e,t.value,c]),g=()=>{let{value:f}=t;if(te(f))if(H(f)){let y=Ve(a,f);c(ln(y)&&U(y)?y:"0px")}else tt(f)?c("0px"):void 0},v=f=>{c(f),Ge.navigation.presentPopout(p)};return(0,Ar.jsx)(oe,{title:o.title??W(e),traitTypes:i,traitTypeKeys:s,onContextMenu:r,supportsVariables:d,variableType:Ha,variableCreationType:"padding",dynamicValue:te(t.value)?t.value:null,onCreateVariable:m,onSelectVariable:c,onRemoveDynamicValue:g,onResetToDefault:()=>{L(ln(o.defaultValue)),c(o.defaultValue)},resetToDefaultEnabled:ln(o.defaultValue)&&t.value!==o.defaultValue,supportsComputedValues:l,computedValuePopoutId:p,onSelectComputedValue:v,children:te(t.value)?(0,Ar.jsx)(Bo,{title:o.title||W(e),value:t.value,outputControl:o,expectedType:Ha,popoutId:p,onRemove:g,onChangeDynamicValue:c,supportsComputedValues:l}):H(t.value)&&d?(0,Ar.jsx)(pe,{expectedType:Ha,reference:t.value,onRemove:g}):(0,Ar.jsx)(zn,{variant:"padding",onChange:c,value:te(t.value)?Do:t.value})})}var ir=b(B());var Qo=b(S()),Mu=ir.default.memo(function({control:o,controlKey:t,controlProp:n,onChange:r,traitTypeKeys:i}){let s=vr(n.value)?n.value:Do,d=g=>{r({type:o.type,value:g},t)},l=()=>{d(void 0)},p=o.title||W(t),c=!vr(s),m=qn(a,s);return(0,Qo.jsx)(oe,{title:p,traitTypeKeys:i,children:(0,Qo.jsx)(Ye,{displayDivider:!0,popout:(0,Qo.jsx)(Hb,{value:ge(s)?void 0:s,onChange:d}),navigationTitle:"Scope",title:ge(s)?"Add\u2026":m,preview:(0,Qo.jsx)(Ze,{color:"transparent",background:c?de.swatchBackgroundPlaceholderForBorder:de.tint,children:(0,Qo.jsx)(Fl,{})}),onDelete:nt(s)?l:void 0,titleColor:c?de.inputLabel:void 0})})}),zb={x:0,y:10};function _b(){return Fo("Tree",()=>{let e=new Map,o=new Map,t=new Map;return a.stores.scopeStore.getWebPageNodes().forEach(n=>{let r=mn(a.tree,n);if(!(!r||r.length<=1)){if(n.dataIdentifier){if(o.has(r))return;o.set(r,n.id),t.set(n.id,r);return}e.has(r)||(e.set(r,n.id),t.set(n.id,r))}}),{pages:e,cmsPages:o,getPathForId:n=>t.get(n)??""}})}function Hb({value:e,onChange:o}){let t=_b(),n=(0,ir.useMemo)(()=>{let s=[],d=Array.from(t.pages.keys()),l=Array.from(t.cmsPages.keys());return d.length>0&&s.push({type:"section",value:"Pages",items:d.map(p=>({type:"option",value:p}))}),l.length>0&&s.push({type:"section",value:"CMS",items:l.map(p=>({type:"option",value:p}))}),s},[t]),r=eo(e),i=(0,ir.useCallback)((s,d,l)=>{let p=t.pages.get(s)??t.cmsPages.get(s),c=p?sn({webPageId:p}):void 0;if(r&&!c){l();return}o(c)},[t,r,o]);return(0,Qo.jsx)(N,{paddingTop:me.inputSpacing,paddingRight:me.panelPadding,paddingBottom:me.inputSpacing,paddingLeft:me.panelPadding,gap:0,children:(0,Qo.jsx)(oe,{title:"Scope To",children:(0,Qo.jsx)(Wl,{autoFocus:!0,autoCompleteEnabled:!0,items:n,menuOffset:zb,placeholder:"Page Path\u2026",onChange:i,wrapperClassName:dt,value:e?t.getPathForId(e.webPageId):""})})})}var Lr=b(B());var Io=b(S()),qa="richtext",qb={style:{width:"100%"}};function Ru({nodeIds:e,control:o,controlKey:t,controlProp:n,scopeType:r,onChange:i,onContextMenu:s,sortable:d,traitTypeKeys:l,supportsVariables:p=!1}){let{value:c}=n,m=U(c)?c:"",g=d?void 0:o.title||W(t),v=o.title||W(t),f=U(o.defaultValue)?o.defaultValue:void 0,y=(0,Lr.useCallback)(k=>{i(t,C=>({...C,value:k}),e)},[i,t,e]),h=(0,Lr.useCallback)(()=>{U(f)&&y(f)},[y,f]),w=go(k=>{let C=o.title||W(t),x=U(c)?c:f??"",D=he({engine:a,scopeId:k,type:qa,name:C,initialValue:x,options:{placeholder:o.placeholder}});D&&y(D)},[y,t,c,f,o]),P=go(()=>{if(te(c))if(H(c)){let k=Ve(a,c),C=U(k)?k:f??"";y(C)}else tt(c)?y(f??""):void 0},[y,c,f]);return(0,Io.jsx)(oe,{title:g,onContextMenu:s,onResetToDefault:d?void 0:h,resetToDefaultEnabled:U(f)&&f!==c,variableType:qa,onCreateVariable:w,onRemoveDynamicValue:P,dynamicValue:te(c)?c:null,onSelectVariable:y,traitTypeKeys:l,withReorderControl:d,supportsVariables:p,children:H(c)&&p?(0,Io.jsx)(pe,{expectedType:qa,reference:c,onRemove:P}):(0,Io.jsx)(Io.Fragment,{children:(0,Io.jsx)("div",{style:d?void 0:er,children:(0,Io.jsx)(cp,{useFrescoButton:!0,displayDivider:!1,frescoButtonProps:qb,popout:(0,Io.jsx)(Wb,{value:m,scopeType:r,onChange:y}),navigationTitle:v,children:"Edit Content"})})})})}var Wb=(0,Lr.memo)(function({value:o,scopeType:t,onChange:n}){let r=Hl();return(0,Io.jsx)(N,{padding:`0 ${me.panelPadding}px ${me.panelPadding}px`,children:(0,Io.jsx)(im,{compact:!0,limitMaxHeight:!0,supportsEmbeds:!1,supportsMedia:!1,defaultValue:o,scopeType:t,onChange:n},r)})});var ho=b(B());var zo=b(S()),$b=ho.default.memo(function({value:e,scopeType:o,nodeIds:t,controlKey:n,onChange:r}){let i=H(e)||rt(e)?void 0:ge(e)?Do:e?.collectionItem,s=(0,ho.useCallback)(p=>{r(n,()=>({type:"scrollsectionref",value:{target:p}}),t)},[r,t,n]),d=(0,ho.useCallback)(p=>{r(n,c=>H(c.value)?c:(L(c.type==="scrollsectionref"),{type:"scrollsectionref",value:{target:c.value?.target,collectionItem:p}}),t)},[r,t,n]),l=ge(e)||rt(e)?e:e?.target;return(0,zo.jsx)(N,{gap:0,paddingLeft:me.panelPadding,paddingRight:me.panelPadding,paddingBottom:me.inputSpacing,paddingTop:me.inputSpacing,children:(0,zo.jsx)(Ip,{targets:l,collectionItem:i,scopeId:a.stores.scopeStore.activeId,scopeType:o,showDisabledCollectionItemRow:!0,onSelect:s,onSelectCollectionItem:d})})}),Tu=ho.default.memo(function({nodeIds:e,control:o,controlKey:t,controlProp:n,supportsVariables:r,onChange:i,onContextMenu:s,traitTypeKeys:d,scopeType:l}){let p=n.value,c=(0,ho.useRef)(null),m=(0,ho.useCallback)(C=>{i(t,()=>({type:"scrollsectionref",value:C}),e)},[i,t,e]),g=(0,ho.useCallback)(()=>m(void 0),[m]),v=(0,ho.useCallback)(()=>{if(!va(l))return;let C=he({type:"scrollsectionref",engine:a,showModal:!0,name:"Scroll Section",initialValue:void 0,scopeId:a.stores.scopeStore.activeId});C&&m(C)},[m,l]),f=H(p)?p:null,y=(0,ho.useCallback)(C=>{c.current?.displayVariableAssignmentOptions?.(C)},[]),h=H(p)||rt(p)||ge(p)?void 0:p?.target,w=Fo("Tree",()=>{if(!h||H(h))return;let C=a.tree.get(h);if(!(!C||!il(C)))return C.elementId},[h]);if(ge(p))return null;let P=o.title||W(t),k=!w||!H(p)&&!ot(p);return(0,zo.jsx)(oe,{title:P,onContextMenu:s,variableType:"scrollsectionref",onCreateVariable:v,onRemoveDynamicValue:g,dynamicValue:f,onSelectVariable:m,traitTypeKeys:d,supportsVariables:!!r,panelRowApiRef:c,children:H(p)?(0,zo.jsx)(pe,{onRemove:g,expectedType:"scrollsectionref",reference:p}):va(l)&&r?(0,zo.jsx)(or,{type:"scrollSection",onClick:y}):(0,zo.jsx)(Ye,{displayDivider:!0,popout:(0,zo.jsx)($b,{value:p,scopeType:l,onChange:i,nodeIds:e,controlKey:t}),navigationTitle:P,title:w??"Add\u2026",titleColor:k?de.inputLabel:void 0,onDelete:k?void 0:g,preview:(0,zo.jsx)(Ze,{color:k?de.swatchBackgroundPlaceholderForBorder:de.tint,children:(0,zo.jsx)(Vl,{})})})})});var Au=b(mc()),Mo=b(B());var Ce=b(S()),ci=class extends Mo.default.Component{constructor(){super(...arguments);qe(this,"onChange",t=>{let{slotControlItem:n,onChange:r}=this.props;r({id:n?.id??mo(),reference:t??void 0})});qe(this,"selectNodeId",t=>{this.onChange(t)});qe(this,"remove",()=>{this.onChange(null)})}render(){let{nodeIds:t,slotControlItem:n,onContextMenu:r,sortable:i,title:s,traitTypeKeys:d}=this.props,l=n?.reference;L(t.length===1,"Slot row is only rendered for one item");let p=a.tree.getNode(t[0]);if(!p)return null;let c=An.optionsForNode(a.tree,a.stores.scopeStore.active,p),v=!c.map(f=>f.id).find(f=>f===l);return(0,Ce.jsx)(oe,{title:s,onContextMenu:r,traitTypeKeys:d,withReorderControl:i,children:(0,Ce.jsx)("div",{style:i?void 0:er,children:(0,Ce.jsxs)(xn,{children:[(0,Ce.jsx)(st,{title:v?"Select\u2026":"None",selected:v,enabled:!v,onSelect:this.remove}),(0,Ce.jsx)(st,{type:"divider"}),c.map(f=>(0,Ce.jsx)(st,{identifier:f.id,title:f.name||No(f),selected:f.id===l,onSelect:this.selectNodeId},f.id))]})})})}},Gb=Mo.default.memo(function({index:o,onContextMenu:t,onChange:n,...r}){return(0,Ce.jsx)(ci,{...r,sortable:!0,onContextMenu:d=>t(d,o),onChange:d=>n(d,r.nodeIds,o)})});function Yb({nodeIds:e,controlProp:o,canAddItems:t,addItem:n,onChangeItem:r,removeAll:i,removeItemAtIndex:s,moveItem:d}){let l=$t(),p=Je(o.value)?o.value:[],c=(0,Mo.useCallback)((m,g,v)=>{r(()=>m,g,v)},[r]);return(0,Ce.jsx)(Pt,{direction:"vertical",className:Rt,children:(0,Ce.jsxs)(N,{padding:0,paddingTop:me.inputSpacing,gap:0,children:[(0,Ce.jsx)(wn,{items:p,removeItem:s,moveItem:d,keyForItem:Ln,className:K(nr,Qn,p.length>0&&Xn,!t&&Kn),children:({item:m,index:g})=>(0,Ce.jsx)(Gb,{sortable:!0,index:g,nodeIds:e,onChange:c,slotControlItem:m,onContextMenu:f=>{a.stores.contextMenuStore.show([{label:"Remove",enabled:!l,click:()=>s(g)},{label:"Remove All",enabled:!l,click:i}],{location:{x:f.clientX,y:f.clientY}})}})}),t&&(0,Ce.jsx)("div",{className:Zn,children:(0,Ce.jsx)(oe,{title:void 0,withReorderControl:!0,reorderControlHidden:!0,className:nr,children:(0,Ce.jsx)(ue,{onClick:n,enabled:!l,children:"Add\u2026"})})})]})})}function Lu({nodeIds:e,control:o,controlKey:t,controlPath:n,controlProp:r,onChange:i,traitTypeKeys:s}){L(e.length===1,"Slot row is only rendered for one item");let d=Fo("Tree",()=>{let k=e[0];return L(k),a.tree.getNodeWithTrait(k,on)?.slotsAreChildNodes??!1},[e]),l=ke(o.maxCount)?o.maxCount:1/0,c=(Co(r.value)?r.value.length:0)<l,m=o.title||W(t),g=(0,Mo.useCallback)((k,C,x)=>{i(t,D=>(L(Je(D.value)),{type:"slot",value:xo.update(D.value,x,R=>({...k(R),id:R.id??mo()}))}),C)},[i,t]),v=(0,Mo.useCallback)(()=>{i(t,k=>{let C={reference:void 0,id:mo()},x=xo.push(k.value,C);return{type:"slot",value:x}},e)},[i,t,e]),f=(0,Mo.useCallback)((k,C)=>{i(t,x=>(L(Je(x.value)),{type:"slot",value:xo.move(x.value,k,C)}),e)},[i,t,e]),y=(0,Mo.useCallback)(k=>{i(t,C=>(L(Je(C.value)),{type:"slot",value:xo.remove(C.value,k)}),e)},[i,t,e]),h=(0,Mo.useCallback)(k=>{i(t,C=>(L(Je(C.value)),{type:"slot",value:[k]}),e)},[i,t,e]),w=(0,Mo.useCallback)(()=>{i(t,()=>({type:"slot",value:[]}),e)},[i,t,e]);if(d||!an(r.value))return null;let P=r.value;return o.maxCount===1?(0,Ce.jsx)(ci,{title:m,nodeIds:e,slotControlItem:P[0],onChange:h,traitTypeKeys:s}):(0,Ce.jsx)(oe,{title:m,traitTypeKeys:s,onCreateVariable:void 0,children:(0,Ce.jsx)(Ye,{displayDivider:!0,popout:(0,Ce.jsx)(Yb,{nodeIds:e,addItem:v,control:o,moveItem:f,removeAll:w,onChangeItem:g,controlPath:n,controlProp:r,canAddItems:c,removeItemAtIndex:y}),navigationTitle:m,title:`${P.length} ${(0,Au.default)("Item",P.length)}`,preview:(0,Ce.jsx)(Ze,{children:(0,Ce.jsx)(hn,{})})})})}var li=b(B());var di=b(S());function Du({controlKey:e,control:o,controlProp:{value:t,trackingIdAIPrompt:n},onChange:r,onContextMenu:i,supportsVariables:s=!0,traitTypeKeys:d,title:l=o.title??W(e)}){let p=(0,li.useCallback)(g=>{r({type:"trackingid",value:g},e)},[e,r]),c=(0,li.useCallback)(g=>{let v=U(t)?t:void 0,f=he({engine:a,scopeId:g,type:"trackingid",name:l,initialValue:v});f&&p(f)},[t,l,p]),m=(0,li.useCallback)(g=>{if(H(g)){let v=Ve(a,g);Hc(v)?p(v):p(void 0)}else p(void 0)},[p]);return(0,di.jsx)(oe,{title:l,variableType:"trackingid",onCreateVariable:c,onSelectVariable:p,onRemoveDynamicValue:m,dynamicValue:te(t)?t:null,supportsVariables:s,onContextMenu:i,traitTypeKeys:d,children:H(t)?(0,di.jsx)(pe,{expectedType:"trackingid",reference:t,onRemove:m,hasError:!s}):(0,di.jsx)(Pp,{value:t,onChange:p,aiPrompt:n})})}var Wa=b(S()),Zb={ArrayControlPropRow:au,BooleanControlPropRow:Mm,BorderControlPropRow:Pm,BorderRadiusControlPropRow:su,BoxShadowControlPropRow:Qp,CanvasPageInstanceRow:cu,CollectionReferenceControlPropRow:lu,ColorControlPropRow:Cm,CursorControlPropRow:du,CustomCursorControlPropRow:mu,DateControlPropRow:Tp,EnumControlPropRow:Xp,FileControlPropRow:Jp,FontControlPropRow:km,FusedNumberControlPropRow:vu,GapControlPropRow:wu,ImageControlPropRow:tm,LinkControlPropRow:xu,LinkRelValuesControlPropRow:Cu,MultiCollectionReferenceControlPropRow:ku,NumberControlPropRow:nm,ObjectControlPropRow:Su,PaddingControlPropRow:Iu,PageScopeControlPropRow:Mu,RichTextControlPropRow:Ru,ScrollSectionRefControlPropRow:Tu,SlotControlPropRow:Lu,StringControlPropRow:am,TrackingIdControlPropRow:Du,TransitionControlPropRow:Rp,VectorSetItemControlPropRow:cm};function Eu({children:e}){return(0,Wa.jsx)(Un.Provider,{value:Zb,children:(0,Wa.jsx)(xp.Provider,{value:Bo,children:e})})}var Nu=b(B());var ju=function(e,o,t){let n=e.tree.getNodeWithTrait(o,We);if(!n||(n.abTestingParentId&&(n=e.tree.getNodeWithTrait(o,We)),!n))return;let r=n.getAbTestingFunnel(t);if(r)return r.id;let i=wc(n)?De.dataForIdentifier(n.dataIdentifier):null,s=_d(e.tree,n,i),d=new pl({name:pd(s),abTestingParentId:n.id}),l=new ul({name:`View ${s}`}),p=new ml({trackingEventType:"pageview",trackingRoutePath:un(e.tree,n)});return l.addChild(p),d.addChild(l),e.tree.insertNode(d,t.id),$("funnel_create",{funnelId:d.id,abTestingParentId:n.id}),$("funnel_step_create",{funnelId:d.id,stepId:l.id,eventType:"pageview",actionCount:1}),d.id};var $a="ab-test-status-toast";function Vu(){Sp(rl);let e=Jt(()=>{if(!a.stores.loadingStore.isDocumentLoaded||a.stores.chromeStore.mainView!==0)return;let n=a.tree.getAnalyticsScopeNode(),r=n?.loaded;if(n&&!r)return;let i=a.stores.scopeStore.active;if(!We(i))return;let s=i.abTestingParentId??i.id;if(!i.hasAbTestingChildren(a.tree))return;let l=i.getAbTestingFunnel(r);return l?{abTestingFunnelStatus:l.status,abTestingFunnelId:l.id,webPageId:s}:{webPageId:s}},[],[a.stores.chromeStore,a.stores.scopeStore,a.stores.loadingStore,"Tree"]),o=pt("canEditAnalytics"),t=!pt("canStartStopAbTest");(0,Nu.useEffect)(()=>{if(!e||o)return A({key:$a,type:"remove"});let{webPageId:n,abTestingFunnelId:r,abTestingFunnelStatus:i}=e,s,d;switch(i){case void 0:case 3:case 0:s={title:"Configure",onClick:a.wrapHandler(()=>{let l=a.tree.ensureAnalyticsScopeNode();a.loadScopesThenProcess([l],([p])=>{if(!p)return;let c=ju(a,n,p);a.runBeforeNextFrame(()=>a.analytics.open(c?{tab:"abtest",id:c}:void 0))})})},d="This page has an A/B test that needs configuration";break;case 1:if(!t)return A({key:$a,type:"remove"});s={title:"Start Test",onClick:()=>lm(a,r,"toast")},d="This page has an A/B test that is not running";break;case 2:s={title:"View Results",onClick:()=>a.analytics.open(r?{tab:"abtest",id:r}:void 0)},d="This page is running an A/B test";break;default:ne(i)}A({key:$a,type:"add",variant:"info",text:d,icon:"view-only",duration:1/0,permanent:!0,action:s})},[e,o,t])}var ar=b(B());function Fu(){let e=(0,ar.useRef)(null),o=(0,ar.useCallback)((t,n)=>{e.current=n,a.pluginStore.openPlugin(t,a,n)},[]);return(0,ar.useEffect)(()=>()=>{let t=e.current;if(!t)return;let n=a.pluginStore.activePlugin;n&&n.modeHandlers===t&&a.pluginStore.closePlugin(n.manifestId)},[]),o}var Uu=b(B());var Bu="root_r4keiby";var zu=b(S()),Kb=["image"],Xb=["editImage","image"];function Ou({commonImageReference:e,onChangeImages:o,altText:t=Ac,onChangeAltText:n}){let r=U(e)&&e.length>0,i=Fu(),s=Uu.default.useCallback((d,l)=>{let p=(c,m)=>{o(c),eo(m)||n?.(m)};if(l==="image")i(d,{mode:l,setImages:p});else if(l==="editImage")i(d,{mode:l,setImages:p,getImage:()=>(ua(U(e)),ua(ac(e)),{assetReference:e,altText:U(t)?t:void 0})});else throw new Error(`ImagePicker, unsupported plugin mode: ${l}`)},[t,e,n,o,i]);return(0,zu.jsx)(Dp,{modes:r?Xb:Kb,onSelect:s,className:Bu})}var Ne=b(B());var pi=b(B()),Jb=e=>({acl:[],accessRequests:[],aclById:{},activeIds:new Set,projectId:e,userStates:{}});function _u(e,o){let[t,n]=(0,pi.useReducer)((r,i)=>{if(!ev(i))return r;let{projectStore:s,remoteUsers:d}=a.stores,l=vd(r,p=>ov(p,i));return _t(r,l)?r:(s.update(l),d.handleUserUpdates(l.aclById),l)},e,Jb);return(0,pi.useEffect)(()=>o.onMessage(r=>{let{remoteUsers:i}=a.stores;switch(r.type){case"leave":i.handleLeave(r.id);break;case"state":i.handleCursorUpdate(r.id,r.value);break;case"welcome":for(let s in r.value.userStates)i.handleCursorUpdate(s,r.value.userStates[s]);break}n({type:"handleMessage",message:r})}),[o]),[t,n]}function ev(e){if(e.type!=="handleMessage")return!0;switch(e.message.type){case"join":case"leave":case"welcome":return!0;default:return!1}}function ov(e,o){if(o.type==="handleMessage"){let{message:t}=o;if(t.type==="join"){if(e.activeIds.has(t.id)){console.warn("User joined twice:",t.id);return}else e.activeIds.add(t.id);e.userStates[t.id]={}}else if(t.type==="leave"){if(e.activeIds.has(t.id))e.activeIds.delete(t.id);else{console.warn("Unknown user left:",t.id);return}delete e.userStates[t.id]}else t.type==="welcome"&&(e.activeIds=new Set(Object.keys(t.value.userStates)),e.userStates=t.value.userStates)}else if(o.type==="updateACL"||o.type==="resetACL"){let t={};for(let n of o.acl)t[n.user.id]=n;if(o.type==="resetACL"){e.acl=o.acl,e.accessRequests=o.accessRequests,e.aclById=t;return}e.aclById={...e.aclById,...t},e.acl=Object.keys(e.aclById).map(n=>e.aclById[n])}else o.type==="updateProject"?(L(e.project,"Project must be set before updating it"),Object.assign(e.project,o.changes)):o.type==="setProject"?e.project===void 0?e.project=o.project:Object.assign(e.project,o.project):ne(o)}var Hu=b(B()),tv={type:"add",variant:"info",icon:"color-wheel",action:{title:"Install",onClick:rd},text:"To sample colors, please use the new desktop app",key:"install-desktop-app",duration:5e3};function qu({channel:e,toast:o}){(0,Hu.useEffect)(()=>{if(!e)return;let t={async sampleColor(){return window.EyeDropper?{color:(await new window.EyeDropper().open().catch(i=>{if(i?.name==="AbortError")return{sRGBHex:void 0};throw i})).sRGBHex}:(o(tv),{})}};return ec.on(e).register(t)},[e,o])}var Wu=b(B());var mi=class{constructor(o){this.api=o}async listPhotos(o){return this.api.listPhotos(o)}async searchPhotos(o){return this.api.searchPhotos(o)}async getRandomPhoto(o){return this.api.getRandomPhoto(o)}async downloadPhoto(o){return this.api.downloadPhoto(o)}};function $u({api:e,channel:o}){(0,Wu.useEffect)(()=>{if(o)return Na.on(o).register(new mi(e))},[e,o])}var Za=b(B());var ui;(y=>{async function e(){let{loadingStore:h}=a.stores;if(!h.documentLoaded)return new Promise(w=>{let P=a.changes.observe(h,async()=>{h.documentLoaded&&(a.changes.removeObserver(P),w())})})}y.ready=e;function o(h){return m(a.tree.getNode(h))}y.get=o;function t(h){return a.processWhenReadyAsync(()=>{let w=[];for(let P of a.tree.root.walk()){let k=m(P);h(k)&&w.push(k)}return w})}y.find=t;function n(h){let w=f(),P=v([h]);return a.stores.modulesStore.addExternalModulesToProject([...P],{onTreeUpdate:()=>{let{__parentId:k,__position:C,...x}=m(h);if(k&&!U(k))throw w.getError("Invalid parentId property");let D=a.tree.getNode(k&&U(k)?k:a.stores.scopeStore.activeId);if(!D)throw w.getError("Parent not found");return m(g(w,x,D.id,ke(C)?C:void 0))}})}y.create=n;async function r(h){let w=f(),P=v(h);return a.stores.modulesStore.addExternalModulesToProject([...P],{onTreeUpdate:()=>{let k=[];for(let C of h){let{id:x,__parentId:D,__position:R,children:M,__class:T,...Z}=C;if(!x||!U(x))throw w.getError('Missing a valid "id" field');let{tree:J}=a,V=J.getNode(x);if(!V)throw w.getError("Not found",x);if(D&&U(D)){let Y=J.getNode(D);if(!Y)throw w.getError("Not found as parent",D);if(!tl(J,Y,V,a.stores.scopeStore.active.id,De))throw w.getError(`Cannot move to parent with ID ${D}`,x)}M&&w.warn("Skipping children, recursive updates not supported",x),T&&w.warn("Node type (__class) cannot be updated",x);let re=m(V),_=Object.keys(re),j={};Object.keys(Z).forEach(Y=>{if(!_.includes(Y)&&!Dc(Y)){w.warn("Skipping setting ${key}, not found on original",x);return}j[Y]=Z[Y]}),k.push(()=>{if(V.set(Z),U(D)||ke(R)){let Y=U(D)?D:V.parentid,ie=ke(R)?R:void 0;a.moveNode(V.id,Y,ie)}})}k.map(C=>C())}})}y.update=r;async function i(h,...w){return a.processWhenReadyAsync(()=>{[h,...w].forEach(P=>{a.tree.remove(P)})})}y.remove=i;function s(){return m(a.selection.nodes[0])}y.selected=s;async function d(h,w=!0){return a.processWhenReadyAsync(()=>{let P=a.tree.getNode(h);if(!P)return;let{scopeStore:k,selectionStore:C,canvasStore:x,persistedUserDefaults:D}=a.stores;if(k.selectByNode(P.id),C.set(P.id),w){let R=a.tree.getBoundingFrameForNodes([P]);x.zoomToCenter(R,{animated:D.animateOnZoom})}})}y.select=d;function l(h){let w=a.tree.getNode(h);if(!(w instanceof ya))return;let P=a.stores.modulesStore.getPersistedModuleByLocalIdentifier(w.codeComponentIdentifier);if(P)return`${P.importURL}@${P.saveId}`}y.componentURL=l;function p(h){let w=Zo(h);if(!w)return;let P=De.componentForIdentifier(h);if(!P)return;let{name:k,properties:C,file:x,packageIdentifier:D}=P,R={name:k,properties:C};if(zt(w))return w.type==="codeFile"?{...R,file:x}:R;if(da(w))return{...R,url:D}}y.componentInfo=p;async function c(h,w){let P=f(),{reorder:k=!1,reset:C=!1}=w||{};return a.processWhenReadyAsync(()=>{let x=a.tree.ensureColorStyleTokenListNode(),D=[],R;C&&(R=new Set(x.children.filter(M=>M.installed).map(M=>M.id))),Object.entries(h).forEach(([M,{name:T,color:Z,darkColor:J}])=>{let V=a.tree.getNode(M);if(V===null)a.tree.insertNode(new wa({id:M,name:T,light:Z,dark:J,installed:!0}),x.id),D.unshift(M);else{if(!(V instanceof wa)||V.parentid!==x.id){P.warn("Node exists but is not a color, skipping",M);return}V.set({name:T,light:Z,dark:J,installed:!0}),D.unshift(M)}R?.delete(M)}),k&&D.forEach(M=>{a.tree.move(M,x.id,0)}),R?.forEach(M=>{a.tree.remove(M)})})}y.installColors=c;function m(h){if(!h)return;let w=["cache","mutable","update"],P={};return(h instanceof Ec?h.keys():Object.keys(h)).forEach(C=>{if(w.includes(C))return;let x=h[C];C==="children"&&(x=x?.map(m)),P[C]=x}),P}function g(h,w,P,k){if(!w)throw h.getError("Missing properties");let C=dl,{id:x,__class:D,children:R,...M}=w;switch(D){case"CodeComponentNode":{C=ya;break}case"CanvasPageNode":{C=nl,P=void 0;break}}let T=a.tree.create(C,P,M);if(T.parentid&&ke(k)&&a.tree.moveNode(T,T.parentid,k),Array.isArray(R))try{R.forEach(Z=>g(h,Z,T.id))}catch(Z){throw a.tree.remove(T.id),Z}return T}function v(h,w=new Set){for(let{__class:P,codeComponentIdentifier:k,children:C}of h){if(Co(C)&&v(C,w),P!=="CodeComponentNode"||!U(k))continue;let x=Zo(k);!x||!da(x)||!Eo(x)||w.add(x)}return w}function f(){let h=new Error,w=h.stack?.split(`
`)??[],P;w[0]==="Error"?(P=w[2],w[0]="Error: $$message$$",w.splice(1,1)):w.splice(0,1);let k=P?.match(/\s*at Object\.(\S+)( \[as (\S+)\])?/),C=k?`.${k[3]??k[1]}`:"",x=(R,M)=>{let T=M?`[Node ${M}] `:"";return`VEX${C}: ${T}${R}`},D=R=>{let M=[...w];return M[0]=M[0]?.replace("$$message$$",R)??"",M.join(`
`)};return{warn:(R,M)=>{console.warn(x(R,M))},getError:(R,M)=>(h.message=x(R,M),h.stack=D(h.message),h)}}})(ui||={});var Ya=b(B());var Gu="container_c1m6xhbt";var fi=b(S()),nv=Rd(a.stores.assetStore.assetMap);uc({assetResolver:nv,fetchGoogleFontsList:ip,fetchFontshareFontsList:np,fetchBuiltInFontsList:tp,enableFontStore:!0,executionTimeBudgets:{frame:500,component:150},experiments:$e,projectFeatures:fo});bl(!0);if(a.stores.chromeStore.userIsEmployee||$s.isDevelopment)window.Vekter=op.Vekter,window.VEX=ui;else{let e=["e96bd9c5-e994-4069-955c-a665e70135ef"];window?.framerUser.spaces.some(t=>to(t)&&t.organization&&e.includes(t.organization.id))&&(window.VEX=ui)}sc({target:cc.canvas});var Yu=Ya.default.memo(function(){let{isDarkMode:o}=ro(),{isComponentOverlayEditMode:t}=Fo([a.stores.scopeStore,a.stores.chromeStore,a.overlayStore],()=>({isComponentOverlayEditMode:(Jr(a.stores.scopeStore.active)||en(a.stores.scopeStore.active))&&a.overlayStore.editModeActive&&a.stores.chromeStore.mainView===0}));return a.documentSettings.syncDarkAppearance(o),Op(window),window.addEventListener("touchmove",iv,{passive:!1}),Ya.default.useEffect(()=>{document.body.classList.toggle(ap,t)},[t]),(0,fi.jsx)("div",{className:Gu,children:(0,fi.jsx)(sp,{children:(0,fi.jsx)(Im,{})})})});function iv(e){e.touches.length>1&&(e.preventDefault(),e.stopPropagation())}var _o=b(S());function Zu({socket:e,projectId:o,userId:t,documentConnection:n}){return(0,Za.useEffect)(()=>{n.setSendFunction(d=>{e.send(d)});let r=e.onConnect(d=>{n.onConnect(),d||(a.stores.modulesStore.refresh().catch(q),a.stores.publishStore.loadHostnames().catch(q))}),i=e.onDisconnect(d=>n.onDisconnect(d)),s=e.onMessage(d=>n.onMessage(d));return e.connect(),()=>{r(),i(),s()}},[n,e,o,t]),(0,Za.useEffect)(()=>e.onDisconnect(i=>{switch(i){case"AccessDenied":{window.location.reload();break}case"DocumentNotFound":{A({type:"add",variant:"error",key:"document-not-found",text:"The project data could not be loaded. If this error persists, please notify Framer Support.",duration:1/0,icon:"error",showCloseButton:"never"});break}case"UnsupportedSchema":{A({type:"add",variant:"error",key:"unsupported-schema",text:"Outdated document version. Opening this document is no longer supported.",duration:1/0,icon:"error",showCloseButton:"never"});break}}}),[e,o]),(0,_o.jsx)(Yn,{location:"vekter",title:"Failed to load editor",description:(0,_o.jsxs)(_o.Fragment,{children:[(0,_o.jsx)(G,{children:"Something unexpected happened while loading the editor. Try disabling any ad-blocking browser extensions and reload the page."}),(0,_o.jsx)("br",{}),(0,_o.jsx)("br",{})]}),children:(0,_o.jsx)(Yu,{})})}var sv={label:"Edit",submenu:[{label:u.undo,role:"undo"},{label:u.redo,role:"redo"},{type:"separator"},{label:u.goBack,role:"goBack",acceleratorLabel:I.goBack},{label:u.goForward,role:"goForward",acceleratorLabel:I.goForward},{type:"separator"},{label:u.cut,role:"cut",requiresUserInteraction:!0},{label:"Copy",submenu:[{label:u.copy,role:"copy",requiresUserInteraction:!0},{label:u.copyStyle,role:"copyStyle",accelerator:I.copyStyle,requiresUserInteraction:!0},{label:u.copyFill,role:"copyFill",accelerator:I.copyFill,requiresUserInteraction:!0},{label:u.copyLink,role:"copyLink",requiresUserInteraction:!0},{label:u.copyCSS,role:"copyCSS",requiresUserInteraction:!0},{label:u.copySVG,role:"copySVG",requiresUserInteraction:!0},{label:u.copyText,role:"copyText",requiresUserInteraction:!0},{label:u.copyGrid,role:"copyGrid",requiresUserInteraction:!0},{label:u.copyEffects,role:"copyEffects",requiresUserInteraction:!0},{label:u.copyCursor,role:"copyCursor",requiresUserInteraction:!0},{label:u.copyURL,role:"copyURL",requiresUserInteraction:!0}]},{label:"Paste",submenu:[{label:u.paste,role:"paste",requiresUserInteraction:!0},{label:u.pasteStyle,role:"pasteStyle",accelerator:I.pasteStyle,requiresUserInteraction:!0},{label:u.pasteFill,role:"pasteFill",requiresUserInteraction:!0},{label:u.pasteInPlace,role:"pasteInPlace",accelerator:I.pasteInPlace,requiresUserInteraction:!0},{label:u.pasteEffects,role:"pasteEffects",requiresUserInteraction:!0},{label:u.pasteCursor,role:"pasteCursor",requiresUserInteraction:!0},{label:u.pasteGrid,role:"pasteGrid",requiresUserInteraction:!0}]},{label:u.duplicate,role:"duplicate",accelerator:I.duplicate},{label:u.delete,role:"delete"},{type:"separator"},{label:u.openPanelSearch,role:"openPanelSearch",accelerator:I.openPanelSearch},{label:u.rename,role:"rename",accelerator:I.rename},{label:u.generateLayerNames,role:"generateLayerNames"},{label:u.toggleLayerLock,role:"toggleLayerLock",accelerator:I.toggleLayerLock},{label:u.toggleLayerVisible,role:"toggleLayerVisible",accelerator:I.toggleLayerVisible},{type:"separator"},{label:u.selectMostRecentPage,role:"selectMostRecentPage",accelerator:I.selectMostRecentPage},{label:u.selectGroundNode,role:"selectGroundNode",acceleratorLabel:I.selectGroundNode,acceleratorLabelWindows:Po.selectGroundNode},{label:u.selectParent,role:"selectParent",acceleratorLabel:I.selectParent},{label:u.selectAll,role:"selectAll"},{label:u.selectSiblings,role:"selectSiblings",accelerator:I.selectSiblings},{label:u.selectChildren,role:"selectChildren"},{label:u.selectAllTopParents,role:"selectAllTopParents"},{label:u.selectTextNodes,role:"selectTextNodes"}]},cv={label:"Tool",submenu:[{label:"Insert",role:"toggleInsert",accelerator:I.toggleInsert},{label:"Wireframer",role:"generateWebPage",accelerator:I.generateWebPage},{type:"separator"},{label:"Layout",submenu:[{label:u[O.actionForCase(20)],role:O.actionForCase(20),accelerator:I[O.actionForCase(20)]},{label:u[O.actionForCase(21)],role:O.actionForCase(21),accelerator:I[O.actionForCase(21)]},{label:u[O.actionForCase(22)],role:O.actionForCase(22),accelerator:I[O.actionForCase(22)]},{label:u[O.actionForCase(24)],role:O.actionForCase(24)},{label:u[O.actionForCase(23)],role:O.actionForCase(23)}]},{label:u[O.actionForCase(10)],role:O.actionForCase(10),accelerator:I[O.actionForCase(10)]},{label:u[O.actionForCase(11)],role:O.actionForCase(11),accelerator:I[O.actionForCase(11)]},{label:u[O.actionForCase(12)],role:O.actionForCase(12),accelerator:I[O.actionForCase(12)]},{label:u[O.actionForCase(45)],role:O.actionForCase(45),accelerator:I[O.actionForCase(45)]},{label:u[O.actionForCase(14)],role:O.actionForCase(14),accelerator:I[O.actionForCase(14)]},{label:u.startLinkTool,role:"startLinkTool",accelerator:I.startLinkTool},{label:u[O.actionForCase(19)],role:O.actionForCase(19),accelerator:I[O.actionForCase(19)]},{label:u[O.actionForCase(46)],role:O.actionForCase(46),accelerator:I[O.actionForCase(46)]},{label:"Vector",submenu:[{label:u[O.actionForCase(33)],role:O.actionForCase(33),accelerator:I[O.actionForCase(33)]},{label:u[O.actionForCase(16)],role:O.actionForCase(16),accelerator:I[O.actionForCase(16)]},{label:u[O.actionForCase(15)],role:O.actionForCase(15),accelerator:I[O.actionForCase(15)]},{label:u[O.actionForCase(17)],role:O.actionForCase(17)},{label:u[O.actionForCase(18)],role:O.actionForCase(18)}]},{type:"separator"},{label:"Library",role:"toggleLibraryModal",acceleratorLabel:I.toggleLibraryModal},{label:u[O.actionForCase(4)],role:O.actionForCase(4),accelerator:I[O.actionForCase(4)]},{label:u[O.actionForCase(41)],role:O.actionForCase(41),accelerator:I[O.actionForCase(41)]},{label:u[O.actionForCase(40)],role:O.actionForCase(40),accelerator:I[O.actionForCase(40)]},{label:u.sampleColor,role:"sampleColor",accelerator:I.sampleColor}]},lv={label:"Layout",submenu:[{label:u.addEnclosingFrame,role:"addEnclosingFrame",accelerator:I.addEnclosingFrame},{label:u.addEnclosingStack,role:"addEnclosingStack",accelerator:I.addEnclosingStack},{label:u.removeFramePreservingChildren,role:"removeFramePreservingChildren",accelerator:I.removeFramePreservingChildren},{type:"separator"},{label:u.autoSizeLayout,role:"autoSizeLayout",accelerator:I.autoSizeLayout},{label:u.sizeToFitContent,role:"sizeToFitContent",accelerator:I.sizeToFitContent},{type:"separator"},{label:u.moveToFront,role:"moveToFront",accelerator:I.moveToFront},{label:u.moveForward,role:"moveForward",accelerator:I.moveForward},{label:u.moveBackward,role:"moveBackward",accelerator:I.moveBackward},{label:u.moveToBack,role:"moveToBack",accelerator:I.moveToBack},{type:"separator"},{label:"Align",submenu:[{label:u.alignLeft,role:"alignLeft",accelerator:I.alignLeft},{label:u.alignCenter,role:"alignCenter",accelerator:I.alignCenter},{label:u.alignRight,role:"alignRight",accelerator:I.alignRight},{type:"separator"},{label:u.alignTop,role:"alignTop",accelerator:I.alignTop},{label:u.alignMiddle,role:"alignMiddle",accelerator:I.alignMiddle},{label:u.alignBottom,role:"alignBottom",accelerator:I.alignBottom},{type:"separator"},{label:u.distributeHorizontal,role:"distributeHorizontal",accelerator:I.distributeHorizontal,acceleratorWindows:Po.distributeHorizontal},{label:u.distributeVertical,role:"distributeVertical",accelerator:I.distributeVertical,acceleratorWindows:Po.distributeVertical},{type:"separator"},{label:u.alignToSelection,role:"alignToSelection"},{label:u.alignToParent,role:"alignToParent"}]}]},dv={label:"Text",submenu:[{label:u.makeBold,role:"makeBold",accelerator:I.makeBold},{label:u.makeItalic,role:"makeItalic",accelerator:I.makeItalic},{label:u.makeUnderlined,role:"makeUnderlined",accelerator:I.makeUnderlined},{label:u.chooseFontFamily,role:"chooseFontFamily",accelerator:I.chooseFontFamily}]},pv={label:"Vector",submenu:[{label:"Group",role:"group",accelerator:I.group},{label:"Ungroup",role:"ungroup",accelerator:I.ungroup},{type:"separator"},{label:u.flipHorizontal,role:"flipHorizontal"},{label:u.flipVertical,role:"flipVertical"},{type:"separator"},{label:"Flatten",role:"flattenPath"},{label:"Reverse Path Direction",role:"reversePath"},{type:"separator"},{label:u.unite,role:"unite",accelerator:I.unite},{label:u.subtract,role:"subtract",accelerator:I.subtract},{label:u.intersect,role:"intersect",accelerator:I.intersect},{label:u.exclude,role:"exclude",accelerator:I.exclude},{label:u.join,role:"join",accelerator:I.join}]},mv={label:"Component",submenu:[{label:u.makeComponent,ellipsis:!0,role:"makeComponent",accelerator:I.makeComponent},{label:u.makeCodeComponent,ellipsis:!0,role:"makeCodeComponent",accelerator:I.makeCodeComponent},{type:"separator"},{label:u.showComponentMaster,role:"showComponentMaster"},{label:u.detachComponentInstanceFromMaster,role:"detachComponentInstanceFromMaster"},{label:u.updateComponentMasterFromInstance,role:"updateComponentMasterFromInstance"},{type:"separator"},{label:u.resetComponentInstanceOverrides,role:"resetComponentInstanceOverrides"}]},uv={label:"Preview",submenu:[{role:"showPreview",accelerator:I.showPreview}]},fv={label:"Plugins",submenu:[{label:u.openPlugins,role:"openPlugins"},{label:u.runRecentPlugin,role:"runRecentPlugin",accelerator:I.runRecentPlugin},{label:u.clearRecentPlugins,role:"clearRecentPlugins"},{label:u.openDevelopmentPlugin,role:"openDevelopmentPlugin",accelerator:I.openDevelopmentPlugin},{type:"separator"},{label:u.showPluginDeveloperTools,role:"showPluginDeveloperTools"},{label:u.openPluginDocumentation,role:"openPluginDocumentation"}]},gv={label:"Code",submenu:[{label:u.createCodeComponent,role:"createCodeComponent"},{label:u.createOverride,role:"createOverride"},{type:"separator"},{label:u.saveCodeFile,role:"saveCodeFile",acceleratorLabel:I.saveCodeFile},{type:"separator"},{label:u.showAPIDocumentation,role:"showAPIDocumentation",requiresUserInteraction:!0}]},hv={label:"Help",submenu:[{label:u.sitesGetStarted,role:"sitesGetStarted",requiresUserInteraction:!0},{label:u.browseMarketplace,role:"browseMarketplace",requiresUserInteraction:!0},{label:u.startAppTour,role:"startAppTour",requiresUserInteraction:!0},{type:"separator"},{label:u.requestFeature,role:"requestFeature",requiresUserInteraction:!0},{label:u.openCommunity,role:"openCommunity",requiresUserInteraction:!0},{type:"separator"},{label:u.keyboardShortcuts,role:"keyboardShortcuts"},{label:u.copyVersion,role:"copyVersion",requiresUserInteraction:!0},{label:u.contactSupport,role:"contactSupport"}]},Qu={label:u.goToProjects,role:"goToProjects"},bv={label:u.quickActions,role:"quickActions",ellipsis:!0,accelerator:I.quickActions},Ku=e=>({role:"publishSite",accelerator:e?I.publishSite:void 0}),sr=la({view:()=>({label:"View",submenu:[{label:u.zoomIn,role:"zoomIn",accelerator:I.zoomIn},{label:u.zoomOut,role:"zoomOut",accelerator:I.zoomOut},{label:u.resetZoom,role:"resetZoom",accelerator:I.resetZoom,acceleratorWindows:Po.resetZoom},{label:u.zoomToFitAll,role:"zoomToFitAll",accelerator:I.zoomToFitAll,acceleratorWindows:Po.zoomToFitAll},{label:u.zoomToFitSelection,role:"zoomToFitSelection",accelerator:I.zoomToFitSelection,acceleratorWindows:Po.zoomToFitSelection},{label:u.collapseLayers,role:"collapseLayers",accelerator:I.collapseLayers},{type:"separator"},{label:u.showPages,role:"showPages",accelerator:I.showPages},{label:u.showLayers,role:"showLayers",accelerator:I.showLayers},{label:u.showAssets,role:"showAssets",accelerator:I.showAssets},{type:"separator"},{label:u.toggleInterface,role:"toggleInterface",accelerator:I.toggleInterface,acceleratorWindows:Po.toggleInterface},{label:u.toggleShowAllLinks,role:"toggleShowAllLinks"},{label:"Show Handoff",role:"toggleShowHandoff"},{label:u.toggleRulers,role:"toggleRulers",accelerator:I.toggleRulers,acceleratorWindows:Po.toggleRulers},{label:u.toggleGrids,role:"toggleGrids",accelerator:I.toggleGrids,acceleratorWindows:Po.toggleGrids},{label:u.toggleShowPixelGrid,role:"toggleShowPixelGrid"}]}),webViewMenu:()=>({label:"View",submenu:[{label:"Appearance",submenu:[{label:u.toggleAppearanceSystem,role:"toggleAppearanceSystem"},{role:"toggleAppearance",accelerator:I.toggleAppearance,acceleratorWindows:Po.toggleAppearance}]},{type:"separator"},{role:"toggleContentManagement",label:u.toggleContentManagement,accelerator:I.toggleContentManagement},{role:"newCollectionItem",label:u.newCollectionItem,accelerator:I.newCollectionItem},{role:"toggleLocalization",label:u.toggleLocalization,accelerator:I.toggleLocalization},{label:u.openAnalytics,role:"openAnalytics"},{type:"separator"},...Array.isArray(sr.view.submenu)?sr.view.submenu:[]]}),webFileMenu:()=>({label:"File",submenu:[{role:"newProject",ellipsis:!0,accelerator:I.newProject,requiresUserInteraction:!0},{label:"New Page",role:"newWebPage"},{label:"New Page Folder",role:"newWebPageFolder"},{label:"Sort Pages Alphabetically",role:"sortWebPagesAlphabetically"},{label:"Sort Layers Alphabetically",role:"sortLayersAlphabetically"},{type:"separator"},{role:"duplicateProject",requiresUserInteraction:!0},{role:"archiveProject"},{type:"separator"},{role:"copyRemixLink",requiresUserInteraction:!0},{role:"transferProject",requiresUserInteraction:!0},{type:"separator"},{role:"inviteCollaborators",ellipsis:!0},{role:"toggleVersionHistory",label:u.toggleVersionHistory,accelerator:I.toggleVersionHistory},{type:"separator"},{label:u.importFigma,ellipsis:!0,role:"importFigma",accelerator:I.importFigma},{type:"separator"},{role:"uploadImage",accelerator:I.uploadImage,requiresUserInteraction:!0},{role:"uploadVideo",requiresUserInteraction:!0},{type:"separator"},Ku(!0),{role:"openPublishedSite",accelerator:I.openPublishedSite}]}),preferencesMenu:()=>({label:"Preferences",submenu:[{label:u.newContentAsDraft,role:"newContentAsDraft"},{label:u.useDirectSelect,role:"useDirectSelect"},{label:u.useSmartLayoutPins,role:"useSmartLayoutPins"},{label:u.reverseZoomDirection,role:"reverseZoomDirection"},{label:u.fastZoom,role:"fastZoom"},{label:u.animateOnZoom,role:"animateOnZoom"},{label:u.keyboardZoomsToSelection,role:"keyboardZoomsToSelection"},{label:u.autoSwitchToLayers,role:"autoSwitchToLayers"},{label:u.showScrollToContentToast,role:"showScrollToContentToast"},{label:u.exitCanvasOnDoubleClick,role:"exitCanvasOnDoubleClick"},{type:"separator"},{label:u.resetDefaultFrameBackground,role:"resetDefaultFrameBackground"},{label:u.nudgePreferences,role:"nudgePreferences"},{label:u.togglePerformanceMode,role:"togglePerformanceMode"},{label:u.toggleCanvasPages,role:"toggleCanvasPages",badge:"Legacy"}]}),settingsMenu:()=>({label:"Site Settings",submenu:[{label:u.openSiteSettings,role:"openSiteSettings",accelerator:I.openSiteSettings},{type:"separator"},{label:u.openGeneralSettings,role:"openGeneralSettings"},{label:u.openDomainSettings,role:"openDomainSettings"},{label:u.openRedirects,role:"openRedirects"},{label:u.openForms,role:"openForms"},{label:u.openVersions,role:"openVersions"},{label:u.openPlans,role:"openPlans"}]})}),vv={role:"openAccountSettings",label:u.openAccountSettings},yv={role:"toggleBetaChannel",label:u.toggleBetaChannel,badge:"beta"},Qa=la({mobileWebAppMenu:()=>[Qu,{type:"separator"},Ku(!1)],webAppMenu:()=>[Qu,{type:"separator"},bv,{type:"separator"},sr.webFileMenu,sv,sr.webViewMenu,cv,lv,dv,pv,mv,uv,fv,gv,sr.preferencesMenu,{type:"separator"},sr.settingsMenu,hv,vv,{type:"separator"},yv]});var Xu=b(B());function Ju(e){let[o,t]=(0,Xu.useState)(!1),n=Ap(e);return!o&&!n&&t(!0),o}var ee=b(B());var cr=b(B());var ef="modal_m1k7kvam",of="moveDraftTitle_m12ee7ht",tf="moveDraftDescription_m1jpz33r",rf="moveDraftButton_mwem6zi",nf="confirmMoveDraftButton_c1qp1m89",af="buttonChevron_bl7xnjh";var Qe=b(S());function sf({project:e,user:o,onShowMoveProjectMenu:t,onConfirmMoveProject:n,moveProjectDestination:r,onDismiss:i}){let s=(0,cr.useRef)(null);tr("ui_impression",{page:"deprecate-drafts-modal"});let d=(0,cr.useMemo)(()=>Mn(e,o.id)==="Drafts"?"Select\u2026":"Drafts",[e,o]);function l(){if(s.current===null)return;let c=s.current.getBoundingClientRect();t({location:{x:c.left,y:c.bottom},skipConfirmation:!0,hideDrafts:!0})}let p=cr.default.useCallback(async()=>{$("ui_interaction",{page:"deprecate-drafts-modal",id:"move-to-teams"}),await n(),i()},[n,i]);return(0,Qe.jsx)(Gt,{hasBackdrop:!0,visible:!0,onDismiss:ct,className:ef,children:(0,Qe.jsxs)(N,{gap:15,alignItems:"flex-start",justifyContent:"flex-start",children:[(0,Qe.jsxs)(N,{gap:10,children:[(0,Qe.jsx)("div",{className:of,children:"Select a Workspace"}),(0,Qe.jsx)("div",{className:tf,children:(0,Qe.jsx)(G,{children:"You have multiple workspaces where you can create projects. Please choose a workspace to add this project to."})})]}),(0,Qe.jsxs)(ue,{className:rf,large:!0,onClick:l,ref:s,children:[(0,Qe.jsx)("div",{className:Ee,children:r||d}),(0,Qe.jsx)("div",{className:af,children:(0,Qe.jsx)(ko,{})})]}),(0,Qe.jsx)(ue,{onClick:p,large:!0,className:nf,variant:"primary",enabled:!!r&&r!==d,children:(0,Qe.jsx)(G,{children:"Confirm"})})]})})}var hi=b(B());var cf="modal_m1sbcbyn",lf="title_t14j9fcj",Ka="checkBoxLabel_cr11tra",Xa="checkBoxLabelLink_chr9530",df="continueButton_chz9b7s";var gi=b(B());var Re=b(S()),xv=et("signup");function mf({firstName:e,lastName:o,email:t,onContinue:n}){let[r,i]=gi.default.useState(!1),[s,d]=gi.default.useState(!1),l=gi.default.useCallback(p=>{Kt.post("/auth/v2/signup/google-one-tap",{subscribe:s,origin:"framer-web",firstName:e,lastName:o,email:t}).then(n).catch(c=>xv.reportError(c)),p.preventDefault()},[s,t,e,o,n]);return(0,Re.jsx)("form",{onSubmit:l,children:(0,Re.jsxs)(N,{gap:25,padding:10,children:[(0,Re.jsx)("div",{className:lf,children:"Before you continue\u2026"}),(0,Re.jsxs)(N,{gap:20,direction:"column",children:[(0,Re.jsxs)(N,{direction:"row",alignItems:"center",children:[(0,Re.jsx)(wr,{large:!0,id:"tos-accept",value:r,onChange:i}),(0,Re.jsx)("label",{htmlFor:"tos-accept",children:(0,Re.jsx)(Cv,{})})]}),(0,Re.jsxs)(N,{direction:"row",alignItems:"center",children:[(0,Re.jsx)(wr,{large:!0,id:"tos-email-optin",title:"Send me updates via email. Unsubscribe any time",value:s,onChange:d}),(0,Re.jsx)("label",{htmlFor:"tos-email-optin",children:(0,Re.jsx)(it,{className:Ka,children:"Send me updates via email. Unsubscribe any time"})})]})]}),(0,Re.jsx)(ue,{type:"submit",large:!0,variant:"primary",title:"Continue","aria-label":"continue",enabled:r,className:df})]})})}function Cv(){return(0,Re.jsxs)(it,{className:Ka,children:["I agree to the"," ",(0,Re.jsx)("a",{href:"https://www.framer.com/support/accounts/terms-of-service/",target:"_blank",className:Xa,children:"Terms of Service"})," ","and"," ",(0,Re.jsx)("a",{href:"https://www.framer.com/support/accounts/privacy-statement/",target:"_blank",className:Xa,children:"Privacy Statement"})]})}function kv(e,o,t){window.dataLayer?.push({event:"eventTracking",trackingEventCategory:o,trackingEventAction:e,trackingEventLabel:"",trackingEventValue:"",firstName:t.firstName,lastName:t.lastName,email:t.email})}var uf=({firstName:e,lastName:o,email:t})=>kv("Web","CompleteRegistration",{firstName:e,lastName:o,email:t});var bi=b(S());function ff({accountApi:e}){let{account:o,fetchProfile:t,fetchMe:n}=e;hi.default.useEffect(()=>{t()},[t]),hi.default.useEffect(()=>{if(o?.profile){let{firstName:i,lastName:s,email:d}=o.profile;uf({firstName:i,lastName:s,email:d})}},[o?.profile?.email]);let r=hi.default.useCallback(async()=>{await n(),a.stores.modalStore.set({type:"Welcome",source:"automatic"})},[n]);return(0,bi.jsx)(Gt,{hasBackdrop:!0,visible:!0,onDismiss:ct,className:cf,children:o?.profile?.email?(0,bi.jsx)(mf,{firstName:o.profile.firstName,lastName:o.profile.lastName,email:o.profile.email,onContinue:r}):(0,bi.jsx)(St,{})})}var Ja=b(B());function gf(e){let[o,t]=at.extract(e);(0,Ja.useEffect)(()=>{if(!o)return Qm();document.querySelectorAll("link[rel='icon']").forEach(n=>{n.setAttribute("href",o)})},[o]),(0,Ja.useEffect)(()=>{document.title=`${t} \u2013 Framer`},[t])}var hf="moveProjectMenu_mqspbls";var vf=b(B());var bf=new Bn;function yf(e,o){return(0,vf.useEffect)(()=>{let t=bf,n=[];return e((r,i,s)=>{t.set(r,i,s),n.push(r)}),()=>{n.forEach(r=>t.remove(r))}},o),bf}var wf=b(B());function xf(){return(0,wf.useCallback)(async(e,o,t,n)=>{switch(n||(n=a.canvasStore.getViewportCenter()),e){case"image":await Ed(a,[t],n,o);break;case"video":await lp(a,[t],n,o);break;default:ne(e)}},[])}var Dr=b(B());function Cf({channel:e,project:o,canMoveProject:t,onShowMoveProjectMenu:n}){let r=new Qr,i=(0,Dr.useRef)(r);(0,Dr.useEffect)(()=>{if(!e)return;let s=Kr.on(e).expect();return Kr.on(e).register({currentProjectStream:i.current.newStream,showMoveProjectMenu:async({location:d})=>{n({location:d})}}),()=>{Kr.unregister(s)}},[e,t,n]),(0,Dr.useEffect)(()=>{i.current.emit({title:o.title??void 0,space:{...o.space,displayName:o.space.displayName??void 0,icon:o.space.icon??void 0},canMoveProject:t})},[o,t])}var kf=new Qr,Pf=!1;function Sf({channel:e,user:o,permissions:t}){if(kf.emit(t),Pf)return;let n={getSessionIdentity:async()=>({user:o}),permissionsStream:kf.newStream};Js.on(e).register(n),Pf=!0}var wi=b(B());function If(e,o){let t=[],n=e.stores.modulesStore.localModules.values();for(let d of n){if(d?.type!=="codeFile")continue;L(d.sourceContent,"Source content must exist");let l=[];for(let p of De.getAllEntities()){let c=Zo(p.identifier);zt(c)&&Eo(c)&&c.localId===d.localId&&l.push({type:p.type,exportSpecifier:c.exportSpecifier,annotations:p.annotations??{}})}t.push({name:d.name,localId:d.localId,source:d.sourceContent,entities:l})}let{url:r,title:i}=o,s={__framerProjectTitle:i,__framerProjectURL:r,__framerLocalCodeFiles:t,...e.tree.toJS()};return JSON.stringify(s,null,4)}function Mf(e){return e?e.trim().replace(/\W+(\b\w|$)/g,(o,t)=>t.toUpperCase()):"document"}function Pv(e,o){let t=document.createElement("a");t.href=e,t.download=o,document.body.appendChild(t),t.click(),t.remove()}function vi(e,o,t={type:"application/json"}){let n=new File([e],o,t),r=URL.createObjectURL(n);Pv(r,o),URL.revokeObjectURL(r)}var At=async e=>{let o=a.remoteDocument?.projectId;o&&(await $n(o,{releaseChannel:e}),window.location.reload())};function Rf(e){let o=e.get(hl)?.getRedirects()||[],{linksWithLocale:t,linkWithLocaleByRedirect:n}=Ud(o,e.root.locales),r=t.map(({link:c})=>c),i=Fd(e,r),s=Vd(i),d=Bd(e,t,s),l=c=>{let m=n.get(c);return m?d.get(m)??null:null},p="";for(let c of o){let m=c.path,g=Od(c,l);m&&g&&(p+=`${JSON.stringify(m)},${JSON.stringify(g)}
`)}vi(p,"redirects.csv",{type:"text/csv",endings:"native"})}var Sv="Settings";function Tf(){let e=Bp(Xt,nn,"employeesOnlySettings");return[{label:Sv,submenu:e.options},e.actionHandlers]}var yi="employees-only-menu",Iv="Employees Only",es=async e=>{let o=a.remoteDocument?.projectId;if(!o)return;let t=!fo.isOn(e);await $n(o,{canvasFeatures:{[e]:t}});let n=a.remoteDocument?.socket;n&&(n.send({type:"toggleProjectFeature",value:{feature:e,enabled:t}}),e==="crdt"&&await Promise.race([Ma(3e4),new Promise((r,i)=>{(async()=>{for(;a.remoteDocument?.networkReady;)await Ma(300)})().then(r,i)})])),window.location.reload()};function Af(e,o){let t={[e]:o?"on":"off"};Xt.update(t),Fp(t,"employeesOnlySettings",nn)}async function Er(e){return new Promise(o=>{a.runWithFullyLoadedTree(o,{name:e})})}function Mv(){return Vp({label:"Show Status Bar",role:"toggleStatusBar",accelerator:"CommandOrControl+Option+Shift+B",action(){let e=!a.stores.chromeStore.statusBarIsVisible;Af("showStatusBar",e),a.stores.chromeStore.statusBarIsVisible=e},checked:()=>a.stores.chromeStore.statusBarIsVisible},{label:"Show Debug Bar",role:"toggleDebugBar",accelerator:"CommandOrControl+Shift+D",action(){Af("showDebugBar",!Xt.isOn("showDebugBar"))},checked:()=>Xt.isOn("showDebugBar")},{label:"Show NUX Steps",role:"showNuxSidebar",action:async()=>{await Sm(),window.location.reload()}},{type:"separator"},{label:"Kit Project",role:"toggleKitProjectFeature",action:()=>es("kit").catch(q),checked:()=>fo.isOn("kit")},{label:"Skip Duplication Page",role:"toggleSkipInterstitial",action:()=>es("skipInterstitial").catch(q),checked:()=>fo.isOn("skipInterstitial")},...Xd()?[{label:"CRDT",role:"toggleCrdt",action:()=>es("crdt").catch(q),checked:()=>fo.isOn("crdt")}]:[],{label:"Project Release Channel",submenu:[{label:"Default",role:"defaultReleaseChannel",action:()=>At(null).catch(q),checked:()=>a.stores.projectStore.project?.releaseChannel===null},{type:"separator"},{label:"Stable",role:"stableReleaseChannel",action:()=>At("stable").catch(q),checked:()=>a.stores.projectStore.project?.releaseChannel==="stable"},{label:"Beta",role:"betaReleaseChannel",action:()=>At("beta").catch(q),checked:()=>a.stores.projectStore.project?.releaseChannel==="beta"},{label:"Alpha",role:"alphaReleaseChannel",action:()=>At("alpha").catch(q),checked:()=>a.stores.projectStore.project?.releaseChannel==="alpha"}]},{type:"separator"},{label:"Duplicate Version\u2026",role:"duplicateProjectWithVersion",action(){a.stores.modalStore.set({type:"DuplicateProjectWithVersion",source:"main_menu"})}},{label:"Download Document Fixture\u2026",role:"downloadDocumentFixture",requiresUserInteraction:!0,action(){let e=a.stores.projectStore.project;if(!e)return;let o=If(a,e),t=`${Mf(e.title)}.fixture.json`;vi(o,t)}},{type:"separator"},{label:"Export Redirects",role:"exportRedirects",action(){Rf(a.tree)}},{label:"Import Redirects\u2026",role:"importRedirects",action(){jd(()=>{Nd(a,"edit"),a.stores.modalStore.set({type:"ImportRedirects",source:"main_menu"})})}},{type:"separator"},{label:"Instant NPM",submenu:[{label:"Reinstall Import Map",role:"reinstallImportMap",async action(){$("ui_interaction",{page:yi,id:"employees-reinstall-import-map"});let e="reinstall-import-map";A({type:"add",key:e,text:"Reinstalling import map dependencies",variant:"progress",duration:1/0,showCloseButton:"never"});try{await a.stores.modulesStore.uninstallBlockedNpmDependencies();let{importMap:o}=await a.stores.modulesStore.reinstallNpmDependencies();A({type:"add",key:e,text:`Reinstalled ${ba(Object.keys(o.imports).length,"dependency","dependencies")}. Reloading Project.`,duration:5e3,variant:"success"}),window.location.reload()}catch(o){A({type:"add",key:e,text:`Reinstall failed: ${o}`,variant:"error",duration:5e3})}}},{label:"Rebuild Import Map from Dependencies",role:"rebuildImportMap",async action(){$("ui_interaction",{page:yi,id:"employees-rebuild-import-map"});let e="rebuild-import-map";A({type:"add",key:e,text:"Rebuilding Import Map from Dependencies.json",variant:"progress",duration:1/0});try{await a.stores.modulesStore.removeBlockedNpmDependencies();let{importMap:o}=await a.stores.modulesStore.rebuildImportMapFromDependencies();A({type:"add",key:e,text:`Built an import map with ${ba(Object.keys(o.imports).length,"dependency","dependencies")}. Reloading Project.`,duration:5e3,variant:"success"}),window.location.reload()}catch(o){console.error("Rebuild of import map failed",o),A({type:"add",key:e,text:`Rebuild of import map failed: ${o}`,variant:"error",duration:1/0})}}},{label:"Upgrade Rive to latest",role:"updateRiveDependency",async action(){$("ui_interaction",{page:yi,id:"employees-rebuild-import-map"});let e="upgrade-rive-dependency";A({type:"add",key:e,text:"Installing latest version of Rive",variant:"progress",duration:1/0});try{await a.stores.modulesStore.unsafeUpgradeDependency("@rive-app/react-canvas",["@rive-app/canvas"]),A({type:"add",key:e,text:"Rive dependency upgraded",duration:5e3,variant:"success"}),window.location.reload()}catch(o){console.error("Rive dependency upgrade failed.",o),A({type:"add",key:e,text:`Upgrade failed: ${o}`,variant:"error",duration:1/0})}}},{type:"separator"},{label:"Clear NPM Dependencies",role:"clearNpmDependencies",async action(){async function e(){$("ui_interaction",{page:yi,id:"employees-clear-dependencies"});try{await a.stores.modulesStore.clearNpmDependencies(),A({type:"add",text:"NPM Dependencies are cleared. Reloading Project.",variant:"success",duration:5e3}),window.location.reload()}catch(o){A({type:"add",text:`Clearing Dependencies failed: ${o}`,variant:"error",duration:5e3})}}a.stores.modalStore.set({type:"Confirmation",title:"Clear NPM Dependencies",variant:"destructive",description:"This will break any local or external components in your project that use Instant NPM. Are you sure?",onConfirm:e,confirmLabel:"Confirm",source:"main_menu"})}}]},{label:"Repair Corrupt Modules",role:"repairCorruptModules",async action(){let e="repair-corrupt-modules";await Er(e);let o=Array.from(a.stores.modulesStore.localModules.values()),t={method:"HEAD",mode:"cors"},n=[];for(let[l,p]of o.entries()){A({type:"add",key:e,text:`Analyzing module ${l+1} out of ${o.length} for corruption\u2026`,duration:1/0,variant:"progress"});let c=a.stores.modulesStore.getPersistedModuleByLocalId(p.localId);if(!c)continue;let m=[];try{for(let[g,v]of Object.entries(c.files))(await fetch(c.baseURL+v,t)).ok||m.push({type:g,name:v})}catch{continue}m.length&&n.push({localId:p.localId,type:p.type,files:m})}if(!n.length){A({type:"add",key:e,text:"No corrupt modules found.",duration:5e3,variant:"success"});return}A({type:"remove",key:e}),console.log(n);let i=["The following module(s) are corrupt. Repair?","WARNING: This will replace the corrupt files with empty content.",n.map(({localId:l,files:p})=>`${l} (${p.map(c=>c.name).join(", ")})`).join(`
`)];if(!window.confirm(i.join(`

`)))return;let s=n.length,d=0;for(let l=0;l<s;l++){let p=n[l];if(p){A({type:"add",key:e,text:`Repairing corrupt module ${l+1} out of ${s}\u2026`,duration:1/0,variant:"progress"});try{let c=a.stores.modulesStore.forType(p.type).getByLocalId(p.localId),m=p.files.map(g=>({...g,content:""}));await c.persist({files:m})}catch(c){A({type:"add",text:`Repairing ${p.localId} failed: ${c}`,variant:"error",duration:5e3}),d++}}}A({type:"add",key:e,text:d>0?`Repaired ${s-d} out of ${s} module(s).`:`Repaired ${s} module(s).`,duration:5e3,variant:d>0?"error":"success"})}},{label:"Replace Module in CMS",role:"replaceModuleInCMS",async action(){let e="repair-corrupt-modules",o=prompt("existing module identifier to replace"),t=prompt("new module identifier to replace");o&&t&&Eo(o)&&Eo(t)?a.processWhenReady(()=>{md(a.tree,o,t),A({type:"add",key:e,text:`replaced all references of from:'${o}' with to:'${t}' in CMS collection items`,duration:5e3,variant:"success"})}):A({type:"add",key:e,text:`from:'${o}' OR to:'${t}' are not values is not a valid ModuleExportIdentifer`,duration:5e3,variant:"error"})}},{label:"Vacuum Modules with Deleted Nodes",role:"vacuumModules",async action(){let e="vacuum-modules";await Er(e);let o=new Set,t=new Set,n=new Set;for(let p of a.tree.root.walk())if(yc(p)&&p.dataIdentifier&&o.add(p.dataIdentifier),on(p)&&p.isVectorInstance&&Eo(p.codeComponentIdentifier)){t.add(p.codeComponentIdentifier);let c=al(Zo(p.codeComponentIdentifier),a.tree,a.stores.modulesStore);c&&n.add(c.set.moduleId)}let r=Array.from(a.stores.modulesStore.localModules.values()),i=r.filter(p=>{let c=p.type;switch(c){case"canvasComponent":case"collection":case"css":case"draftCollection":case"prototype":case"screen":case"webPageMetadata":case"layoutTemplate":case"localization":case"vectorSet":case"vector":break;case"codeFile":case"componentPresets":case"config":case"siteMetadata":case"design":return!1;default:ne(c,`Unhandled module type ${p.type}`)}if(c==="vector"){let g=pa(p.localId,"default").value;if(t.has(g))return!1}if(c==="vectorSet"){let g=a.stores.modulesStore.forType("vectorSet").getByLocalId(p.localId).id;if(n.has(g))return!1}if(c==="collection"||c==="draftCollection"){let g=p.localId;c==="draftCollection"&&(g=g.replace("draftCollection","collection"));let v=pa(g,"default").value;if(o.has(v))return!1}let m=a.tree.get(p.name);if(!m)return!0;try{if(c==="localization"||c==="webPageMetadata")return!1;if(!Id(m,a.tree).includes(c))return!0}catch{return!0}return!1}),s=a.stores.modulesStore.localModules.get("config/site");if(s&&i.push(s),!i.length){A({type:"add",key:e,text:"No modules to delete.",duration:5e3,variant:"success"});return}console.log(i);let d=`${i.length} out of ${r.length}`,l=i.map(p=>p.localId).join(", ");if(window.confirm(`Found ${d} unused module(s). Delete?

${l}`)){A({type:"add",key:e,text:`Deleting ${i.length} modules\u2026`,duration:1/0,variant:"progress"});try{await a.stores.modulesStore.deleteModules(i.map(p=>p.localId)),A({type:"add",key:e,text:`Deleted ${i.length} module(s).`,duration:5e3,variant:"success"})}catch{A({type:"add",key:e,text:"Failed to delete one or more modules. See console for more details.",duration:5e3,variant:"error"})}}}},{label:"Unused Invisible Nodes",submenu:[{label:"Remove All at Once\u2026",role:"cleanupHiddenNodes",async action(){let e="cleanup-hidden-nodes";await Er(e),await os(!1,0,e)}},{label:"Remove Slower (One Scope at a Time)\u2026",role:"cleanupHiddenNodes",async action(){let e="cleanup-hidden-nodes-slowly";await Er(e),await os(!0,0,e)}},{label:"Remove Even Slower (One Scope at a Time, With Extra Delay)\u2026",role:"cleanupHiddenNodes",async action(){let e="cleanup-hidden-nodes-very-slowly";await Er(e),await os(!0,500,e)}}]})}async function os(e,o,t){let n=new Map,r=a.tree.root.children.filter(el);for(let c of r){let m=c.loaded;L(m,"All scopes must be loaded when cleaning up hidden nodes");let g=hm(a.tree,m);g.size>0&&n.set(m.id,g)}if(n.size===0){alert("Found no nodes that are hidden in every breakpoint :(");return}let i=0,s=0,d={};for(let[,c]of n)for(let m of c){let g=a.tree.get(m);g&&(i++,s+=Rv(g),d[g.__class]??=[],d[g.__class].push(m))}let l=`Found ${i} fully hidden nodes (+ ${s} descendants), of which: ${Object.entries(d).map(([c,m])=>`${m.length} ${c}${m.length>1?"s":""}`).join(", ")}. Delete? (Check the console for the list of all nodes per class.)`;if(console.log("Cleanup hidden nodes: node IDs per class:",d),!window.confirm(l))return;let p=0;for(let[,c]of n)await new Promise(m=>{a.processWhenReady(()=>{a.setEditReason("cleanup hidden nodes");for(let g of c)a.tree.remove(g);p+=c.size,A({type:"add",key:t,text:`Deleted ${p} out of ${i} hidden nodes\u2026`,duration:1/0,variant:"progress"}),e?Zr(o).then(()=>{a.codeGenerationStore.generateAndUpdateQueuedComponents().finally(m)}):m()})});A({type:"add",key:t,text:`Deleted ${i} hidden nodes.`,duration:5e3,variant:"success"})}function Rv(e){let o=0;for(let t of e.descendants())o++;return o}function Lf(e,o,t){let n=t.findIndex(i=>i.label===e)+1,r=[...t];return r.splice(n,0,o),r}function Df(){let[e,o]=Up(),[t,n]=Tf(),[r,i]=Mv();return[{label:Iv,submenu:[e,t,...r]},{...o,...n,...i}]}var ts={delete:"Delete",redo:"CommandOrControl+Shift+Z",selectAll:"CommandOrControl+A",undo:"CommandOrControl+Z"},Ef={copy:"CommandOrControl+C",cut:"CommandOrControl+X",paste:"CommandOrControl+V"};En()||(ts.sampleColor="");var Tv=new Set(["toolCreateScreen","toolCreateFrame","toolCreateRounded","toolCreateText","toolCreateStack","toolNavigationLink","toolPath","toolCreateRectangleShape","toolCreateOvalShape","toolCreatePolygonShape","toolCreateStarShape","toolComment","toolZoom","sampleColor","quickActions"]),Av={duplicateTemplate:"canUseCustomTemplates"},Lv=new Set(["Delete"]),jr=class{constructor(o,t){this.onCancelledDispatch=t;qe(this,"defaultActionHandler");qe(this,"actionHandlers",{});qe(this,"menu");qe(this,"acceleratorToAction",{});qe(this,"bindings",new Bn);this.menu=Td(o,n=>{if(n.type!=="normal"||!n.action)return;let r=ts[n.action];r!==void 0&&(n.accelerator=r,n.acceleratorLabelTokens=Ia(r)),n.accelerator&&(this.acceleratorToAction[n.accelerator]=n.action);let i=Ef[n.action];i!==void 0&&(n.acceleratorLabelTokens=Ia(i))});for(let n in this.acceleratorToAction){if(Lv.has(n))continue;let r=this.acceleratorToAction[n];r&&this.bindings.set(n,i=>this.dispatch(r,i),r)}}updateActionHandlers(o){Object.assign(this.actionHandlers,o)}async dispatch(o,t={altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1}){switch(o){case"toolCreateScreen":return!1}let n=await this.getActionHandler(o),r=n.enabled&&!n.enabled(),i=n.visible&&!n.visible();return r||i?(this.onCancelledDispatch(o,{disabled:r,hidden:i}),!1):(await n.action(t),!0)}async getActionHandler(o){let t=this.actionHandlers[o];if(t)return t;let n=this.defaultActionHandler&&await this.defaultActionHandler(o);if(!n)throw Error("Could not get action handler");return n}async handleKeyboardEvent(o){if(kr())return!0;let t=this.bindings.get(o);if(!t)return!1;let{action:n,actionName:r}=t;if(o.repeat&&Tv.has(r))return o.preventDefault(),o.stopPropagation(),!0;let i=await n(o);return i&&(o.preventDefault(),o.stopPropagation()),i}async validateMenu(o){for(let t of o)if(t.type==="normal"){if(t.action){let n=await this.getActionHandler(t.action);if(n.checked){let i=n.checked();i!==void 0&&(t.checked=i)}if(n.enabled&&(t.disabled=!n.enabled()),n.label){let i=n.label();i!==void 0&&(t.label=`${i}${n.ellipsis?.()?"\u2026":""}`)}if(n.visible){let i=n.visible();i!==void 0&&(t.visible=i)}let r=Av[t.action];!t.disabled&&r&&Nn.is(r,"upsell")&&(t.badge="pro")}!t.disabled&&t.submenu&&await this.validateMenu(t.submenu)}}};function jf(e){let o=new URL(window.location.href);o.searchParams.delete("node"),Wt(o.href),e({type:"add",variant:"success",icon:"success",text:"Copied Project Link"})}function Nf(e){let o=`FramerWeb/612a550 ${navigator.userAgent}`;Wt(o),e?.({type:"add",variant:"success",icon:"success",text:"Copied Framer version: 612a550"})}function rs(e,o){let t=[];for(let n of e){let[r,i]=o(n);r!==void 0&&t.push(r),i&&i.length>0&&t.push(...rs(i,o))}return t}var lr={},Nr;function Ff(e,o){if(Nr)return Nr;let t=Dv(e,o);return Nr=t,setTimeout(()=>{t===Nr&&(Nr=null)}),t}var Vf=!1;async function Dv(e,o){if(!Vf){Vf=!0;let n=rs(e,r=>r.role?[o.validate({action:r.role}).then(()=>{}),r.submenu]:[void 0,r.submenu]);await Promise.all(n)}let{states:t}=await o.validate({action:"*"});for(let n of t)lr[n.action]=n}function _f({appMenu:e,archiveProject:o,handleNewProject:t,handleProjectDuplication:n,onPreviewToggle:r,filePickerRef:i,openAccountSettings:s,onUploadMediaFilePick:d,menuActionTargetService:l,saveTemplateAsProject:p,project:c,toast:m,unarchiveProject:g,user:v,userCanArchive:f}){let{isDarkMode:y,isOverridingSystem:h,setDarkMode:w,setOverrideSystem:P}=ro(),{analyticsStore:k,siteSettingsStore:C,pluginStore:x,selectionStore:D,popoverStore:R,scopeStore:M,chromeStore:T,modalStore:Z,publishStore:J,projectStore:V,persistedUserDefaults:re,contextMenuStore:_}=a.stores,j=!pt("canDesign"),Y=!pt("canInviteCollaborators"),ie=(0,wi.useMemo)(()=>{let z=jv(e,v.isFramerEmployee?Df():void 0,m);return z.defaultActionHandler=async X=>(l&&await Ff(e,l),{action:async()=>{l&&(window.focus(),await l.dispatch({action:X}))},checked:()=>lr[X]?.checked??!1,enabled:()=>!!lr[X]?.enabled,label:()=>lr[X]?.label,visible:()=>{let ae=lr[X];return ae&&ae.visible!==!1}}),z},[e,v.isFramerEmployee,m,l]);return(0,wi.useEffect)(()=>{let z=X=>{!_.menu&&!Aa.hotKeysDisabled()&&ie.handleKeyboardEvent(X),Ev(X)};return window.addEventListener("keydown",z,!0),()=>{window.removeEventListener("keydown",z,!0)}},[ie]),ie.updateActionHandlers({copyVersion:{action:()=>{Nf(m)}},saveTemplateAsProject:{action:()=>p(),label:()=>u.saveTemplateAsProject,enabled:()=>j,visible:()=>Zt(c)&&!c.archived&&!oo(c.space)},archiveProject:{action:()=>o(),label:()=>u.archiveProject,enabled:()=>f,visible:()=>!c.archived},unarchiveProject:{action:()=>g(),label:()=>u.unarchiveProject,enabled:()=>f,visible:()=>c.archived},newProject:{action:()=>t(),label:()=>u.newProject},copyProjectLink:{action:()=>{jf(m)},label:()=>u.copyProjectLink},duplicateProject:{action:()=>n(),label:()=>u.duplicateProject,visible:()=>!Zt(c),enabled:()=>Vn(v,c)},showPreview:{action:()=>{Dn.close().catch(q),r()},label:()=>u.showPreview,enabled:()=>!(C.isOpen||M.scopeType==="DesignPage"&&D.ids.length===0)},openPlugins:{label:()=>u.openPlugins,ellipsis:()=>!0,enabled:()=>Bf(T.mainView),action:()=>{Z.set({type:"QuickActions",initialCategory:{type:"PluginsCategory"},source:"main_menu"})}},runRecentPlugin:{label:()=>u.runRecentPlugin,enabled:()=>{let z=Uf(T.mainView);return z?!!x.getRecentPluginForMode(z):!1},action:()=>{let z=Uf(T.mainView);if(!z)return;let X=x.getRecentPluginForMode(z);X&&x.openPlugin(X,a,{mode:z}).catch(q)}},clearRecentPlugins:{label:()=>u.clearRecentPlugins,enabled:()=>x.hasRecentPlugins(),action:()=>x.clearRecentPlugins()},showPluginDeveloperTools:{label:()=>u.showPluginDeveloperTools,checked:()=>re.displayPluginDeveloperTools,action:()=>{let{displayPluginDeveloperTools:z}=re;re.displayPluginDeveloperTools=!z}},openPluginDocumentation:{label:()=>u.openPluginDocumentation,action:()=>uo("https://framer.com/developers/plugins")},openDevelopmentPlugin:{label:()=>u.openDevelopmentPlugin,enabled:()=>Bf(T.mainView),action:()=>{if(x.isLoading)return;let z=x.activePlugin;if(!z)_p(a,{type:"PluginsCategory"},void 0);else{if(!Dd(z?.manifest.entrypointUrl))return;x.closePlugin(z.manifestId)}}},goToProjects:{action:({ctrlKey:z,metaKey:X})=>{let ae=v.spaces.find(To=>c.space.id===To.id&&To.permissions.read),ve=Zt(c)?"templates":c.collection?.id||"recent",wo=c.space.scope==="organization"&&ae?`${Qt}folder/${ve}?team=${c.space.id}`:Qt;z||X?uo(wo):window.location.href=wo}},toggleAppearanceSystem:{checked:()=>!h,action:()=>{P(!1)},enabled:()=>!C.isOpen&&h},toggleAppearance:{action:()=>{w(!y)},label:()=>y?"Day Mode":"Night Mode",enabled:()=>!C.isOpen},publishSite:{action:async()=>{await pm(a),await um(a),await mm(a),await J.publish(a)},label:()=>J.publishStatus!==1?"Publish Update":u.publishSite,enabled:()=>J.canPublish(a)},openPublishedSite:{action:async()=>{let z=J.customHostname??J.defaultHostname;z&&uo(kd(a,z.hostname))},label:()=>u.openPublishedSite,enabled:()=>j&&!!J.defaultHostname&&J.defaultHostname.isPublished},inviteCollaborators:{action:()=>{R.active=1,$("ui_interaction",{page:"main-menu",id:"share-project"})},label:()=>u.inviteCollaborators,ellipsis:()=>!0,enabled:()=>T.mainView!==2&&Y},uploadImage:{action:()=>{i.current?.show(sl).then(z=>{if(!z.isFiles())return;let X=z.value[0];return d("image","menu",X)}).catch(q)},label:()=>u.uploadImage,ellipsis:()=>!0,enabled:()=>j&&!C.isOpen},uploadVideo:{action:()=>{i.current?.show(cl).then(z=>{if(!z.isFiles())return;let X=z.value[0];return d("video","menu",X)}).catch(q)},label:()=>u.uploadVideo,ellipsis:()=>!0,enabled:()=>j&&!C.isOpen},openAccountSettings:{action:()=>{s()}},openAnalytics:{enabled:()=>T.mainView!==6,action:()=>{$("ui_interaction",{id:"open-analytics",page:"main-menu"}),k.open()}},openSiteSettings:{enabled:()=>!C.isOpen,action:()=>C.open()},openGeneralSettings:{enabled:()=>T.mainView!==4||C.active?.tab!=="project",action:()=>C.setActiveTab({tab:"project"})},openDomainSettings:{enabled:()=>T.mainView!==4||C.active?.tab!=="domains",action:()=>C.setActiveTab({tab:"domains"})},openRedirects:{enabled:()=>T.mainView!==4||C.active?.tab!=="redirects",action:()=>C.setActiveTab({tab:"redirects"})},openForms:{enabled:()=>T.mainView!==4||C.active?.tab!=="forms",action:()=>C.setActiveTab({tab:"forms"})},openVersions:{enabled:()=>T.mainView!==4||C.active?.tab!=="versions",action:()=>C.setActiveTab({tab:"versions"})},openPlans:{enabled:()=>T.mainView!==4||C.active?.tab!=="plans",action:()=>C.setActiveTab({tab:"plans"})},copyRemixLink:{label:()=>u.copyRemixLink,action:()=>Jm({project:V.project,canCopyRemixLink:V.project?.publicAccess!=="none"||!!v.isFramerEmployee,user:v,projectId:V.projectId})},transferProject:{label:()=>u.transferProject,visible:()=>$e.isOn("projectTransfer")&&v.id===c.owner.id,action:()=>{a.stores.modalStore.set({type:"TransferProject",userEmail:v.email,source:"main_menu"})}},toggleBetaChannel:{visible:()=>V.featureFlags?.canUseBetaChannel==="on",checked:()=>V.project?.releaseChannel==="beta",action:()=>{let z=V.project?.releaseChannel==="beta"?null:"beta";At(z).catch(q)}},contactSupport:{visible:()=>od(V.projectLicenseType),action:Ym({userId:v.id,userEmail:v.email,userIntercomHash:v.intercomUserHash,projectLicenseType:V.projectLicenseType})}}),Aa.updateActionManager(ie),ie}function Ev(e){!En()&&e.key==="Alt"&&e.preventDefault()}function jv(e,o,t){let{chromeStore:n}=a.stores,r=i=>{ld(a,"canDesign")||n.mainView===0&&(n.isPreviewingLocaleOnCanvas||nd(i)&&id(i,t))};if(o){let[i,s]=o,d=Lf("Preferences",i,e),l=new jr(d,r);return l.updateActionHandlers(s),l}else return new jr(e,r)}var Nv=new Set([0,2,1,5]),Bf=e=>Nv.has(e),Vv={0:"canvas",2:"collection",1:"code"},Uf=e=>Vv[e];var Hf=b(B());function qf({toast:e,userNotifications:o,isFeedbackActive:t}){let[n,r]=Fn("has-seen-notifications-toast",!1);(0,Hf.useEffect)(()=>{if(!t||n)return;async function i(){(await o.getPermissionStatus()).status==="notDetermined"&&(e({type:"add",variant:"info",key:"notifications-opt-in-toast",text:"Stay up to date with browser notifications",action:{title:"Continue",onClick:()=>o.requestPermission()},icon:"notifications",duration:1e4,showCloseButton:"never"}),r(!0))}i()},[e,o,t,n,r])}var Wf=b(B());function Fv(e,o){let t={variant:"success",text:"You are now subscribed to updates",action:{title:"Unsubscribe",onClick:r},icon:"success",key:"feedback-updates-subbed-toast",duration:5e3,showCloseButton:"never"},n={variant:"success",text:"You have unsubscribed from updates",icon:"success",action:{title:"Subscribe",onClick:i},key:"feedback-updates-unsubbed-toast",duration:5e3,showCloseButton:"never"};async function r(){e({type:"remove",key:t.key}),await o("unsubscribe"),e({type:"add",...n})}async function i(){e({type:"remove",key:n.key}),await o("subscribe"),e({type:"add",...t})}return{subbedToast:t,unsubbedToast:n}}function $f({toast:e,isDocumentLoaded:o,action:t}){(0,Wf.useEffect)(()=>{let n=new URLSearchParams(window.location.search);if(o&&n.get("unsubscribed")==="true"){let{unsubbedToast:r}=Fv(e,t);e({type:"add",...r});let i=new URL(window.location.href);i.searchParams.delete("unsubscribed"),window.history.replaceState({},document.title,i.href)}},[e,o,t])}var Gf=b(B());function Yf({channel:e}){return(0,Gf.useMemo)(()=>e?oc.on(e).expect():null,[e])}var Ci=b(B());function Zf(e){switch(e){case"granted":return{status:"granted"};case"denied":return{status:"denied"};case"default":default:return{status:"notDetermined"}}}var xi=class{constructor(){qe(this,"activeNotifications",new Map)}async requestPermission(){return window.Notification?new Promise(o=>{let t=r=>o(Zf(r)),n=window.Notification.requestPermission(t);n&&n.then(t).catch(q)}):{status:"denied"}}async getPermissionStatus(){return window.Notification?Zf(window.Notification.permission):{status:"denied"}}async post(o){return new Promise(t=>{if(!window.Notification)return t({type:"cancel",reason:"unsupported"});if(o.notification.show==="backgrounded"&&!document.hidden)return t({type:"cancel",reason:"suppressed"});let n=new window.Notification(o.notification.title,{tag:o.notification.id,body:o.notification.body});this.activeNotifications.set(o.notification.id,n),n.onclick=()=>{window.focus(),t({type:"action"}),n.close()},n.onclose=()=>{this.activeNotifications.delete(o.notification.id),t({type:"cancel",reason:"dismissed"})}})}async cancel(o){if(!window.Notification)return;let t=this.activeNotifications.get(o.notificationId);t&&t.close()}};function Qf({channel:e}){let o=(0,Ci.useMemo)(()=>new xi,[]);return(0,Ci.useEffect)(()=>{if(e)return Xs.on(e).register(o)},[e,o]),o}var Xi=b(B());var ki=b(B());var Kf="moveDraft_m1cpkqs3",Xf="moveDraftTitle_m1nbloso",Jf="buttons_bb1mirm",eg="moveDraftDescription_mo8n8ae",og="moveDraftButton_mr6y2w0",tg="confirmMoveDraftButton_c10bqkjb",rg="buttonChevron_bd7crx9";var _e=b(S());function ng({user:e,projectState:o,onShowMoveProjectMenu:t,onConfirmMoveProject:n,moveProjectDestination:r}){let{project:i}=o,s=ki.default.useRef(null),d=ki.default.useMemo(()=>Mn(i,e.id),[i,e.id]);function l(){if(s.current===null)return;let c=s.current.getBoundingClientRect();t({location:{x:c.left,y:c.bottom},skipConfirmation:!0})}let p=ki.default.useCallback(async()=>{$("ui_interaction",{page:"invite-panel",id:"move-to-teams"}),await n()},[n]);return(0,_e.jsxs)(N,{padding:30,gap:15,alignItems:"center",justifyContent:"center",className:Kf,children:[(0,_e.jsx)("div",{className:Xf,children:"Invite Collaborators"}),(0,_e.jsxs)("div",{className:eg,children:[(0,_e.jsx)(G,{children:"Move your projects to a team"}),(0,_e.jsx)("br",{}),(0,_e.jsx)(G,{children:"to add more collaborators."})]}),(0,_e.jsxs)(N,{className:Jf,direction:"row",gap:10,children:[(0,_e.jsxs)(ue,{className:og,onClick:l,ref:s,children:[(0,_e.jsx)("div",{className:Ee,children:r||d}),(0,_e.jsx)("div",{className:rg,children:(0,_e.jsx)(ko,{})})]}),(0,_e.jsx)(ue,{onClick:p,large:!0,className:tg,variant:"primary",enabled:!!r&&r!==d,children:(0,_e.jsx)(G,{children:"Move"})})]})]})}var Pi=b(S());function ig(e,o){let t=e.stores.projectStore.project;if(L(t,"Project should exist when upselling editor limit"),t.license.type==="enterpriseSite")return e.stores.modalStore.set({type:"Confirmation",source:o,title:"Add More Editors",description:"This invite exceeds your editor limit. Contact us to increase the number of editors on your plan.",confirmLabel:"Contact Us",cancelLabel:"Dismiss",onConfirm:()=>{$("ui_interaction",{page:"enterprise-editor-limit-upsell",id:"contact-us"}),uo(Hd)}});if(yd(t.license.type))return e.stores.modalStore.set({type:"UpsellEnterprise",source:o,description:"Sign up for an Enterprise plan to add more editors and unlock powerful features that help scale your site.",upsell:"enterprise-editor-limit-upsell",upsellFeatures:["Advanced Permissions","Custom Limits","Custom Hosting","Custom Proxy Support","Enterprise Security","Dedicated Support"]});let n=t.settings.resourceLimits.maxEditors;L(typeof n=="number","Expect the editor limit to be a number");let r=n===1?"1 editor":n.toLocaleString()+" editors",i=`${In}?teamId=${t.space.ownerId}&open-settings=1&settings-tab=membersList`,s=(0,Pi.jsxs)("div",{children:["You\u2019ve reached the limit of ",r," in your workspace. Upgrade your site to invite more editors, or"," ",(0,Pi.jsx)(yn,{className:Gp,href:i,children:"remove an existing editor"})," ","from your workspace."]});return e.stores.modalStore.set({type:"UpsellFeature",source:o,title:"Editor Limit",upsellFeature:"canInviteEditors",description:s})}var Ko=b(B());function ag(e,o){let t=[...e],n=t.findIndex(({user:r})=>r.id===o);return t.splice(n,1),t}function Hv(e,o,t){let n=[...e],r=n.findIndex(({user:s})=>s.id===o),i=n[r];return i?(n.splice(r,1,{...i,success:t}),n):e}function qv(e,o){switch(o.type){case"addEntry":return{...e,invitedUsers:[o.entry,...e.invitedUsers]};case"resolveEntry":return{...e,invitedUsers:ag(e.invitedUsers,o.id),inviteMap:{...e.inviteMap,[o.resourceId]:o.id}};case"removeEntry":return{...e,invitedUsers:ag(e.invitedUsers,o.id)};case"updateInviteStatus":return{...e,invitedUsers:Hv(e.invitedUsers,o.id,o.status)};default:ne(o)}}function sg(e){let[o,t]=(0,Ko.useReducer)(qv,{invitedUsers:[],inviteMap:{}}),{inviteMap:n,invitedUsers:r}=o,i=(0,Ko.useRef)([]),s=(0,Ko.useCallback)(l=>!(l.user.id in n&&r.some(p=>p.user.id===l.user.id)),[n,r]),d=(0,Ko.useCallback)(l=>{let p=n[l.user.id];return p||l.user.id},[n]);return i.current=(0,Ko.useMemo)(()=>r.length>0?i.current:e.filter(s),[e,r,s]),{acl:i.current,invitedUsers:r,dispatchInvites:t,getStableEntryKey:d}}var qo=b(B());var Fe=b(B());var as=function(){return as=Object.assign||function(e){for(var o,t=1,n=arguments.length;t<n;t++)for(var r in o=arguments[t])Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);return e},as.apply(this,arguments)};var ss,Wv=function(e){var o;e?function(t){if(t)for(;t.lastChild;)t.lastChild.remove()}(typeof e=="string"?document.getElementById(e):e):(o=document.querySelector(".grecaptcha-badge"))&&o.parentNode&&document.body.removeChild(o.parentNode)},$v=function(e,o){Wv(o),window.___grecaptcha_cfg=void 0;var t=document.querySelector("#"+e);t&&t.remove(),function(){var n=document.querySelector('script[src^="https://www.gstatic.com/recaptcha/releases"]');n&&n.remove()}()},Gv=function(e){var o=e.render,t=e.onLoadCallbackName,n=e.language,r=e.onLoad,i=e.useRecaptchaNet,s=e.useEnterprise,d=e.scriptProps,l=d===void 0?{}:d,p=l.nonce,c=p===void 0?"":p,m=l.defer,g=m!==void 0&&m,v=l.async,f=v!==void 0&&v,y=l.id,h=y===void 0?"":y,w=l.appendTo,P=h||"google-recaptcha-v3";if(function(x){return!!document.querySelector("#"+x)}(P))r();else{var k=function(x){return"https://www."+(x.useRecaptchaNet?"recaptcha.net":"google.com")+"/recaptcha/"+(x.useEnterprise?"enterprise.js":"api.js")}({useEnterprise:s,useRecaptchaNet:i}),C=document.createElement("script");C.id=P,C.src=k+"?render="+o+(o==="explicit"?"&onload="+t:"")+(n?"&hl="+n:""),c&&(C.nonce=c),C.defer=!!g,C.async=!!f,C.onload=r,(w==="body"?document.body:document.getElementsByTagName("head")[0]).appendChild(C)}},is=function(e){typeof process<"u"&&process.env&&!1||console.warn(e)};(function(e){e.SCRIPT_NOT_AVAILABLE="Recaptcha script is not available"})(ss||(ss={}));var ps=(0,Fe.createContext)({executeRecaptcha:function(){throw Error("GoogleReCaptcha Context has not yet been implemented, if you are using useGoogleReCaptcha hook, make sure the hook is called inside component wrapped by GoogleRecaptchaProvider")}}),lL=ps.Consumer;function pg(e){var o=e.reCaptchaKey,t=e.useEnterprise,n=t!==void 0&&t,r=e.useRecaptchaNet,i=r!==void 0&&r,s=e.scriptProps,d=e.language,l=e.container,p=e.children,c=(0,Fe.useState)(null),m=c[0],g=c[1],v=(0,Fe.useRef)(o),f=JSON.stringify(s),y=JSON.stringify(l?.parameters);(0,Fe.useEffect)(function(){if(o){var P=s?.id||"google-recaptcha-v3",k=s?.onLoadCallbackName||"onRecaptchaLoadCallback";return window[k]=function(){var C=n?window.grecaptcha.enterprise:window.grecaptcha,x=as({badge:"inline",size:"invisible",sitekey:o},l?.parameters||{});v.current=C.render(l?.element,x)},Gv({render:l?.element?"explicit":o,onLoadCallbackName:k,useEnterprise:n,useRecaptchaNet:i,scriptProps:s,language:d,onLoad:function(){if(window&&window.grecaptcha){var C=n?window.grecaptcha.enterprise:window.grecaptcha;C.ready(function(){g(C)})}else is("<GoogleRecaptchaProvider /> "+ss.SCRIPT_NOT_AVAILABLE)},onError:function(){is("Error loading google recaptcha script")}}),function(){$v(P,l?.element)}}is("<GoogleReCaptchaProvider /> recaptcha key not provided")},[n,i,f,y,d,o,l?.element]);var h=(0,Fe.useCallback)(function(P){if(!m||!m.execute)throw new Error("<GoogleReCaptchaProvider /> Google Recaptcha has not been loaded");return m.execute(v.current,{action:P})},[m,v]),w=(0,Fe.useMemo)(function(){return{executeRecaptcha:m?h:void 0,container:l?.element}},[h,m,l?.element]);return Fe.default.createElement(ps.Provider,{value:w},p)}var mg=function(){return(0,Fe.useContext)(ps)};function ug(e,o){return e(o={exports:{}},o.exports),o.exports;}var Te=typeof Symbol=="function"&&Symbol.for,cs=Te?Symbol.for("react.element"):60103,ls=Te?Symbol.for("react.portal"):60106,Si=Te?Symbol.for("react.fragment"):60107,Ii=Te?Symbol.for("react.strict_mode"):60108,Mi=Te?Symbol.for("react.profiler"):60114,Ri=Te?Symbol.for("react.provider"):60109,Ti=Te?Symbol.for("react.context"):60110,ds=Te?Symbol.for("react.async_mode"):60111,ji=Te?Symbol.for("react.concurrent_mode"):60111,Ai=Te?Symbol.for("react.forward_ref"):60112,Li=Te?Symbol.for("react.suspense"):60113,Yv=Te?Symbol.for("react.suspense_list"):60120,Di=Te?Symbol.for("react.memo"):60115,Ei=Te?Symbol.for("react.lazy"):60116,Zv=Te?Symbol.for("react.block"):60121,Qv=Te?Symbol.for("react.fundamental"):60117,Kv=Te?Symbol.for("react.responder"):60118,Xv=Te?Symbol.for("react.scope"):60119;function io(e){if(typeof e=="object"&&e!==null){var o=e.$$typeof;switch(o){case cs:switch(e=e.type){case ds:case ji:case Si:case Mi:case Ii:case Li:return e;default:switch(e=e&&e.$$typeof){case Ti:case Ai:case Ei:case Di:case Ri:return e;default:return o}}case ls:return o}}}function cg(e){return io(e)===ji}var Jv={AsyncMode:ds,ConcurrentMode:ji,ContextConsumer:Ti,ContextProvider:Ri,Element:cs,ForwardRef:Ai,Fragment:Si,Lazy:Ei,Memo:Di,Portal:ls,Profiler:Mi,StrictMode:Ii,Suspense:Li,isAsyncMode:function(e){return cg(e)||io(e)===ds},isConcurrentMode:cg,isContextConsumer:function(e){return io(e)===Ti},isContextProvider:function(e){return io(e)===Ri},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===cs},isForwardRef:function(e){return io(e)===Ai},isFragment:function(e){return io(e)===Si},isLazy:function(e){return io(e)===Ei},isMemo:function(e){return io(e)===Di},isPortal:function(e){return io(e)===ls},isProfiler:function(e){return io(e)===Mi},isStrictMode:function(e){return io(e)===Ii},isSuspense:function(e){return io(e)===Li},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===Si||e===ji||e===Mi||e===Ii||e===Li||e===Yv||typeof e=="object"&&e!==null&&(e.$$typeof===Ei||e.$$typeof===Di||e.$$typeof===Ri||e.$$typeof===Ti||e.$$typeof===Ai||e.$$typeof===Qv||e.$$typeof===Kv||e.$$typeof===Xv||e.$$typeof===Zv)},typeOf:io},le=ug(function(e,o){}),lg=(le.AsyncMode,le.ConcurrentMode,le.ContextConsumer,le.ContextProvider,le.Element,le.ForwardRef,le.Fragment,le.Lazy,le.Memo,le.Portal,le.Profiler,le.StrictMode,le.Suspense,le.isAsyncMode,le.isConcurrentMode,le.isContextConsumer,le.isContextProvider,le.isElement,le.isForwardRef,le.isFragment,le.isLazy,le.isMemo,le.isPortal,le.isProfiler,le.isStrictMode,le.isSuspense,le.isValidElementType,le.typeOf,ug(function(e){e.exports=Jv}));var ey={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},dg={};dg[lg.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},dg[lg.Memo]=ey;var dL=Object.prototype;var fg=et("useReCaptcha");function Ni(){let{executeRecaptcha:e}=mg();return{generateToken:async t=>{if(!e){fg.error("Recaptcha is not initialized");return}try{return await e(t)}catch(n){fg.error(`Cannot generate token for ${t}`,n)}}}}var Vi=15,Fi=20,Lt=2,gg="main_mtjdnlw",Dt="buttons_b16j3fv2",hg="header_h7bdi9s",bg="sectionHeader_s12h9rvh",vg="separator_sql7wjp",ms="separatorWithPadding_s1gaa8io",us="isDisabled_ibeu8mf",yg="inputGrid_imryu2",ft="sidePadding_s1kcrkj9",wg="users_unllbx4",xg="roleSelect_r1a07q4t",Et="userInfoName_u1wvxecz",jt="userInfoDetail_u1axfeak",Bi="userInfoDetailText_ugv3bsa",Cg="userInfoStatus_u5ox40e",kg="domains_den2nnp",Pg="errorMessage_emichmx",Sg="warningMessage_wld01wx",Nt="avatarGrid_aiyskyy",Vt="editableRole_ehwjfgd",fs="updating_u128a741",Ui="badgeFramerEmployeeWrapper_b1azfp4q",Ig="badgeFramerPartnerWrapper_bvvl9i5",Mg="badgeViewerWrapper_b1wgfjgu",Rg="shareLinkIcon_sg3586s";var bs=b(B());var Vg=b(B());var Tg="menu_m9ssw07",Ag="childrenMenuOpened_c339xbv",gs="menuRow_mi76gje",Lg="checkboxLabel_c18g668b",Dg="checkboxDescription_c1h61czf",hs="checkboxDisabled_c14eoty2",Eg="clickable_c1o21d5e",jg="separator_s1gxnekh",Ng="directionRightIconWrapper_dlw4814";var vo=b(S());function gt({anchor:e,attachTo:o="bottom",backdropEnabled:t=!0,children:n,matchParentWidth:r,onClose:i,open:s,offset:d,alignSelf:l}){return s?(0,vo.jsx)(xr,{focusTrapEnabled:!1,backdropEnabled:t,className:Tg,anchor:e.current,alignSelf:l,style:r?{width:e.current?.clientWidth}:{},attachTo:o,offset:d,showArrow:!1,onClose:i,children:n}):null}var be=Vg.default.forwardRef(function({menuItem:o,closeMenu:t,onPointerOver:n,onPointerEnter:r,showChevron:i=!1,isChildrenMenuOpened:s=!1},d){let{type:l,visible:p}=o;if(p===!1)return null;switch(l){case"checkbox":return(0,vo.jsxs)(N,{ref:d,onPointerOver:n,onPointerEnter:r,gap:10,direction:"row",alignItems:"center",className:K(gs),children:[(0,vo.jsx)(wr,{id:o.actionId,value:o.checked,onChange:()=>o.action(o.actionId),enabled:!o.disabled}),(0,vo.jsxs)("label",{htmlFor:o.actionId,className:K(Lg,o.disabled&&hs),children:[o.label,o.description&&(0,vo.jsxs)("span",{className:K(Dg,o.disabled&&hs),children:[" ","\xB7 ",o.description]})]})]});case"option":return(0,vo.jsxs)(N,{ref:d,onPointerOver:n,onPointerEnter:r,direction:"row",alignItems:"center",justifyContent:"space-between",onClick:()=>{o.action(),t?.()},className:K(gs,Eg,s&&Ag),children:[o.label,o.badge&&(0,vo.jsx)(gn,{className:"badge",variant:"componentTintDimmed",children:o.badge}),i&&(0,vo.jsx)("span",{className:Ng,children:(0,vo.jsx)(Pl,{})})]});case"separator":return(0,vo.jsx)("div",{ref:d,onPointerOver:n,onPointerEnter:r,className:jg});default:ne(l,"All menu items should get rendered")}});async function Fg(e){let{popoverStore:o,siteSettingsStore:t}=e.stores;return o.active=0,t.setActiveTab({tab:"plans",upsellFeature:"canUseEditorPermissions"}).catch(q)}var pr=b(S());function Oi({anchorRef:e,open:o,onClose:t,permissionsMenuList:n}){let{updatePurchaseOrigin:r}=jp(),{project:i}=a.stores.projectStore.useState();return(0,pr.jsxs)(gt,{anchor:e,open:o,onClose:t,attachTo:"left",backdropEnabled:!1,offset:{x:10,y:0},alignSelf:"start",children:[n.map((s,d)=>(0,pr.jsx)(be,{menuItem:s},d)),(0,pr.jsx)(be,{menuItem:{type:"separator"}}),(0,pr.jsx)(be,{menuItem:{type:"option",label:"Upgrade",badge:"Launch",action:()=>{i&&r("project-permissions-upsell",{projectId:i.id,site:i.license.type,team:i.teamLicenseType},null),Fg(a)}}})]})}var He=b(S());function Bg({invitePermissions:e,setInvitePermissions:o,closeMenu:t,roleMenuAnchorRef:n}){let[r,i]=bs.default.useState(!1),s=lt("canUseEditorPermissions"),d=$e.isOn("contentEditor"),l=rr(),p=bs.default.useRef(null),{permissions:c}=e,m=!s,g=!s,v=h=>{o(w=>{let P=Cn(w.permissions[h]),k={...w.permissions,[h]:P};return{role:Object.entries(k).filter(([R,M])=>M==="on").map(([R,M])=>R).length===0?"viewer":"collaborator",permissions:k}})},f=h=>{o(()=>{let w;switch(h){case"owner":case"collaborator":case"prototypeViewer":w=Yt;break;case"contentCollaborator":w=d?Pn:Yt;break;case"viewer":w=It;break;default:ne(h)}return{role:h,permissions:w}}),t()},y=kn.map(h=>{let{label:w,description:P}=Sn(h);return{type:"checkbox",label:w,description:P,actionId:h,action:v,checked:c[h]==="on",disabled:m||l[h]==="off"}});return(0,He.jsx)(gt,{open:!0,anchor:n,onClose:t,matchParentWidth:!0,alignSelf:"start",offset:{x:0,y:5},children:g?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(be,{menuItem:{type:"option",label:"Full Access",action:()=>f("collaborator")},closeMenu:t,onPointerOver:()=>i(!1)}),(0,He.jsx)(be,{menuItem:{type:"option",label:"View Only",action:()=>f("viewer")},closeMenu:t,onPointerOver:()=>i(!1)}),d&&(0,He.jsx)(be,{menuItem:{type:"option",label:"Content Collaborator",action:()=>f("contentCollaborator")},closeMenu:t,onPointerOver:()=>i(!1)}),(0,He.jsx)(be,{ref:p,menuItem:{type:"separator"},closeMenu:t}),(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(be,{menuItem:{type:"option",label:"Permissions",action:()=>null},isChildrenMenuOpened:r,onPointerOver:()=>i(!0),closeMenu:t,showChevron:!0}),(0,He.jsx)(Oi,{anchorRef:p,open:r,onClose:()=>i(!1),permissionsMenuList:y})]})]}):y.map((h,w)=>(0,He.jsx)(be,{menuItem:h},w))})}var Pe=b(S());function Ug({isViewOnly:e,projectState:o,handleTeamUpgrade:t,pendingEntries:n,invitedUsers:r,dispatchInvites:i,currentUserPermissions:s}){let{project:d}=o,{settings:l}=d,{generateToken:p}=Ni(),c=Uo(),m=lc(),g=(0,qo.useRef)(0),[v,f]=(0,qo.useState)(!1),[y,h]=(0,qo.useState)(""),[w,P]=(0,qo.useState)({role:"collaborator",permissions:s}),[k,C]=(0,qo.useState)(!1),{role:x,permissions:D}=w,R=l.featureFlags.canInviteAnyDomain==="off",M=qo.default.useRef(null);async function T(V){if(!c)return;V.preventDefault();let re=y.toLowerCase().trim();if(Ep(re)&&!r.find(({user:_})=>_.name===re)&&!n.find(({user:_})=>_.name===re)){let[,_]=re.split("@");if(_&&R&&l.allowedDomains.length>0&&!l.allowedDomains.includes(_)){f(!0);return}let j=`${g.current++}`;i({type:"addEntry",entry:{kind:"invite",user:{id:j,name:re,initials:""},role:x,permissions:D,pending:!0,color:null,lastOpenedAt:null,success:null,email:re}}),h("");let Y=await c.inviteByEmail({email:re,role:x,permissions:D,token:await p("invite_user")});switch(Y.status){case 0:return i({type:"resolveEntry",id:j,resourceId:Y.aclEntry.user.id});case 2:return i({type:"updateInviteStatus",id:j,status:!1});case 1:return t(),i({type:"removeEntry",id:j});case 3:return i({type:"removeEntry",id:j});default:ne(Y)}}else m.start({x:0,transition:{type:"spring",velocity:600,stiffness:5e3,damping:20}}).catch(q)}function Z(V){v&&f(!1),h(V)}let J=qo.default.useRef(null);return(0,Pe.jsx)("div",{className:ft,children:(0,Pe.jsxs)("form",{className:yg,onSubmit:T,children:[(0,Pe.jsxs)(po.div,{animate:m,style:{originY:.9},children:[(0,Pe.jsxs)(zl,{ref:M,hasError:v,large:!0,children:[(0,Pe.jsx)(ql,{autoFocus:!0,type:"email",name:"email",placeholder:"name@email.com",value:y,onChange:Z,constantChange:!0,enabled:!e,ref:J,className:K(e&&us),"data-1p-ignore":!0}),(0,Pe.jsxs)(ue,{variant:"link",enabled:!e,onClick:()=>C(!0),className:K(xg,e&&us),children:[Cr(D,x),(0,Pe.jsx)(ko,{})]}),k?(0,Pe.jsx)(Bg,{closeMenu:()=>C(!1),invitePermissions:w,setInvitePermissions:P,roleMenuAnchorRef:M}):null]}),(0,Pe.jsx)(Ca,{className:Sg,visible:xd(y),children:(0,Pe.jsx)(G,{children:"You won\u2019t be billed for any invited Framer employees."})}),(0,Pe.jsx)(Ca,{className:Pg,visible:v,children:l.allowedDomains.length>2?(0,Pe.jsx)(G,{children:"The email domain you entered is not allowed"}):(0,Pe.jsxs)(Pe.Fragment,{children:[(0,Pe.jsx)(G,{children:"Only"}),(0,Pe.jsxs)("span",{className:kg,children:[" ",l.allowedDomains.map(V=>`@${V}`).join(", ")," "]}),(0,Pe.jsx)(G,{children:"emails are allowed"})]})})]}),(0,Pe.jsx)(ue,{enabled:!e,className:Dt,large:!0,title:"Send",type:"submit",variant:"primary",onClick:ct})]})})}var Me=b(B());function zg(e,o){A({key:`deny-${e.id}-project-access-failed`,type:"add",variant:"error",text:o===2?"This request has already been reviewed by someone else in your workspace.":`Failed to deny ${e.name} access to this project`,icon:"error",duration:3e3})}function _g(e,o){A({key:`grant-${e.id}-project-access-failed`,type:"add",variant:"error",text:o===2?"This request has already been reviewed by someone else in your workspace.":`Failed to add ${e.name} as an editor to this project.`,icon:"error",duration:3e3})}var vs=b(S());function Hg({anchorRef:e,open:o,onClose:t,isGrantingOrDenyingAccess:n,setIsGrantingOrDenyingAccess:r,id:i,user:s}){let d=Uo();async function l(){if(!d||n)return;$("ui_interaction",{id:"deny-access",page:"invite-panel"}),r(!0);let c=await d.denyProjectAccessRequest({id:i});switch(c.status){case 0:return;case 2:case 3:return zg(s,c.status),r(!1);default:ne(c)}}return(0,vs.jsx)(gt,{anchor:e,open:o,onClose:t,alignSelf:"center",offset:{x:10,y:0},children:(0,vs.jsx)(be,{menuItem:{type:"option",label:"Decline",action:l},closeMenu:t})})}var ys=b(B());function qg(e,o,{ownerName:t,ownerId:n}){let{popoverStore:r,projectStore:i,modalStore:s}=e.stores,{project:d}=i;L(d,"Project should exist when moving project owner");let l=d.space.ownerId,p=async()=>{await Kt.put(`/web/projects/${d.id}/owner`,{ownerId:n})},c=async()=>{await o?.pollProject({intervalMillis:3e3,attempts:10,stopCondition:g=>g.owner.id===n}),await o?.forceRefreshACL()},m=()=>{r.active=1};r.active=0,s.set({type:"Confirmation",source:"invite_panel",title:"Transfer Ownership",description:`To transfer ownership, ${t} must be an admin or editor in your workspace.`,confirmLabel:"Confirm",onConfirm:async()=>{try{await p(),await c()}catch(g){g.status===409?iy({teamId:l,ownerName:t}):ay()}finally{m()}},onCancel:()=>m(),onDismiss:()=>m(),variant:"destructive"})}var Wg="move-project-owner";function iy({teamId:e,ownerName:o}){A({key:Wg,type:"add",variant:"error",text:`${o} must be an editor or admin in your workspace.`,icon:"error",duration:5e3,action:{title:"Manage Workspace",onClick:()=>uo(`${In}?teamId=${e}&open-settings=1&settings-tab=membersList`)}})}function ay(){A({key:Wg,type:"add",variant:"error",text:"We\u2019re unable to move ownership. Please contact support.",icon:"error",duration:3e3,action:{title:"Contact Support",onClick:()=>uo(qd)}})}var Be=b(S());function $g({anchorRef:e,open:o,onClose:t,permissions:n,pending:r,user:i,handleTeamUpgrade:s,role:d,project:l,currentUserIsTeamAdmin:p,currentUserIsProjectOwner:c,setIsRemovingUser:m,optimisticPermissions:g,setOptimisticPermissions:v}){let[f,y]=ys.default.useState(!1),h=ys.default.useRef(null),P=g||(n||It),k=Uo(),C=rr(),x=d==="viewer",D=i.id===l.owner.id,R=a.sessionStore.useState(ye=>ye.user.id),M=i.id===R,T=p||c,Z=!r&&!x&&!M,J=lt("canUseEditorPermissions"),V=$e.isOn("contentEditor"),re=T&&!D&&!r,_=!D&&!M,j=!J,Y=async()=>{qg(a,k,{ownerName:i.name,ownerId:i.id})},ie=()=>{m(!0),r?k?.removeInvite({id:i.id}).catch(()=>m(!1)):k?.removeUserPermissions({id:i.id}).catch(()=>m(!1))},z=async ye=>{if(!k)return;v(ye.permissions);let Le=await k.updateUserPermissions(ye);switch(Le.status){case 0:return;case 1:return s(),v(null);case 2:return v(null);default:ne(Le)}},X=()=>{z({id:i.id,role:"collaborator",permissions:Yt})},ae=()=>{let ye=V?"contentCollaborator":"collaborator",Le=V?Pn:Yt;z({id:i.id,role:ye,permissions:Le})},ve=()=>{z({id:i.id,role:"viewer",permissions:It})},wo=async ye=>{let Le=Cn(P[ye]),Ao={...P,[ye]:Le};await z({id:i.id,role:"collaborator",permissions:Ao})},To=kn.map(ye=>{let{label:Le,description:Ao}=Sn(ye);return{type:"checkbox",label:Le,description:Ao,actionId:ye,action:wo,checked:P?P[ye]==="on":!1,visible:Z,disabled:j||C[ye]==="off"}});return(0,Be.jsxs)(gt,{anchor:e,open:o,onClose:t,alignSelf:"start",offset:{x:0,y:5},children:[J?To.map((ye,Le)=>(0,Be.jsx)(be,{menuItem:ye,closeMenu:t,onPointerOver:()=>y(!1)},Le)):(0,Be.jsxs)(Be.Fragment,{children:[(0,Be.jsx)(be,{menuItem:{type:"option",label:"Full Access",action:X},closeMenu:t,onPointerOver:()=>y(!1)}),V&&(0,Be.jsx)(be,{menuItem:{type:"option",label:"Content Collaborator",action:ae},closeMenu:t,onPointerOver:()=>y(!1)}),(0,Be.jsx)(be,{menuItem:{type:"option",label:"View Only",action:ve},closeMenu:t,onPointerOver:()=>y(!1)}),(0,Be.jsx)(be,{ref:h,menuItem:{type:"separator"}}),(0,Be.jsx)(be,{menuItem:{type:"option",label:"Permissions",action:()=>null},onPointerEnter:()=>y(!0),isChildrenMenuOpened:f,showChevron:!0})]}),(0,Be.jsx)(be,{menuItem:{type:"separator",visible:Z&&(_||j)},closeMenu:t,onPointerOver:()=>y(!1)}),(0,Be.jsx)(be,{menuItem:{type:"option",label:"Make Project Owner",action:Y,visible:re},closeMenu:t,onPointerOver:()=>y(!1)}),(0,Be.jsx)(be,{menuItem:{type:"option",label:"Remove",action:ie,visible:_},closeMenu:t,onPointerOver:()=>y(!1)}),(0,Be.jsx)(Oi,{anchorRef:h,open:f,onClose:()=>y(!1),permissionsMenuList:To})]})}var F=b(S());function Zg({isViewOnly:e,projectState:o,handleTeamUpgrade:t,currentUserEntry:n,invitedUsers:r,activeEntries:i,inactiveEntries:s,pendingEntries:d,accessRequestEntries:l,dispatchInvites:p,currentUserPermissions:c,currentUserIsTeamAdmin:m,currentUserIsProjectOwner:g,getStableEntryKey:v}){let f=Uo(),{generateToken:y}=Ni(),h=(0,Me.useMemo)(()=>l.map(x=>({entry:x,ordering:""})).sort(ws),[l]),[w,P]=cy(n,r,i,s,d);async function k(x){if(!f)return;p({type:"updateInviteStatus",id:x,status:null});let D=r.find(({user:M})=>M.id===x);if(!D)return;let R=await f.inviteByEmail({email:D.email,role:D.role,permissions:D.permissions,token:await y("invite_user")});switch(R.status){case 0:return p({type:"resolveEntry",id:x,resourceId:R.aclEntry.user.id});case 2:return p({type:"updateInviteStatus",id:x,status:!1});case 1:return t(),p({type:"removeEntry",id:x});case 3:return p({type:"removeEntry",id:x});default:ne(R)}}let C=[{key:"0",title:"Requesting Access",rows:h},{key:"1",title:void 0,rows:w},{key:"2",title:void 0,rows:P}].filter(({rows:x})=>x.length>0);return(0,F.jsx)(Xr,{initial:!1,children:(0,F.jsx)(N,{gap:Vi,direction:"column",className:ft,children:C.map(({key:x,rows:D,title:R},M)=>(0,F.jsxs)(Me.default.Fragment,{children:[M>0&&(0,F.jsx)("div",{className:vg}),R&&(0,F.jsx)("div",{className:bg,children:(0,F.jsx)(G,{children:R})}),(0,F.jsx)(N,{gap:Fi,direction:"column",children:D.map(({entry:T,inactive:Z})=>T.kind==="accessRequest"?(0,F.jsx)(dy,{handleTeamUpgrade:t,indicateFramerEmployee:!!T.user.isFramerEmployee&&!n?.user.isFramerEmployee,entry:T},T.id):(0,F.jsx)(ly,{projectState:o,indicateFramerEmployee:!!T.user.isFramerEmployee&&!n?.user.isFramerEmployee,isViewOnly:e,entry:T,handleRetry:k,handleTeamUpgrade:t,inactive:Z,currentUserPermissions:c,currentUserIsTeamAdmin:m,currentUserIsProjectOwner:g,indicateUnchargedFramerExpert:!!T.user.isFramerExpert},v(T)))})]},x))})})}function cy(e,o,t,n,r){let[i,s]=(0,Me.useMemo)(()=>{let d=[],l=[],p=c=>{(c.entry.role==="viewer"?l:d).push(c)};return e&&p({entry:e,ordering:"9"}),t.forEach(c=>{p({entry:c,ordering:"8"})}),n.forEach(c=>{p({entry:c,inactive:!0,ordering:Gg("7",c)})}),o.forEach(c=>{p({entry:c,ordering:Gg("7",c)})}),r.forEach(c=>{let m={...c,user:{...c.user,initials:c.user.initials||c.user.name.substr(0,2).toLocaleUpperCase()}};p({entry:m,inactive:!0,pending:!0,ordering:"0"})}),[d.sort(ws),l.sort(ws)]},[e,o,t,n,r]);return[i,s]}function Gg(e,o){return`${e}-${o.lastOpenedAt||0}`}function ws(e,o){return e.ordering!==o.ordering?e.ordering<o.ordering?1:-1:e.entry.user.name===o.entry.user.name?e.entry.user.id.localeCompare(o.entry.user.id):e.entry.user.name.localeCompare(o.entry.user.name,void 0,{sensitivity:"base"})}var Yg={duration:.15,ease:"easeInOut"},zi={initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1,transition:Yg},exit:{opacity:0,scale:.5,transition:Yg}},ly=Me.default.forwardRef(function({projectState:o,isViewOnly:t,inactive:n=!1,entry:r,handleRetry:i,handleTeamUpgrade:s,currentUserPermissions:d,currentUserIsTeamAdmin:l,currentUserIsProjectOwner:p,indicateFramerEmployee:c,indicateUnchargedFramerExpert:m},g){let v=Uo(),{user:f,role:y,permissions:h,pending:w}=r,{isDarkMode:P}=ro(),{project:k}=o,{sessionStore:C,remoteUsers:x}=a.stores,D=C.useState($o=>$o.user.id),[R,M]=Me.default.useState(null),[T,Z]=Me.default.useState(!1),[J,V]=Me.default.useState(!1),[re,_]=Me.default.useState(!1),j=f.id===D,Y=f.id===k.owner.id,ie=y==="viewer",z=l||p,X=ie&&re&&!t,ae=!n&&!j,ve=(0,Me.useCallback)(({id:$o})=>x.setSpectatedUser($o),[]);async function wo(){if(!v||J)return;$("ui_interaction",{id:"change-project-access",page:"invite-panel"}),V(!0);let $o=await v.updateUserPermissions({id:f.id,role:"collaborator",permissions:d});switch($o.status){case 0:break;case 1:s(),V(!1);break;case 2:V(!1);break;default:ne($o)}}let ye=R||(h||It),Le=Me.default.useRef(null),Ao=z&&!Y&&!w,[ta,ur]=(0,Me.useState)(!1),wt,Or=j&&Ao;w&&r.success===!1?wt=(0,F.jsx)(kt,{as:po.button,variant:"link",className:K(Vt),onClick:()=>i(f.id),...zi,children:(0,F.jsx)(G,{children:"Retry"})}):!Or&&(j||Y||t)?wt=(0,F.jsx)(po.span,{...zi,children:(0,F.jsx)(kt,{as:po.button,variant:"link",className:Vt,enabled:!1,children:(0,F.jsx)(G,{children:Cr(h||null,y)})})},"role"):wt=(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(kt,{ref:Le,as:po.button,variant:"link",className:Vt,onClick:()=>ur(!0),children:[(0,F.jsx)(G,{children:Cr(ye,y)}),(0,F.jsx)(ko,{})]}),(0,F.jsx)($g,{anchorRef:Le,open:ta,onClose:()=>ur(!1),permissions:h,user:f,role:y,handleTeamUpgrade:s,project:k,currentUserIsTeamAdmin:l,currentUserIsProjectOwner:p,setIsRemovingUser:Z,pending:w,setOptimisticPermissions:M,optimisticPermissions:R})]});let zr=c?`${f.name.split(" ")[0]} from Framer`:f.name;return(0,F.jsxs)(po.li,{ref:g,...zi,className:K(Nt,T&&fs),onPointerEnter:()=>_(!0),onPointerLeave:()=>_(!1),children:[(0,F.jsxs)("div",{children:[(0,F.jsx)(Pa,{entry:r,isDarkMode:P,onClick:ae?()=>ve(r.user):void 0,onClickHoverIcon:ae?(0,F.jsx)(xa,{width:"18",height:"18"}):void 0,greyScale:ie}),c?(0,F.jsx)("div",{className:Ui,title:"Framer Employee",children:(0,F.jsx)(vn,{width:"6",height:"9"})}):m?(0,F.jsx)("div",{className:K(Ui,Ig),title:"Framer Expert",children:(0,F.jsx)(vn,{width:"6",height:"9"})}):ie?(0,F.jsx)("div",{className:Mg,children:(0,F.jsx)(xa,{})}):null]}),(0,F.jsxs)(N,{gap:Lt,direction:"column",justifyContent:"center",children:[(0,F.jsx)("div",{className:K(Ee,Et),title:f.name,children:(0,F.jsx)(G,{children:zr})}),(0,F.jsx)("div",{className:jt,children:wt})]}),(0,F.jsx)(Xr,{initial:!1,mode:"wait",children:X&&!w?(0,F.jsx)(ue,{enabled:!t,className:Dt,large:!0,onClick:wo,children:J?(0,F.jsx)(St,{}):(0,F.jsx)(G,{children:"Upgrade"})}):(0,F.jsx)(G,{className:Cg,children:w?"Pending":Ql(r,!n,{shortDate:!0})})})]})}),dy=Me.default.forwardRef(function({entry:o,indicateFramerEmployee:t,handleTeamUpgrade:n},r){let i=Me.default.useRef(null),[s,d]=Me.default.useState(!1),l=Uo(),{isDarkMode:p}=ro(),[c,m]=(0,Me.useState)(!1),{user:g,email:v,id:f}=o;async function y(){if(!l||s)return;$("ui_interaction",{id:"grant-access",page:"invite-panel"}),d(!0);let h=await l.grantProjectAccessRequest({id:f});switch(h.status){case 0:return;case 1:return n(),d(!1);case 2:case 3:return _g(g,h.status),d(!1);default:ne(h)}}return(0,F.jsxs)(po.li,{ref:r,...zi,className:K(Nt,s&&fs),children:[(0,F.jsxs)("div",{children:[(0,F.jsx)(Pa,{entry:o,isDarkMode:p}),t?(0,F.jsx)("div",{className:Ui,title:"Framer Employee",children:(0,F.jsx)(vn,{width:"6",height:"9"})}):null]}),(0,F.jsxs)(N,{gap:Lt,direction:"column",justifyContent:"center",children:[(0,F.jsx)("div",{className:K(Ee,Et),title:g.name,children:(0,F.jsx)(G,{children:t?`${g.name.split(" ")[0]} from Framer`:g.name})}),(0,F.jsxs)("div",{className:jt,children:[(0,F.jsxs)(kt,{ref:i,as:po.button,variant:"link",className:Vt,onClick:()=>m(!0),children:[(0,F.jsx)(G,{children:v}),(0,F.jsx)(ko,{})]}),(0,F.jsx)(Hg,{anchorRef:i,open:c,onClose:()=>m(!1),isGrantingOrDenyingAccess:s,setIsGrantingOrDenyingAccess:d,id:f,user:g})]})]}),(0,F.jsx)(Xr,{initial:!1,mode:"wait",children:(0,F.jsx)(ue,{className:Dt,large:!0,onClick:y,children:s?(0,F.jsx)(St,{}):(0,F.jsx)(G,{children:"Accept"})})})]})});function Qg(){a.stores.modalStore.set({type:"Confirmation",source:"invite_panel",title:"Add Project Restrictions",description:"Purchase a plan to manage project restrictions and access even more features.",confirmLabel:"Dismiss",onConfirm:ct})}async function Kg(e,o,{isDarkMode:t,triggerRef:n}){let{top:r,left:i,height:s}=n?.current?n.current.getBoundingClientRect():e.currentTarget.getBoundingClientRect(),d=[{action:"view",label:_i("view"),checked:o==="view"},{action:"none",label:_i("none"),checked:o==="none"}],l=await Dn.show(d,{isDarkMode:t,location:{x:i-1,y:r+s+5}});return l?l.action:void 0}function _i(e){switch(e){case"view":return"Anyone with link can view";case"none":return"Only members can access";default:rc(e)}}var Ke=b(S());function Xg({isViewOnly:e,isDraftProject:o,isCurrentUserOwner:t,onCopyProjectURL:n,projectState:r,onAccessChange:i}){let{project:s}=r,{publicAccess:d,settings:l}=s,p=lt("canUsePrivateLink"),c=!e&&l.featureFlags.canChangeProjectAccess==="on"&&(!o||t),{isDarkMode:m}=ro(),g=a.wrapHandler(()=>{Wt(dp(s).toString()).catch(q),n()}),v=()=>{Qg()};return(0,Ke.jsx)("div",{className:ft,children:(0,Ke.jsxs)("div",{className:Nt,children:[(0,Ke.jsx)(fn,{color:de.tintDimmed,textCustomStyles:Rg,text:(0,Ke.jsx)(Dl,{})}),(0,Ke.jsxs)(N,{direction:"column",gap:Lt,justifyContent:"center",children:[(0,Ke.jsx)("div",{className:K(Ee,Et),children:(0,Ke.jsx)(G,{children:"Project Link"})}),(0,Ke.jsx)("div",{className:K(jt,Bi),children:(0,Ke.jsxs)(kt,{as:po.button,variant:"link",className:Vt,enabled:c,onClick:async f=>{$("ui_interaction",{page:"invite-panel",id:"open-project-link-settings"});let y=await Kg(f,d||[],{isDarkMode:m});y==="none"&&!p?v():y&&i(y)},children:[(0,Ke.jsx)(G,{children:_i(d)}),c&&(0,Ke.jsx)(ko,{})]})})]}),(0,Ke.jsx)(Gl,{className:Dt,large:!0,title:"Copy",onClick:g})]})})}var Xo=b(S());function Jg({displayName:e,avatar:o}){let t=at.extractInitials(e||"");return(0,Xo.jsx)("div",{className:ft,children:(0,Xo.jsxs)("div",{className:Nt,children:[(0,Xo.jsx)(fn,{color:de.tint,src:o||void 0,text:t}),(0,Xo.jsxs)(N,{direction:"column",gap:Lt,justifyContent:"center",children:[(0,Xo.jsx)("div",{className:K(Ee,Et),children:e}),(0,Xo.jsx)("div",{className:K(jt,Bi),children:(0,Xo.jsx)(G,{children:"All members can access"})})]})]})})}var ao=b(S());function eh({user:e,projectState:o,isDraftProject:t,isCurrentUserOwner:n,onAccessChange:r,onCopyProjectURL:i}){let{activeIds:s,project:d,accessRequests:l}=o,{space:p}=d,c=e.spaces.find(({id:T})=>T===p.id),m=pt("canInviteCollaborators"),g=rr(),{invitedUsers:v,acl:f,dispatchInvites:y,getStableEntryKey:h}=sg(o.acl),[w,P,k,C]=ad({acl:f,activeIds:s,userId:e.id}),x=to(c)&&c.role==="admin",D=w?.role==="owner",R=!!c;function M(){a.stores.popoverStore.active=0,R?ig(a,"invite_panel"):($("ui_impression",{page:"workspace-editor-limit-contact-admin"}),A({type:"add",variant:"warning",icon:"warning",key:"workspace-editor-limit-contact-admin",text:"This workspace has reached its editor limit. Contact your admin to upgrade the workspace"}))}return(0,ao.jsxs)(N,{gap:Vi,direction:"column",className:gg,children:[(0,ao.jsx)("div",{className:hg,children:(0,ao.jsx)(G,{children:"Invite"})}),(0,ao.jsx)(Ug,{isViewOnly:m,projectState:o,handleTeamUpgrade:M,pendingEntries:C,invitedUsers:v,dispatchInvites:y,currentUserPermissions:g}),(0,ao.jsx)("div",{className:ms}),(0,ao.jsxs)(N,{gap:Fi,direction:"column",children:[p.displayName&&(0,ao.jsx)(Jg,{displayName:p.displayName,avatar:c?.avatar}),(0,ao.jsx)(Xg,{isViewOnly:m,isDraftProject:t,isCurrentUserOwner:n,projectState:o,onCopyProjectURL:i,onAccessChange:r})]}),(0,ao.jsx)("div",{className:ms}),(0,ao.jsx)("div",{className:wg,children:(0,ao.jsx)(Zg,{isViewOnly:m,projectState:o,handleTeamUpgrade:M,currentUserEntry:w,activeEntries:P,inactiveEntries:k,pendingEntries:C,accessRequestEntries:l,invitedUsers:v,dispatchInvites:y,currentUserPermissions:g,currentUserIsTeamAdmin:x,currentUserIsProjectOwner:D,getStableEntryKey:h})})]})}var Ro=b(B());var ht=b(B());var my=et("app");function oh(e,o,t=!0){let n=o.treeVersion||0,r=a.remoteDocument?.treeVersion()||0,i=n!==0&&r!==0&&t,s=i&&n!==r,[d,l]=ht.default.useState(s),[p,c]=ht.default.useState([]),[m,g]=ht.default.useState(!1),v=(0,ht.useRef)(new AbortController),f=ht.default.useCallback(()=>{v.current.abort(),c([]),g(!1),l(!1)},[v]);return ht.default.useEffect(()=>(s&&(v.current.abort(),v.current=new AbortController,l(!0),gy(a.tree,e,n,r,v.current.signal).then(y=>c(y)).catch(y=>{y.name!=="AbortError"&&(my.reportError(y),g(!0))}).finally(()=>l(!1))),()=>{v.current.abort()}),[t]),{isEnabled:i,isLoadingChanges:d,hasChanges:p.length>0,hasError:m,changes:p,resetChanges:f}}function uy(){return{fetchingApiMs:0,computingMs:0,totalMs:0}}function fy(e){return typeof e=="object"&&e!==null&&"diffs"in e&&typeof e.diffs=="object"}async function gy(e,o,t,n,r){let i=new Sd(uy()),s=i.time("totalMs"),d=i.time("fetchingApiMs"),{diffs:l}=await xy(o,t,n,r);d.done();let p=i.time("computingMs"),c=hy(e,l);p.done(),s.done();let m=i.get();return $("changelog",{projectId:o,...m}),c}function hy(e,o){if(Object.entries(o).length===0)return[];let t={LayoutTemplate:[],WebPage:[],SmartComponent:[],CollectionItem:[],ProxyRoute:[]},n;for(let r of Object.values(o)){if(r.to?.__class!=="RootNode")continue;let i=Ct(r.to);L(xc(i),"Expected RootNode to deserialize as RootNode"),n=i}L(n,"Expected RootNode to be in diffs");for(let r of Object.values(o)){let i=r.to||r.from;if(!i)continue;let s=Ct(i,i.parentid);if(!s)continue;let d=yy(e,s,o,n);if(!d)continue;let l=wy(r);l!==void 0&&t[d.type].push({type:d.type,nodeId:s.id,name:d.name,status:l,userIds:new Set(r.userIds)})}return Yd(t)}function by(e,o){for(let t of Object.values(o)){let n=t.to||t.from,r=Ct(n,n?.parentid);if(rn(r)&&r.webPageId===e.id)return r}}function vy(e,o){let t=[],n=e;for(;n&&(t.push(n),!!n.parentid);){let r=o[n.parentid],i=r?.to||r?.from;if(!i)break;let s=Ct(i,i?.parentid);n=rn(s)?s:null}return t}function yy(e,o,t,n){if(rn(o)){let r=e.get(o.webPageId);r&&!(r.id in t)&&(o=r)}if(en(o)){let r=o.name||No(o);return{type:"LayoutTemplate",name:r}}if(We(o)){let r=n.homePageNodeId,i=o.id===r?"Home":mn(e,o)||un(e,o);if(!i){let s=by(o,t);if(s){let d=vy(s,t);i=dm(d,!0)}}return i||(i=No(o)),{type:"WebPage",name:i}}if(Jr(o)){let r=o.name||No(o);return{type:"SmartComponent",name:r}}else if(tn(o)){L(o.parentid,"Expected CollectionItemNode to have parentid");let r=t[o.parentid]?.to||t[o.parentid]?.from;L(r,"Expected CollectionItemNode's parent to exist in the diffs map");let i=Ct(r,r.parentid);L(kc(i),"Expected CollectionItemNode's parent to be a CollectionNode");let s=(i.name||No(i)).toLocaleLowerCase(),d=i.variables.find(c=>c.type==="slug"),l=d&&o.getControlProp(d.id)?.value,p=U(l)?`${s}/${l}`:`${s}/item`;return{type:"CollectionItem",name:p}}else if(Pc(o))return{type:"ProxyRoute",name:o.path}}function wy(e){return Cs(e.from)?Cs(e.to)?0:2:Cs(e.to)?1:void 0}function Cs(e){if(!e)return!1;let o=Ct(e,e.parentid);return o?!(ll(o)&&o.isDraft):!1}async function xy(e,o,t,n){let r=await Ad(`/projects/${e}/tree/v2/changes/${o}-${t}`,{signal:n});if(!r.ok)throw new Error(`Non-OK HTTP response: ${r.status}`);let i=await r.json();if(fy(i))return i;throw new Error("Invalid response format")}var Ps=b(B());var Hi="scroll_s1ei30bi",qi="title_tg4mzjt",th="row_r1rud32t",rh="iconContainer_iauun69",ks="removed_r8oy0xx",nh="name_n1mis7ef",ih="avatarList_aeln6u",ah="avatar_abn2zkh",sh="avatars_a1dlyr4q",Wi="centerContent_c14cnxe4",$i="descriptionColor_d1h9juoq";var lh="row_r1fm2c52",dh="navigationRow_n1ks328w",ph="icon_ixbnwg",mh="description_dpuo3rh",uh="chevronIcon_c10cosba";var Ft=b(S());function yo({className:e,children:o,icon:t,labelTestId:n,onClick:r,hideChevron:i}){let s=vl(r);return(0,Ft.jsxs)("div",{className:K(lh,r&&dh,e),"data-testid":n,...s,children:[(0,Ft.jsx)("div",{className:ph,children:t}),(0,Ft.jsx)("div",{className:K(mh,Ee),children:o}),!i&&(0,Ft.jsx)("div",{className:uh,children:(0,Ft.jsx)(yl,{})})]})}var Se=b(S()),fh=Ps.default.memo(function({isLoading:o,changes:t,fastChanges:n}){let{isDarkMode:r}=ro(),{acl:i}=a.stores.projectStore.useState(),s=Ps.default.useMemo(()=>o?{}:t.reduce((p,c)=>(p[c.nodeId]=c,p),{}),[t,o]),d=!br(n.count),l=d?n.changes:t;return(0,Se.jsxs)(N,{padding:0,gap:0,children:[(0,Se.jsx)("div",{className:qi,children:"Changes"}),(0,Se.jsx)("div",{className:K(Hi,l.length===0&&Wi,!o&&sh),children:!d&&o?(0,Se.jsx)(sm,{}):l.length===0?(0,Se.jsx)("div",{className:$i,children:"No Changes"}):l.map((p,c)=>{let m=s[p.nodeId],g=d?Object.assign(p,{userIds:m?.userIds}):p;return(0,Se.jsx)(Py,{change:g,acl:i,isDarkMode:r,index:c},c)})})]})}),ky=3;function Py({change:e,acl:o,isDarkMode:t,index:n}){let r=o.filter(s=>e.userIds?.has(s.user.id)),i=e.status===2;return(0,Se.jsx)(yo,{className:th,onClick:i?void 0:()=>Iy(e.nodeId),icon:(0,Se.jsx)("div",{className:K(rh,i&&ks),children:(0,Se.jsx)(ym,{change:e})}),hideChevron:!0,children:(0,Se.jsxs)(N,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,Se.jsx)(Sy,{change:e}),(0,Se.jsx)("div",{className:ih,style:{"--index":n},children:(0,Se.jsx)("div",{className:ah,children:(0,Se.jsx)(Kl,{entries:r,isDarkMode:t,maxAvatars:ky,size:"small",ignoreStatus:!0})})})]})})}function Sy({change:e}){let o;return e.status===1&&(o=(0,Se.jsx)(gn,{children:"NEW"})),(0,Se.jsxs)(N,{direction:"row",gap:10,className:nh,children:[(0,Se.jsx)("span",{className:K(Ee,e.status===2&&ks),children:e.name}),(0,Se.jsx)(N,{direction:"row",gap:4,children:o})]})}function Iy(e){let o=a.tree.getNode(e);o&&(Jc(o)?a.stores.scopeStore.select(o.id,{keepHistory:!1}):tn(o)&&(a.stores.scopeStore.select(pn,{keepHistory:!1}),a.selection.set(o.id)))}var mr=b(B());var gh="container_c70v5i5",hh="backButton_b1m6d3um",bh="backButtonVisible_ba9eeph",Gi="panel_pklurhb",vh="mainContent_mg8hahu",yh="hideMainContent_h7ed8wv",Ss="secondaryPanel_s42o8li",Is="hideSecondaryPanel_h1agk2wg",Yi="button_b1854po0",wh="buttonWithCheckmark_b1p0yt0i";var xh="hostname_h1gzj9e3",Ch="link_l15kuguu",Ms="warning_w1q39ypx",kh="divider_d1exh9nz",Br="errorColor_etq4iqk",Rs="descriptionColor_drnc4ju";var so=b(S());function Sh(){let e=So(()=>a.codeGenerationStore.isIdle()),o=So(()=>a.stores.publishStore.getNodesWithStaleModulesForPublish(a)),t=So(()=>{let v=a.tree.getService("loader");return v?v.numberOfScopesToLoad()>0:!1}),n=So(()=>new Set),r=So(()=>a.stores.publishStore.getErrors(a,{missingExternalModules:n,includeShallowScopeErrors:!0})),i=So(()=>$d(a.stores.treeStore.tree)),s=o.length||i.length,d=So(()=>{if(!(s||t))return Gd(a.stores.treeStore.tree,De)}),l=r.length>0||n.size>0,p=s||n.size>0||t||d?.length,c=l&&(r.length&&p||o.length||!e),[m,g]=(0,mr.useState)(c?void 0:r);return(0,mr.useEffect)(()=>{let v=performance.now();if(!c){if(o.length>0){let f=o.map(y=>a.stores.codeGenerationStore.updateComponent(y.id,1).catch(q));Promise.all(f).then(()=>{let y=a.stores.publishStore.getErrors(a,{includeStaleModules:!0});g(y),Ts(y,v)}).catch(q)}else Ts(r);return}a.stores.publishStore.prepareForPublishing(a,o,d,Array.from(n)).then(f=>{g(f),Ts(f,v)}).catch(f=>g([]))},[c]),m}function Ts(e,o){e?.length&&$("publish_blocked_by_errors",{errorCount:e.length,displayDelayMs:ke(o)?Math.round(performance.now()-o):0})}function Ih({errors:e}){let o=e[0];return o?(0,so.jsx)(Rh,{...o,singleError:!0}):null}function Mh({errors:e}){let o=eo(e),t=e??[];return(0,so.jsxs)(N,{padding:0,gap:0,children:[(0,so.jsx)("div",{className:qi,children:"Errors"}),(0,so.jsx)("div",{className:K(Hi,(o||t.length===0)&&Wi),children:o?(0,so.jsx)(St,{}):t.length===0?(0,so.jsx)("div",{className:$i,children:"No Changes"}):t.map((n,r)=>(0,so.jsx)(Rh,{...n},r))})]})}async function My(e){let o=!0;for(;o;)await new Promise(t=>a.runBeforeNextFrame(t)),o=Ta(e)}var Ry=2e3;async function Ty(e){await Promise.race([Zr(Ry),My(e)])}var Ay=250;async function Ly(e,o,t){let n=a.tree.get(e);if(!n||!o)return;if(n.cache.visible===!1){let d=Oc(a.tree,n);if(d.length>0){for(let{relatedNode:l}of d)if(l.cache.visible!==!1){n=l;break}}}Ta(n)&&await Ty(n);let r=a.tree.getRect(n,!1,!1),i=a.tree.convertFrameToCanvas(n,r);if(a.stores.canvasStore.zoomToCenter(i,{maxZoom:1}),a.stores.selectionStore.set(n.id),a.stores.chromeStore.reset(),a.stores.chromeStore.contentPanelTab="Layers",t==="unknown"){Pr(a);return}let s=Ey(t);s&&setTimeout(()=>{bd({id:s,flash:!0})},Ay)}function Rh(e){let{nodeId:o,scopeId:t,type:n,singleError:r}=e,i=(0,mr.useCallback)(()=>{t&&(a.stores.scopeStore.select(t,{keepHistory:!1}),a.runBeforeNextFrame(()=>Ly(o,t,n)))},[o,n,t]),s=r?`Error: ${Ph(e)}`:Ph(e);return(0,so.jsx)(yo,{onClick:i,icon:Dy(n),className:Br,children:(0,so.jsx)("div",{className:Ee,children:s})})}function Dy(e){switch(e){case"component":case"code-generation":case"cms":case"code-override":case"unknown":return(0,so.jsx)(kl,{});case"form":return(0,so.jsx)(Il,{});default:ne(e)}}function Ey(e){switch(e){case"component":case"code-generation":return"code-component-panel";case"form":return"form-panel";case"code-override":return"code-override-panel";case"cms":return"data-repeater-panel";case"unknown":return;default:ne(e)}}function jy({moduleIdentifier:e,scopeId:o,nodeId:t}){if(Eo(e)){let i=De.componentForIdentifier(e)?.name;if(i)return i;let s=Zo(e);if(zt(s)){let d=a.tree.get(s.localIdName);if(We(d))return Tn(a.tree,d);if(d?.name)return d.name}else{let d=a.tree.get(s.moduleId);if(Sc(d)&&d.title)return d.title}}let n=a.tree.get(t);if(L(n,"Publish Errors: An error node should correspond to a node in the tree."),n.name)return n.name;let r=a.tree.get(o);return We(r)?Tn(a.tree,r):r?.name}function Ph({type:e,reason:o,nodeId:t,scopeId:n,moduleIdentifier:r,exportName:i}){switch(e){case"unknown":case"code-generation":case"component":{let s=jy({moduleIdentifier:r,scopeId:n,nodeId:t})??"Component";if(o==="FileTooLarge")return`${s} Too Large`;if(o==="MissingModule")return U(i)?`${i} Missing`:`${s} Missing`;if(o===Zd)return`${s} Out of Date`;let d=a.tree.get(n),l=We(d)?Tn(a.tree,d):d?.name;return s!==l?We(d)?`${s} on ${l}`:`${s} in ${l}`:s}case"code-override":return o==="MissingModule"?"Code Override Missing":"Invalid Code Override";case"cms":return"Cannot Load Collection";case"form":return"Form Not Configured";default:ne(e)}}var Ae=b(S());function Th({hostname:e}){let{displayUrl:o,linkUrl:t}=vm({hostname:e,linkToActivePage:!0});return(0,Ae.jsx)(yn,{href:t,onMouseDown:()=>{$("ui_interaction",{page:"publish-popover",id:e.type==="custom"?"open-custom-link":"open-published-link"})},className:Ch,children:(0,Ae.jsx)(yo,{icon:(0,Ae.jsx)(Ml,{stroke:de.panelDescription}),className:xh,labelTestId:"hostname-row-label",hideChevron:!0,children:o})})}function Ah({deployment:e,onOpenVersion:o}){return(0,Ae.jsxs)(yo,{className:Rs,icon:(0,Ae.jsx)(wl,{}),onClick:o,children:[(0,Ae.jsx)(qp,{isoTimestamp:e.createdAt})," \xB7 ","by ",e.deployedBy.name]})}function Lh({hostname:e,onClick:o}){return e.status==="invalid_dns"?(0,Ae.jsx)(yo,{className:Ms,icon:(0,Ae.jsx)(yr,{fill:de.warningTint}),onClick:o,children:"Invalid DNS"}):null}function Ny(e){return br(e)?"View Changes":e===0?"No Changes":e===1?"1 Change":`${e} Changes`}function Dh({onClick:e,count:o}){let t=br(o)||ke(o)&&o>0;return(0,Ae.jsx)(yo,{onClick:t?e:void 0,icon:(0,Ae.jsx)(Ll,{}),className:Rs,hideChevron:!t,children:Ny(o)})}function Eh({count:e,onClick:o}){return(0,Ae.jsxs)(yo,{icon:(0,Ae.jsx)(yr,{fill:de.errorTint}),className:Br,onClick:o,children:[e," ",e>1?"Errors":"Error"]})}function jh({onClick:e}){return(0,Ae.jsx)(yo,{onClick:e,className:Br,icon:(0,Ae.jsx)(yr,{fill:de.errorTint}),children:"Optimization Error"})}function Nh({onClick:e}){return(0,Ae.jsx)(yo,{onClick:e,className:Ms,icon:(0,Ae.jsx)(yr,{fill:de.warningTint}),children:"Optimization Warning"})}var Wo=b(B());var Vh="animate_a9lul9k";var As=b(S());function Fh({...e}){return(0,As.jsx)("svg",{width:"16",height:"16",xmlns:"http://www.w3.org/2000/svg",fill:"none",...e,children:(0,As.jsx)("path",{d:"M 3 9 L 6 12 L 13 5",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round",strokeLinecap:"round",pathLength:"1",className:Vh})})}var Qi=b(S());function Fy({isLatestDeployed:e,updatedStatus:o,publishEnabled:t,canPublish:n,publishStatus:r,isProductionDeployment:i,stagingEnabled:s,permissions:d,hasErrors:l}){let p=s?d.canPublishToStaging:d.canPublish;return(0,Wo.useMemo)(()=>{let c=t&&n,m="Publish";return p?s&&i&&l?(m="Error in Staging",c=!1):e?m="Latest Deployed":o===2?m=i?"Deploying\u2026":"Updating\u2026":o===0?m=i?"Deployed":"Updated":o===1?m=i?"Deployment Failed":"Update Failed":r===3?m=i?"Deploying\u2026":"Updating\u2026":r===2?m=i?"Deploy Latest":"Update":m=i?"Deploy Latest":"Publish":(m="No Permissions",c=!1),{label:m,enabled:c}},[e,o,t,n,r,i,s,l,p])}function Bh({publishEnabled:e,onClick:o,onSuccess:t,publishStatus:n,defaultDeployment:r,customDeployment:i,isProductionDeployment:s,stagingEnabled:d,permissions:l,hasErrors:p}){let[c,m]=(0,Wo.useState)(),g=(0,Wo.useRef)(),v=!!(s&&r?.treeVersion===i?.treeVersion),f=!v&&(!s||!Kd(r?.status)&&!Qd(r?.status)),{label:y,enabled:h}=Fy({isLatestDeployed:v,updatedStatus:c,publishEnabled:e,canPublish:f,publishStatus:n,isProductionDeployment:s,stagingEnabled:d,permissions:l,hasErrors:p});(0,Wo.useEffect)(()=>()=>{g.current&&window.clearTimeout(g.current)},[]);let w=(0,Wo.useCallback)(async()=>{m(2),await o().then(k=>{m(k?0:1),k&&t(),g.current&&window.clearTimeout(g.current),g.current=window.setTimeout(()=>m(void 0),2e3)})},[o,t]),P=c===0;return(0,Qi.jsx)(ue,{title:y,enabled:h,variant:h?"withDepthPrimary":"default",onClick:w,className:K(Yi,P&&wh),children:P?(0,Qi.jsx)(Fh,{}):(0,Qi.jsx)(G,{children:y})})}var se=b(S());function Uh({projectId:e,canPublish:o,onPublish:t,onUpdateCustomDomain:n,publishStatus:r,defaultHostname:i,customHostname:s,defaultHostnameDeployment:d,customHostnameDeployment:l,deploymentStrategy:p}){return!i||!d||!p?null:(0,se.jsx)(zy,{projectId:e,canPublish:o,onPublish:t,onUpdateCustomDomain:n,publishStatus:r,defaultHostname:i,customHostname:s,defaultHostnameDeployment:d,customHostnameDeployment:l,deploymentStrategy:p})}var By="publish-popover";var Uy=a.wrapHandler(()=>{let{chromeStore:e,popoverStore:o,siteSettingsStore:t}=a.stores;e.displayMinimalUI||(o.active=0,t.setActiveTab({tab:"versions"}).catch(q))}),Ki=a.wrapHandler(()=>{let{chromeStore:e,popoverStore:o,siteSettingsStore:t}=a.stores;e.displayMinimalUI||(o.active=0,t.setActiveTab({tab:"domains"}).catch(q))});function Oy(e){let o=Jt(()=>a.stores.publishStore.getPublishRevisions(a),[e],"Tree",{deepEqual:!0});return Lp(o,1e3)}function zy({projectId:e,canPublish:o,onPublish:t,onUpdateCustomDomain:n,publishStatus:r,defaultHostname:i,customHostname:s,defaultHostnameDeployment:d,customHostnameDeployment:l,deploymentStrategy:p}){let[c,m]=(0,Ro.useState)(0),[g,v]=(0,Ro.useState)(void 0),f=eo(g);tr("ui_impression",{page:By});let y=Hn(),h=s&&l,w=p==="manual",P=w&&c===1||!w&&h,k=P&&s?s:i,C=P&&l?l:d,x=Oy(r),{isLoadingChanges:D,changes:R,resetChanges:M}=oh(e,d,g==="changeLog"),T=Sh(),Z=Co(T)&&T.length>0||Xl(d.status);(0,Ro.useEffect)(()=>{let Y=a.tree.getService("loader");if(!Y)return;let ie=Y.prioritizeLoadingAllData({preload:!0});return()=>ie()},[]);let J=async()=>c===1?n(d):t(),V=(0,Ro.useCallback)(()=>{v(void 0)},[]),re=(0,Ro.useCallback)(()=>{v("errors")},[]),_=(0,Ro.useCallback)(()=>{v("changeLog")},[]),j=o&&(Co(T)?T.length===0:!0);return(0,se.jsxs)("div",{className:gh,children:[(0,se.jsx)(Ul,{onClick:V,className:K(hh,!f&&bh),children:(0,se.jsx)(Tl,{})}),(0,se.jsxs)(N,{padding:15,className:K(Gi,vh,!f&&yh),children:[w&&h&&(0,se.jsxs)(se.Fragment,{children:[(0,se.jsxs)(Zl,{unsaturated:!0,"data-testid":"deployment-mode",children:[(0,se.jsx)(ka,{title:"Staging",selected:c===0,onSelect:()=>m(0)}),(0,se.jsx)(ka,{title:"Production",selected:c===1,onSelect:()=>m(1)})]}),(0,se.jsx)("div",{className:kh})]}),(0,se.jsxs)(N,{gap:0,paddingTop:w?5:0,children:[(0,se.jsx)(Th,{hostname:k}),(0,se.jsx)(Ah,{deployment:C,onOpenVersion:Uy}),(0,se.jsx)(Lh,{hostname:k,onClick:Ki}),(0,se.jsx)(_y,{deploymentMode:c,showChangeLogPanel:_,errors:T,changesCount:x?.count??null,defaultHostnameDeployment:d,showErrorPanel:re})]}),!h&&!a.siteSettings.isOpen&&!a.stores.chromeStore.displayMinimalUI&&(0,se.jsx)(ue,{className:Yi,onClick:Ki,children:(0,se.jsx)(G,{children:"Add Domain"})}),(0,se.jsx)(Bh,{onClick:J,onSuccess:M,publishEnabled:j,publishStatus:r,defaultDeployment:d,customDeployment:l,isProductionDeployment:c===1,stagingEnabled:w,hasErrors:Z,permissions:y})]}),(0,se.jsx)("div",{className:K(Gi,Ss,g!=="changeLog"&&Is),children:(0,se.jsx)(fh,{changes:R,fastChanges:x,isLoading:D})}),(0,se.jsx)("div",{className:K(Gi,Ss,g!=="errors"&&Is),children:(0,se.jsx)(Mh,{errors:T})})]})}var _y=Ro.default.memo(({deploymentMode:e,showChangeLogPanel:o,errors:t,defaultHostnameDeployment:n,changesCount:r,showErrorPanel:i})=>{if(e===1)return null;let s=t?.length??0;if(eo(t)||s===0)switch(Wd(n.status,n.hasWarnings)){case 2:return(0,se.jsx)(jh,{onClick:Ki});case 4:return(0,se.jsx)(Nh,{onClick:Ki});default:return(0,se.jsx)(Dh,{onClick:o,count:r})}return s===1?(0,se.jsx)(Ih,{errors:t}):(0,se.jsx)(Eh,{count:t.length,onClick:i})});var bt=b(S());function Oh({canPublish:e,user:o,projectState:t,activePopover:n,onActivePopoverChange:r,onAccessChange:i,onCopyProjectURL:s,onShowMoveProjectMenu:d,onConfirmMoveProject:l,moveProjectDestination:p,onPublish:c,onUpdateCustomDomain:m,publishStatus:g,defaultHostname:v,customHostname:f,defaultHostnameDeployment:y,customHostnameDeployment:h,deploymentStrategy:w}){let P=(0,Xi.useRef)(null),{id:k}=t.project,C=document.getElementById("toolbar-invite-button"),x=document.getElementById("toolbar-publish-button");function D(){r(0)}let R=(0,Xi.useCallback)(()=>{g!==3&&r(0)},[g,r]),M=oo(t.project.space),T=o.id===t.project.owner.id,Z=M&&T;return(0,bt.jsxs)(Ol,{ref:P,className:bm,children:[n===1&&(0,bt.jsx)(xr,{className:Da,anchor:C,alignSelf:"center",attachTo:"bottom",offset:{x:0,y:me.tooltipArrowHeight+1},arrow:{anchor:C,alignSelf:"center"},onClose:D,children:Z?(0,bt.jsx)(ng,{user:o,projectState:t,onShowMoveProjectMenu:d,onConfirmMoveProject:l,moveProjectDestination:p}):(0,bt.jsx)(eh,{user:o,projectState:t,isDraftProject:M,isCurrentUserOwner:T,onAccessChange:i,onCopyProjectURL:s})}),n===3&&(0,bt.jsx)(xr,{className:Da,anchor:P.current,alignSelf:"end",attachTo:"bottom",offset:{x:15,y:-5},arrow:{anchor:x,alignSelf:"center"},onClose:R,children:(0,bt.jsx)(Uh,{projectId:k,canPublish:e,onPublish:c,publishStatus:g,onUpdateCustomDomain:m,defaultHostname:v,customHostname:f,defaultHostnameDeployment:y,customHostnameDeployment:h,deploymentStrategy:w})})]})}var Ji=b(S()),zh=({children:e})=>{let o="";return typeof window<"u"&&window.recaptchaSiteKey&&(o=window.recaptchaSiteKey),(0,Ji.jsxs)(pg,{reCaptchaKey:o,useEnterprise:!0,scriptProps:{defer:!0},container:{element:"recaptcha-container",parameters:{}},children:[(0,Ji.jsx)("div",{id:"recaptcha-container",style:{display:"none"}}),e]})};var Bt=b(B());function _h({isUserPartOfTeam:e,api:o,projectTeamId:t,autoJoinDefaultRole:n}){let[r,i]=Bt.default.useState(),[s,d]=Bt.default.useState(!0),[l,p]=Bt.default.useState(!1),[c,m]=Fn("recommended-teams-joined-pending-welcome-modal",[]),g=n==="editor"?"an Editor":`a ${bc(n)}`,v=Bt.default.useCallback(async()=>{if(r)try{$("ui_interaction",{page:"canvas-autojoin-toast",id:"joinTeam"}),p(!0),await ou({teamId:r.id,source:"recommended-canvas"}),m(f=>[...f,r.id]),p(!1),i(void 0),A({variant:"success",key:"joined-team-sucess",icon:"success",text:`You have joined the ${r.displayName} team as ${g}`,type:"add"})}catch{A({variant:"error",key:"joined-team-error",icon:"error",text:"Failed to join team",type:"add"})}},[r,m,g]);return Bt.default.useEffect(()=>{let f=!0;if(e){d(!1);return}return eu().then(y=>{if(!f)return;let h=y.find(({id:w})=>t===w);h&&i(h),d(!1)}).catch(()=>{}),()=>{f=!1}},[e,o,t]),Bt.default.useEffect(()=>{let f="recommended-team";r?($("ui_impression",{page:"canvas-autojoin-toast"}),A({variant:"info",key:f,text:`Join the ${r.displayName} team as ${g}`,action:{onClick:v,title:"Join"},styleOverride:"fallback-tool",permanent:!!r||l,type:"add",icon:"view-only",duration:1/0})):A({type:"remove",key:f})}),{isShowingRecommendedTeamToast:s||!!r}}var co=b(B());var Hh="description_d1mpdoho",Ls="resource_rbg65ev",qh="divider_d1m3gl5g",Ds="icon_i5ixusr";var ce=b(S()),Wy="request-editor-access";function Wh({space:e,projectAccessStatus:o,teamAccessStatus:t,onRequestProjectEditAccess:n,onRequestTeamEditAccess:r,onDismiss:i,showRequestTeamEditorAccess:s}){return tr("ui_impression",{page:Wy}),e?.scope!=="organization"?null:(0,ce.jsx)(Gt,{visible:!0,onDismiss:i,children:(0,ce.jsxs)(N,{gap:15,children:[(0,ce.jsxs)(N,{gap:20,children:[(0,ce.jsx)(it,{className:$l.title,children:(0,ce.jsx)(G,{children:"Request Edit Access"})}),(0,ce.jsxs)(it,{className:Hh,children:[(0,ce.jsx)(G,{children:"You are currently a viewer in this project."}),(0,ce.jsx)("br",{}),(0,ce.jsx)(G,{children:"Request edit access below."})]})]}),(0,ce.jsx)("hr",{className:qh}),(0,ce.jsxs)(N,{gap:15,children:[(0,ce.jsxs)(N,{direction:"row",gap:0,justifyContent:"space-between",children:[(0,ce.jsxs)(N,{direction:"row",gap:10,justifyContent:"center",alignItems:"center",children:[(0,ce.jsx)(N,{className:Ds,justifyContent:"center",alignItems:"center",children:(0,ce.jsx)($y,{})}),(0,ce.jsx)(it,{className:Ls,children:(0,ce.jsx)(G,{children:"This Project"})})]}),(0,ce.jsx)(ue,{large:!0,variant:"primary",title:"Request Access",onClick:n,enabled:o!=="pending"&&o!=="loading",children:(0,ce.jsx)(G,{children:o==="pending"?"Pending":"Request"})})]}),e&&s&&(0,ce.jsxs)(N,{direction:"row",gap:0,justifyContent:"space-between",children:[(0,ce.jsxs)(N,{direction:"row",gap:10,justifyContent:"center",alignItems:"center",children:[(0,ce.jsx)(N,{className:Ds,justifyContent:"center",alignItems:"center",children:(0,ce.jsx)(tu,{avatar:null,displayName:e.displayName,organization:null})}),(0,ce.jsx)(it,{className:Ls,children:(0,ce.jsx)(G,{children:"All Projects in Workspace"})})]}),(0,ce.jsx)(ue,{large:!0,variant:"primary",title:"Request Access",onClick:r,enabled:t!=="pending"&&t!=="loading",children:(0,ce.jsx)(G,{children:t==="pending"?"Pending":"Request"})})]})]})]})})}function $y(){return(0,ce.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",children:(0,ce.jsx)("path",{d:"M 9.828 3.343 C 10.024 3.148 10.34 3.148 10.536 3.343 L 12.657 5.464 C 12.852 5.66 12.852 5.976 12.657 6.172 L 6.26 12.568 C 6.051 12.777 5.784 12.92 5.494 12.978 L 3.139 13.449 C 2.789 13.519 2.481 13.211 2.551 12.861 L 3.022 10.506 C 3.08 10.216 3.223 9.949 3.432 9.74 Z M 11.939 1.232 C 12.135 1.037 12.451 1.037 12.646 1.232 L 14.768 3.354 C 14.963 3.549 14.963 3.865 14.768 4.061 L 14.061 4.768 C 13.865 4.963 13.549 4.963 13.354 4.768 L 11.232 2.646 C 11.037 2.451 11.037 2.135 11.232 1.939 Z",fill:"currentColor"})})}var Gh=b(S()),ea=Dm(A);function Gy({isUserPartOfTeam:e,isUserEditorInTeam:o}){return e&&!o}function $h({project:e,isUserPartOfTeam:o,isUserEditorInTeam:t,toastKey:n,api:r}){let[i,s]=(0,co.useState)(!1),[d,l]=(0,co.useState)(),[p,c]=(0,co.useState)(),m=oo(e.space),g=(0,co.useMemo)(()=>m?"Dismiss":o&&p==="pending"||!o&&d==="pending"?"Request Pending":"Request Access",[o,m,d,p]),v=(0,co.useCallback)(async()=>{$("ui_interaction",{page:"request-editor-access",id:"request-project-editor-access"});try{l("loading");let{status:h}=await r.requestAccess({resourceType:"project",resourceId:e.id});l(h),ea.projectSuccess()}catch{l(void 0),ea.projectError()}},[e.id,r]),f=(0,co.useCallback)(async()=>{if(e.space.displayName){$("ui_interaction",{page:"request-editor-access",id:"request-team-editor-access"});try{c("loading");let{status:h}=await r.requestAccess({resourceType:"team",resourceId:e.space.ownerId});c(h),l(h),ea.teamSuccess(e.space.displayName)}catch{c(void 0),ea.teamError(e.space.displayName)}}},[e.space.displayName,e.space.ownerId,r]);return(0,co.useEffect)(()=>{if(!n)return;A({variant:"info",key:n,text:"You do not have editing rights for this project",action:m?void 0:{title:g,onClick:()=>{s(!0)}},permanent:!m,styleOverride:m?void 0:"request-editor-access",showCloseButton:m?"auto":"never",type:"add",icon:"view-only",duration:1/0})},[n,g,m]),(0,co.useEffect)(()=>{if(!n)return;let h=!0;return(async()=>{try{let{accessRequests:w}=await Yy(e.id);if(!h)return;w.team&&o&&(c(w.team.status),l(w.team.status)),w.project&&l(w.project.status)}catch(w){q(w)}})(),()=>{h=!1}},[n,e.id,o,r]),(0,co.useMemo)(()=>!i||e.space.scope!=="organization"?null:(0,Gh.jsx)(Wh,{projectAccessStatus:d,teamAccessStatus:p,onRequestProjectEditAccess:v,onRequestTeamEditAccess:f,showRequestTeamEditorAccess:Gy({isUserPartOfTeam:o,isUserEditorInTeam:t}),space:e.space,onDismiss:()=>{s(!1)}}),[v,f,i,e.space,d,p,o,t])}function Yy(e){return Kt.get(`/web/access-requests/projects/${e}`)}var Yh=b(B());function Zh({shouldShowToast:e,accessRequests:o,onReviewRequests:t}){(0,Yh.useEffect)(()=>{let n="review-editor-access";o.length>0&&e?A({key:n,type:"add",variant:"info",text:o.length===1?"1 viewer is requesting access to edit this project":`${o.length} viewers are requesting access to edit this project`,permanent:!0,showCloseButton:"auto",icon:"view-only",duration:1/0,action:{title:"Review",onClick:t}}):A({key:n,type:"remove"})},[o,t,e])}var Kh=b(B());function Qh(){let e=lt("canUseEditorPermissions"),o=Ld("canUseEditorPermissions","upsell");return e||o}function Xh({disabled:e}){let o="missing-permissions",t=a.stores.scopeStore.useState(c=>c.active.id===pn),n=a.siteSettings.useState(c=>c.active),r=t?"CMS":n?"SiteSettings":"Canvas",i=Hn(),s=r==="Canvas"&&!i.canDesign||r==="CMS"&&!i.canEditContent||r==="SiteSettings"&&!i.canEditSiteSettings,d=Qh(),p=!e&&d&&s;Kh.default.useEffect(()=>{p?A({type:"add",key:o,variant:"info",text:Zy(r),permanent:!0,icon:"view-only",duration:1/0}):A({type:"remove",key:o})},[o,p,r])}function Zy(e){switch(e){case"Canvas":return"You do not have design editing rights";case"CMS":return"You do not have content editing rights";case"SiteSettings":return"You don\u2019t have enough permissions to edit these settings";default:ne(e,"All sections should have a toast text")}}var lo=b(S()),Jh=et("projectHandlers"),Qy=(0,ee.lazy)(()=>import("https://app.framerstatic.com/AccountSettingsModal-JLGPV2A2.mjs")),Ky=(0,ee.lazy)(()=>import("https://app.framerstatic.com/TeamCreationModal-UOHG43RN.mjs")),eb=e=>Gm(e,21),Es=typeof window<"u"&&!jn()?Cd(window.location):null,Xy=a.wrapHandler(()=>a.publishStore.publish(a)),Jy=a.wrapHandler(e=>a.stores.publishStore.updateCustomDomain(e));function ew(e){a.processWhenReady(()=>{let{sessionStore:o}=a.stores;typeof e=="function"?o.user=e(o.user):o.user=e})}function ob({projectState:e,api:o,assetService:t,filePickerRef:n}){let{project:r}=e,{sessionStore:i,projectStore:s,popoverStore:d,publishStore:l,chromeStore:p,documentSettingsStore:c,previewStore:m,pluginStore:g,modalStore:v,feedbackStore:f,toolStore:y}=a.stores;(0,ee.useEffect)(()=>{Rc(r),Tc(r.space.id,r.teamLicenseType),fa(),Object.entries(Mc).forEach(([E,Q])=>{let we=Array.isArray(Q)?Q:[Q];for(let fe of we)$("gradual_rollout",{experiment:$e.getVariantName(E)??E,enabled:$e.is(E,fe.variant),sampleSize:fe.sample,scope:fe.scope,includeEnterprise:fe.includeEnterprise??!1})}),a.processWhenReady(()=>{a.signalNonUserEvent(),s.project=r})},[r]);let[h,w]=(0,ee.useState)(!1),[P,k]=(0,ee.useState)(!1),C=Zm(Gs().api,ew),x=i.useState(E=>E.user);(0,ee.useEffect)(()=>void C.fetchMe(),[]);let[D,R]=(0,ee.useState)(null),[M,T]=(0,ee.useState)(null),[Z,J]=(0,ee.useState)(!1),V=(0,ee.useCallback)(E=>{d.active=E},[]),{publishStatus:re,defaultHostname:_,customHostname:j,defaultHostnameDeployment:Y,customHostnameDeployment:ie,deploymentStrategy:z}=l.useState(),{active:X}=d.useState(),ae=E=>Q=>{Q.preventDefault(),Q.stopPropagation(),E()},ve=yf(E=>{let Q=Vo("showPreview");L(Q,"togglePreviewVisible key binding is not set"),E(Q,ae(()=>{kr()&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),setTimeout(()=>{a.runBeforeNextFrame(()=>Pr(a))})}),"Toggle Preview");let we=Vo("goBack");L(we,"goBackKeyBinding key binding is not set"),E(we,ae(pp),"Go Back");let fe=Vo("goForward");L(fe,"goForwardKeyBinding key binding is not set"),E(fe,ae(mp),"Go Forward");let Go=Vo("previewNextBreakpoint");L(Go,"previewNextBreakpoint key binding is not set"),E(Go,ae(()=>La(a,1)),"Next Breakpoint");let Lo=Vo("previewPreviousBreakpoint");L(Lo,"previewPreviousBreakpoint key binding is not set"),E(Lo,ae(()=>La(a,-1)),"Previous Breakpoint");let Ot=Vo("openFullScreen");L(Ot,"openFullScreen key binding is not set"),E(Ot,ae(()=>On().openFullScreen()),"Present Preview");let $r=Vo("toggleHighlightsInLivePreview");L($r,"toggleHighlightsInLivePreview key binding is not set"),E($r,ae(()=>m.toggleHighlights()),"Show Interaction Highlights");let Xe=Vo("toggleConsole");L(Xe,"toggleConsole key binding is not set"),E(Xe,ae(()=>On().toggleConsole()),"Toggle Preview Console");let hr=Vo("reload");L(hr,"reload key binding is not set"),E(hr,ae(()=>On().reload()),"Reset Preview"),E("CommandOrControl+S",ae(()=>{kr()||p.mainView===0&&A({type:"add",variant:"success",icon:"success",text:"Framer automatically saves your work",key:"auto-save-toast"})}),"Save"),E("CommandOrControl+F",ae(()=>{p.mainView===0&&p.leftPanel===0&&aa&&aa.dispatch({action:"openPanelSearch"})}),"Open Panel Search")},[]),wo=c.isNewlyCreatedProject,To=e.aclById[r.owner.id],ye=fo.isOn("skipInterstitial"),Le=e.aclById[x.id]?.role||r.userRole,Ao=Le==="viewer",ta=Le==="owner",ur=Le==="viewer",[wt,Or]=(0,ee.useState)(Zt(r)&&!wo);fo.update(r.canvasFeatures);let Ie=(0,ee.useMemo)(()=>x.spaces.find(E=>E.id===r.space.id),[r.space.id,x.spaces]),Ns=(0,ee.useMemo)(()=>x.spaces.filter(to),[x.spaces]),zr=(0,ee.useRef)(!0);(0,ee.useEffect)(()=>{if(zr.current){zr.current=!1;return}t.refresh().catch(q)},[Ie,t]);let{canMoveProject:$o,availableCollectionsByTeamId:Vs}=Xm({project:r,user:x});Cf({channel:jo,project:r,canMoveProject:$o,onShowMoveProjectMenu:sa}),(0,ee.useEffect)(()=>{fa(),r.teamExperiments&&$e.update(r.teamExperiments);let E=pc(Ic).filter(Q=>!$e.isOff(Q)).map(Q=>$e.getVariantName(Q)).sort().join(",");$("experiments_enabled_on_load",{on:E})},[r.teamExperiments]),(0,ee.useEffect)(()=>{let E=r.settings.featureFlags,Q=to(Ie)?Ie.license.featureFlags:{};Nn.update({...Q,...E})},[Ie,r.settings.featureFlags]),(0,ee.useEffect)(()=>{T(null)},[r.space,r.collection]);let _r=Ju(a.stores),Fs=g.useState(E=>E.isLoading);(0,ee.useEffect)(()=>{r.space.scope!=="user"&&_r&&(Fs||a.processWhenReady(()=>g.openPreparedPlugin(a)))},[r.space.scope,_r,Fs]),(0,ee.useEffect)(()=>{a.processWhenReady(()=>{a.signalNonUserEvent(),p.isPreviewingFeaturedTemplate=To?.user.isFramerEmployee===!0&&ye&&Ao})},[ye,To?.user.isFramerEmployee,Ao]);let{isPreviewingFeaturedTemplate:Hr,permissionsDidLoad:ib}=Fo([p,s],()=>({isPreviewingFeaturedTemplate:p.isPreviewingFeaturedTemplate,permissionsDidLoad:s.acl.length>0&&p.hasReceivedUserPermissions})),xt=Ao||r.archived||Hr,qr=v.useState(),ra=(0,ee.useRef)(!1);(0,ee.useEffect)(()=>{if(r.space.scope==="organization"||xt||r.owner.id!==x.id||v.isVisible())return;if(!x.spaces.some(Q=>to(Q)&&Q.permissions.write)){a.processWhenReady(()=>v.set({type:"CreateTeam",source:"automatic"})),ra.current=!0;return}ra.current||Gn.defaultProjectLocation.then(({defaultTeam:Q})=>{if(!Q?.id)return;let{displayName:we,id:fe}=Q;T({teamId:fe,destinationLabel:eb(`${we} / All`),spaceName:we})}).catch(Jh.reportError).finally(()=>{v.set({type:"DeprecatedDrafts",source:"automatic"}),ra.current=!0})},[xt,r.space.scope,qr,x.spaces]);let na=(xt||oo(r.space))&&!jn(),Bs=wt&&!jn(),Wr=oo(Ie)&&ta||to(Ie)&&Ie.permissions.write&&!Ao;async function Us(){let[,E]=at.extract(Ra(r.title));$("ui_interaction",{page:"project-menu-bar",id:"archive-project"});try{await o.updateProject({archived:!0},!1),A({type:"add",variant:"success",key:`archive-${r.id}`,text:`Archived ${E}`,icon:"success",duration:3e3})}catch(Q){Q instanceof Sa&&Q.status===409&&Q.data.reason==="project_has_active_subscription"?A({type:"add",variant:"error",key:`archive-${r.id}-active-subscription-error`,text:"Unable to archive a project with an active subscription. Cancel the subscription and try again.",duration:1/0}):Q instanceof Sa&&Q.status===409&&Q.data.reason==="project_has_custom_domain_attached"?A({type:"add",variant:"error",key:`archive-${r.id}-custom-domain-attached-error`,text:"Unable to archive a project with a custom domain attached. Remove the domain and try again.",duration:1/0}):A({type:"add",variant:"error",key:`archive-${r.id}`,text:`Failed to archive ${E}`,icon:"error",duration:3e3}),R(null);return}o.wait(()=>{window.location.href=Qt})}function ab(){r.space.scope==="organization"?R(r):Us()}let ia=(0,ee.useCallback)(async()=>{$("ui_interaction",{page:"canvas-unarchive-toast",id:"unarchive-project"});try{await o.updateProject({archived:!1}),A({type:"add",variant:"success",key:`unarchived-${r.id}`,text:"This project has been unarchived",icon:"success"})}catch{A({type:"add",variant:"error",key:`unarchived-${r.id}`,text:"Failed to unarchive project",icon:"error"})}},[o,r.id]);async function sb(){$("ui_interaction",{page:"project-menu-bar",id:"save-template-as-project"});let E=`save-as-project-${r.id}`;try{await o.updateProject({type:"default"}),Or(!1),A({type:"add",variant:"success",key:E,text:"This project is no longer a template",icon:"success",duration:3e3})}catch{A({type:"add",variant:"error",key:E,text:"This template could not be converted to a project",icon:"error",duration:3e3})}}let fr="view-only-access",{isShowingRecommendedTeamToast:cb}=_h({isUserPartOfTeam:typeof Ie<"u",api:C,projectTeamId:r.space.ownerId,autoJoinDefaultRole:r.settings.featureFlags.canInviteEditors==="on"?r.settings.autoJoinDefaultRole:"viewer"}),lb=na&&!oo(r.space)&&ur&&!r.archived&&!cb&&!Hr?fr:void 0,Os=$h({project:r,isUserPartOfTeam:typeof Ie<"u",isUserEditorInTeam:typeof Ie<"u"&&Ie.permissions.write,toastKey:lb,api:o}),db=(0,ee.useCallback)(()=>{V(1)},[V]);Zh({shouldShowToast:X!==1,accessRequests:e.accessRequests,onReviewRequests:db}),Xh({disabled:!ib||ur||oo(r.space)});let pb=Vn(x,r);(0,ee.useEffect)(()=>{na?r.archived?A({key:fr,variant:"info",text:`This file is archived and view-only. ${Wr?"Unarchive the file to edit.":""}`,action:Wr?{title:"Unarchive",onClick:ia}:void 0,type:"add",icon:"view-only",duration:1/0,permanent:!0}):Hr&&A({key:fr,type:"add",variant:"prominent-info",icon:"view-only",text:"You\u2019re previewing a view-only version of this template",duration:1/0,permanent:!0,action:{title:"Use Template",onClick:()=>uo(Ys({duplicateFrom:r.id}))}}):!wo&&Bs?A({key:fr,type:"add",variant:"info",icon:"warning",text:"You\u2019re viewing a template project",duration:1/0,showCloseButton:"never",action:xt?void 0:{title:"Edit Template",onClick:()=>Or(!1)}}):A({key:fr,type:"remove"})},[na,r.archived,ia,Wr,wo,Bs,xt,r.id,r.space,Hr,pb]),gf(Ra(r.title));let aa=Yf({channel:jo});Sf({user:x,channel:jo,permissions:{isViewOnly:xt||wt||oo(r.space)}});let mb=Qf({channel:jo});(0,ee.useEffect)(()=>{_r&&Es&&f.openThread(Es.threadId,Es.commentId).catch(()=>{Jh.reportError("Failed to open feedback thread via url")})},[_r]);let ub=y.useState(E=>E.feedbackModeActive);qf({toast:A,userNotifications:mb,isFeedbackActive:ub}),$f({toast:A,isDocumentLoaded:h,action:async E=>E==="subscribe"?o.subscribeToNotifications():o.unsubscribeFromNotifications()}),(0,ee.useEffect)(()=>{sd.init({userId:x.id,appVersion:gl,projectId:r.id}),a.processWhenReady(()=>{x.id&&(c.currentUserId=x.id),x.email&&(c.currentUserEmail=x.email),x.spaces&&(c.spaces=x.spaces)})},[r.id,x.email,x.id,x.spaces]);let fb=xf();zp(E=>{E(ud,()=>{setTimeout(()=>w(!0))}),E(fd,async Q=>{if(!Q)return;let we=`renamed-${r.id}`;try{await o.updateProject({title:Q})}catch{A({type:"add",variant:"error",key:we,text:"Failed to update project name",icon:"error"})}})});let gb=ee.default.useCallback(async()=>{Lm({insertPanel:!0,spaceId:Ie?.id},!0).catch(q)},[Ie?.id]),hb=ee.default.useCallback(async()=>{uo(Am(r))},[r]);_f({appMenu:p.displayMinimalUI?Qa.mobileWebAppMenu:Qa.webAppMenu,archiveProject:ab,onPreviewToggle(){Pr(a)},filePickerRef:n,openAccountSettings:Hs,onUploadMediaFilePick:fb,menuActionTargetService:aa,saveTemplateAsProject:sb,project:r,toast:A,unarchiveProject:ia,user:x,userCanArchive:Wr,handleNewProject:gb,handleProjectDuplication:hb}),bp({globalKeyBindings:ve});async function bb(E){$("ui_interaction",{page:"project-menu-bar",id:"change-access"});try{await o.updateProject({publicAccess:E})}catch{A({type:"add",variant:"error",key:`access-change-${r.id}`,text:"Failed to change the access level of this project",icon:"error"})}}function vb(){$("ui_interaction",{page:"project-menu-bar",id:"copy-link"})}function yb(E,Q){if(!$o||xt)return[];let we=[];for(let fe in Vs){let Go=Vs[fe];L(Go,"Team should have available collections");let{displayName:Lo,collections:Ot}=Go,$r=Ot.map(Xe=>{let[hr,qs]=at.extract(td(Xe));return{label:qs,click:()=>{zs({teamId:fe,destinationLabel:`${Lo} / ${qs}`,collection:Xe,spaceName:Lo,skipConfirmation:E})},checked:M&&E?M.teamId===fe&&(M.collection?.id===Xe.id||!M.collection&&Xe.id==="recent"):r.space.ownerId===fe&&(r.collection?.id===Xe.id||!r.collection&&Xe.id==="recent"),value:{spaceId:fe,collection:Xe},icon:hr?{src:hr,height:15,width:15}:void 0}});if(Lo!==""){let Xe=eb(Lo);we.push({label:Xe,submenu:$r,checked:M&&E?M.teamId===fe:r.space.ownerId===fe,click:()=>void zs({teamId:fe,destinationLabel:Xe,spaceName:Lo,skipConfirmation:E})})}else we.push({label:"Drafts",checked:M&&E?M.teamId===fe:r.space.ownerId===fe,enabled:!1,visible:!Q})}return[{label:"Move to\u2026",enabled:!1},...we]}function sa(E){let{location:Q,skipConfirmation:we,hideDrafts:fe}=E,Go=yb(we,fe);a.stores.contextMenuStore.show(Go,{location:Q,className:`${hf} ${ed}`})}let wb=(0,ee.useCallback)(()=>{a.siteSettings.setActiveTab({tab:"plans"}).catch(q)},[]),gr=async({teamId:E,destinationLabel:Q,collection:we,dismissModal:fe=!0})=>{let Go=we&&we.id!=="personal"&&we.id!=="recent"?we.id:null,Lo="move-project-toast";try{await o.updateProject({teamId:E,collectionId:Go}),r.space.ownerId!==E&&await o.getACL(),A({type:"add",variant:"success",icon:"success",text:at.removeFromText(`Project moved to ${Q}`),key:Lo})}catch(Ot){qm({err:Ws(Ot),targetTeamId:E,projectId:r.id,projectTitle:r.title,destination:Q,onClickOpenPlans:wb})}J(!1),fe&&(V(0),a.stores.modalStore.dismiss())};async function zs(E){let Q=r.collection?.id??"recent";if(!(E.collection?.id===Q&&E.teamId===r.space.ownerId)){if(r.space.ownerId!==E.teamId){if(T(E),E.skipConfirmation)return;J(!0);return}await gr(E)}}let _s=()=>{T(null),J(!1)},xb=()=>{R(null)};function Hs(){k(!P)}function Cb(E){window.location.href=`${Qt}?team=${E.id}&open-settings=1`}function kb(){if(!x.isOnLatestTerms)return qr.active.type==="CompleteSignup"?(0,lo.jsx)(ff,{accountApi:C}):(0,lo.jsx)($m,{fetchMe:C.fetchMe});if(qr.active.type==="DeprecatedDrafts")return(0,lo.jsx)(sf,{user:x,project:r,onShowMoveProjectMenu:sa,moveProjectDestination:M?.destinationLabel,onConfirmMoveProject:async()=>{M&&await gr({...M,dismissModal:!1})},onDismiss:()=>a.stores.modalStore.set({type:"None",source:"automatic"})});if(qr.active.type==="CreateTeam")return(0,lo.jsx)(Ky,{user:x,api:C,noEditRights:!0,onComplete:async E=>{let Q=x.spaces.find(we=>we.ownerId===E);to(Q)&&await gr({teamId:Q.ownerId,destinationLabel:Q.displayName,dismissModal:!0})}});if(D)return(0,lo.jsx)(Km,{action:"archive",project:D,onConfirm:Us,onClose:xb});if(M&&Z)return(0,lo.jsx)(Hm,{isMovedFromDrafts:oo(r.space),teamName:M.spaceName,onCancel:_s,onConfirm:()=>gr(M),onDismiss:_s});if(P)return(0,lo.jsx)(Qy,{userWorkspaces:Ns,onOpenWorkspaceSettings:Cb,api:C,onDismiss:Hs});if(Os)return Os}let ca=(0,ee.useMemo)(()=>Ie?to(Ie)?Ie.ownerId:null:r.space.scope==="user"||r.userRole==="prototypeViewer"||r.userRole==="viewer"?null:r.space.ownerId,[Ie,r.space.ownerId,r.space.scope,r.userRole]);return(0,ee.useEffect)(()=>{ca&&a.stores.libraryStore.getLibraryForTeam(ca).catch(q)},[ca]),Wm(Ie?.ownerId),(0,lo.jsxs)(zh,{children:[(0,lo.jsx)(Oh,{projectState:e,user:x,activePopover:X,onActivePopoverChange:V,onAccessChange:bb,onCopyProjectURL:vb,onShowMoveProjectMenu:sa,moveProjectDestination:M?.destinationLabel,onConfirmMoveProject:async()=>{M&&await gr({...M,dismissModal:!1})},onPublish:Xy,publishStatus:re,canPublish:a.publishStore.canPublish(a),onUpdateCustomDomain:Jy,defaultHostname:_,customHostname:j,defaultHostnameDeployment:Y,customHostnameDeployment:ie,deploymentStrategy:z}),(0,lo.jsx)(Jl,{children:kb()}),(0,lo.jsx)(up,{project:r})]})}var vt=b(S()),tb=(0,Ne.memo)(function({documentConnection:o,projectId:t}){let{projectStore:n,sessionStore:r,treeStore:i,publishStore:s,previewStore:d,remoteUsers:l,feedbackStore:p,assetStore:c,loadingStore:m,modalStore:g}=a.stores,v=n.useState(_=>_.teamSyncAction),f=(0,Ne.useRef)(!0),y=(0,Ne.useRef)(!1),h=r.useState(_=>_.user);if(!t)throw Error("Can\u2019t find project id");if(!fo.isOn("sites"))throw Vm;Om(),zm(),_m(h.id,t),Um(t),Vu();let w=jm(t),P=i.getSocketURL(w),k=ep({url:P,documentConnection:o,tunnel:dd()}),C=k.onConnect(()=>{y.current||(Rn("wsConnection"),C?.(),C=void 0,y.current=!0)});a.remoteDocument?.setSocket(k),s.initialize(t,k),d.initialize(t);let[x,D]=_u(t,k),R=Em(k,x,D),M=ow(),T=So(()=>new ic(R));(0,Ne.useEffect)(()=>{c.setAssetService(T),Qs.on(jo).register(T),T.refresh().catch(q)},[T]);let Z=(0,Ne.useRef)(null);(0,Ne.useEffect)(()=>{wd(a,T,Z)},[T]),(0,Ne.useEffect)(()=>{gd(R,T)},[R,T]);let J=So(()=>new Tm(R,k));(0,Ne.useEffect)(()=>Ks.on(jo).register(J),[]),$u({api:R,channel:jo}),qu({channel:jo,toast:A}),(0,Ne.useEffect)(()=>{p.initialize(a).catch(q)},[]),(0,Ne.useEffect)(()=>{R.setInitialProject(Gn.project)},[R]),(0,Ne.useEffect)(()=>k.onMessage(_=>{if(_.type!=="notifyProjectChange")return;let{scope:j}=_.value;j==="acl"?R.getACL():j==="assets"?T.refresh().catch(q):j==="metadata"?R.getProject():j==="sites"?s.loadHostnames().catch(q):j==="settings"&&s.loadProjectSettings().catch(q)}),[R,T,k]);let{isDarkMode:V}=ro();(0,Ne.useEffect)(()=>{l.setDarkMode(V)},[V]),(0,Ne.useEffect)(()=>{if(!n.project||n.projectLicenseType==="freeSite"||!f.current)return;f.current=!1;let _=n.project.space,j=_.scope==="organization"?_.ownerId:null,Y=v&&j,ie=h.spaces.find(({id:X})=>X===_.id),z=to(ie)&&["admin","editor"].includes(ie.role);Y&&(["chargeableSync","reactivate"].includes(v)&&a.processWhenReady(()=>{m.blockedDueToInvalidSubscription=!0,g.set({type:"SubscriptionNotInOrder",source:"settings",teamSyncAction:v,teamId:j,canReactivate:z})}),v==="sync"&&z&&Yp(j))},[v]);let{handleProjectOpenEvent:re}=ru();return(0,Ne.useEffect)(()=>{x.project&&re({projectId:x.project.id,projectLicenseType:x.project.license.type,teamId:x.project.space.ownerId,teamLicenseType:x.project.teamLicenseType??"free"})},[x.project]),(0,vt.jsx)(Wp.Provider,{value:$p(R),children:(0,vt.jsxs)(vp,{component:Ou,children:[(0,vt.jsx)(Zu,{socket:k,projectId:t,userId:h.id,documentConnection:o}),(0,vt.jsx)(_l,{mode:M,children:x.project&&(0,vt.jsx)(ob,{projectState:x,api:R,assetService:T,filePickerRef:Z})}),(0,vt.jsx)(Hp,{ref:Z})]})})});function ow(){let{overlayStore:e,scopeStore:o}=a.stores;return Jt(()=>{let t=e.editModeActive;if(zd(o.active))return t?"componentOverlayEditMode":"component"},[],[e,o])}var Ur,Ut,yt,oa=class{constructor(o){this.documentHandler=o;Gr(this,Ur);Gr(this,Ut,{});Gr(this,yt,null);qe(this,"socketStats",null)}get treeSchema(){return this.documentHandler.treeSchema}get treeVersion(){return this.documentHandler.treeVersion()}setSendFunction(o){Yr(this,yt,o)}sendMessage(o){Yo(this,yt)&&Yo(this,yt).call(this,o)}onConnect(){this.documentHandler.setRemoteConnection(this)}onDisconnect(o){this.documentHandler.setRemoteConnectionFailure(o)}onMessage(o){switch(o.type){case"lock":this.documentHandler.handleLock(o.id,o.value);break;case"state":o.id===Yo(this,Ur)&&Object.assign(Yo(this,Ut),o.value);break;case"rows":this.documentHandler.handleRows(o.id,o.value);break;case"confirmRows":this.documentHandler.handleConfirmRows(o.id,o.value);break;case"treeMessage":this.documentHandler.handleTreeMessage(o.id,o.value);break;case"treeUpdate":this.documentHandler.handleTreeUpdate(o.id,o.value);break;case"treeVerify":this.documentHandler.handleTreeVerify(o.value);break;case"welcome":{let{userId:t,userStates:n,protocolVersion:r}=o.value;Yr(this,Ur,t),Yr(this,Ut,{...n[t]}),r&&r>Jd&&A({type:"add",variant:"warning",key:"outdated-client",text:"A new version of Framer is available.",duration:1/0});break}}}setSocketStats(o){this.socketStats=o}rtt(){return this.socketStats?this.socketStats.rtt():NaN}updateUserState(o){if(!Yo(this,yt))return;let t=!1,n={};for(let r of Object.keys(o))o[r]!==void 0&&(_t(o[r],Yo(this,Ut)[r],!0)||(n[r]=o[r],t=!0));t&&(Object.assign(Yo(this,Ut),n),Yo(this,yt).call(this,{type:"state",value:n}))}};Ur=new WeakMap,Ut=new WeakMap,yt=new WeakMap;var Jo=b(S());Fm();Bm();Nm();var tw=window.framerUser.id,js=window.bootstrap?.project?.id;L(js,"Can\u2019t find project id");var rb=a.createRemoteDocumentHandler(js,tw),nb=new oa(rb);rb.setRemoteConnection(nb);rp((0,Jo.jsx)(fl.Provider,{value:a,children:(0,Jo.jsx)(Eu,{children:(0,Jo.jsx)(gp,{children:(0,Jo.jsxs)(Yn,{location:"project",title:"Failed to load project",description:(0,Jo.jsx)(G,{children:"Something unexpected happened on our end while loading the project."}),children:[(0,Jo.jsx)(tb,{documentConnection:nb,projectId:js}),(0,Jo.jsx)(Rm,{})]})})})}),document.getElementById("root"));
/*! Bundled license information:

react-google-recaptcha-v3/dist/react-google-recaptcha-v3.esm.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

react-google-recaptcha-v3/dist/react-google-recaptcha-v3.esm.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
//# sourceMappingURL=https://app.framerstatic.com/web.JLDGPC4O.mjs.map
